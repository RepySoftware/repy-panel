(self.webpackChunkrepy_panel=self.webpackChunkrepy_panel||[]).push([[4],{22490:function(e,t,n){"use strict";n.d(t,{hf:function(){return o},I9:function(){return a}});var i=(()=>(function(e){e.SAFE="SAFE",e.WARNING="WARNING",e.DANGER="DANGER"}(i||(i={})),i))();const r={[i.SAFE]:"green",[i.WARNING]:"orange",[i.DANGER]:"red"};function o(e){return r[e]}const c={[i.SAFE]:"SEGURO",[i.WARNING]:"ATEN\xc7\xc3O",[i.DANGER]:"RISCO"};function a(e){return c[e]}},3310:function(e,t,n){"use strict";n.d(t,{Yi:function(){return i},Sh:function(){return o}});var i=(()=>(function(e){e.GAS_LEVEL="GAS_LEVEL"}(i||(i={})),i))();const r={[i.GAS_LEVEL]:"T-Level | Medidor de g\xe1s"};function o(e){return r[e]}},18004:function(e,t,n){"use strict";n.r(t),n.d(t,{DevicesModule:function(){return A}});var i=n(38583),r=n(15495),o=n(37716),c=n(38555),a=n(84465),s=n(34811);let d=(()=>{class e{constructor(e,t,n){this._loader=e,this._toast=t,this._deviceService=n,this.devices=[]}refreshDevices(e={}){return e.showLoader&&this._loader.show(),new Promise((t,n)=>{this._deviceService.getDefault().subscribe(n=>{e.showLoader&&this._loader.dismiss(),this.devices=n,this.devices.sort((e,t)=>{var n,i;return(null===(n=e.deviceGasLevel)||void 0===n?void 0:n.percentage)-(null===(i=t.deviceGasLevel)||void 0===i?void 0:i.percentage)}),t(n)},t=>{e.showLoader&&this._loader.dismiss(),this._toast.showHttpError(t),n(t)})})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](c.D),o["\u0275\u0275inject"](a.k),o["\u0275\u0275inject"](s.U))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var l=n(54655),p=n(3310),v=n(26026),m=n(51095),u=n(93738),f=n(22490),g=n(18007),h=n(26835),y=n(16738);let C=(()=>{class e{transform(e){return e?y(e).fromNow():"-"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o["\u0275\u0275definePipe"]({name:"momentFromNow",type:e,pure:!0}),e})();function _(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",3),o["\u0275\u0275elementStart"](1,"div",4),o["\u0275\u0275text"](2," Data da pr\xf3xima troca "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",5),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"momentDate"),o["\u0275\u0275pipe"](6,"momentFromNow"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate2"](" ",o["\u0275\u0275pipeBind1"](5,2,e.device.deviceGasLevel.dangerDate)," - ",o["\u0275\u0275pipeBind1"](6,4,e.device.deviceGasLevel.dangerDate)," ")}}let O=(()=>{class e{constructor(){}ngOnInit(){}getStatusColor(){return(0,f.hf)(this.device.deviceGasLevel.status)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-list-device-gas-level"]],inputs:{device:"device"},decls:5,vars:7,consts:[[1,"content"],[1,"percentage"],["class","danger-date",4,"ngIf"],[1,"danger-date"],[1,"danger-date-title"],[1,"danger-date-value"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"round"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,_,7,6,"div",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275styleProp"]("color",t.getStatusColor()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](3,4,t.device.deviceGasLevel.percentage,2),"% "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.device.deviceGasLevel.dangerDate))},directives:[i.O5],pipes:[g.L,h.v,C],styles:[".content[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{line-height:normal;font-weight:700;font-size:26px}.content[_ngcontent-%COMP%]   .danger-date[_ngcontent-%COMP%]   .danger-date-title[_ngcontent-%COMP%]{font-size:14px;color:#666}.content[_ngcontent-%COMP%]   .danger-date[_ngcontent-%COMP%]   .danger-date-value[_ngcontent-%COMP%]{font-size:14px;font-weight:700}"]}),e})();function w(e,t){if(1&e&&o["\u0275\u0275element"](0,"app-list-device-gas-level",12),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275property"]("device",e)}}function S(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",5),o["\u0275\u0275elementStart"](1,"a",6),o["\u0275\u0275elementStart"](2,"mat-card"),o["\u0275\u0275elementStart"](3,"mat-card-content",7),o["\u0275\u0275elementStart"](4,"div",8),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",9),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",10),o["\u0275\u0275text"](9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,w,1,1,"app-list-device-gas-level",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate1"]("routerLink","/devices/",e.id,"/details"),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](e.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.getDeviceTypeLabel(e)),o["\u0275\u0275advance"](1),o["\u0275\u0275styleProp"]("color",e.isOnline?"var(--color-nephritis)":"var(--color-pomegranate)"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.isOnline?"Online":"Offline"," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","GAS_LEVEL"==e.type)}}let x=(()=>{class e{constructor(e,t){this.devicesViewService=e,this._title=t}ngOnInit(){this._title.set("Dispositivos - Lista"),this.devicesViewService.refreshDevices({showLoader:!0})}getDeviceTypeLabel(e){return(0,p.Sh)(e.type)}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](d),o["\u0275\u0275directiveInject"](v.y))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-devices-list"]],decls:10,vars:1,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","color","primary","routerLink","/devices/map"],[1,"row",2,"margin-top","10px !important"],["class","col-md-3 device",4,"ngFor","ngForOf"],[1,"col-md-3","device"],[2,"text-decoration","none",3,"routerLink"],[1,"card-content"],[1,"device-title"],[1,"device-type"],[1,"is-online"],[3,"device",4,"ngIf"],[3,"device"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"h1"),o["\u0275\u0275text"](3,"Dispositivos"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",0),o["\u0275\u0275elementStart"](5,"div",1),o["\u0275\u0275elementStart"](6,"button",2),o["\u0275\u0275text"](7,"Ver mapa"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",3),o["\u0275\u0275template"](9,S,11,7,"div",4),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](9),o["\u0275\u0275property"]("ngForOf",t.devicesViewService.devices))},directives:[m.lW,l.rH,i.sg,l.yS,u.a8,u.dn,i.O5,O],styles:[".device[_ngcontent-%COMP%]{margin-bottom:16px}.device[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%}.device[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1px;gap:1px}.device[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .device-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.device[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .device-type[_ngcontent-%COMP%]{font-size:14px;color:#666}.device[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .is-online[_ngcontent-%COMP%]{font-weight:700}"]}),e})();var E=n(99010);let I=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-device-gas-level-map-info"]],inputs:{device:"device"},decls:4,vars:2,template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"strong"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](2,"br"),o["\u0275\u0275text"](3)),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](t.device.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("\n",t.device.deviceGasLevel.percentage.toFixed(0),"%"))},styles:[""]}),e})();const M=["map"];function L(e,t){if(1&e&&o["\u0275\u0275element"](0,"app-device-gas-level-map-info",7),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275property"]("device",e.device)}}function P(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"map-marker",3,4),o["\u0275\u0275listener"]("mapClick",function(){const t=o["\u0275\u0275restoreView"](e).index,n=o["\u0275\u0275reference"](1);return o["\u0275\u0275nextContext"]().openInfoWindow(n,t)}),o["\u0275\u0275elementStart"](2,"map-info-window",null,5),o["\u0275\u0275template"](4,L,1,1,"app-device-gas-level-map-info",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275property"]("position",e.marker.position)("title",e.marker.title)("label",e.marker.label)("options",e.marker.options),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",e.device.deviceGasLevel)}}let D=(()=>{class e{constructor(e,t,n,i){this._loader=e,this._toast=t,this._devicesViewService=n,this._title=i,this.markers=[],this.mapZoom=12,this.mapOptions={},this._firstLoading=!0,this.refreshInterval={interval:null,time:3e3}}ngOnInit(){this._title.set("Dispositivos - Mapa")}ngAfterViewInit(){this.initDevicesData()}ngOnDestroy(){clearInterval(this.refreshInterval.interval)}initDevicesData(){this._devicesViewService.refreshDevices({showLoader:!0}).then(e=>{e.forEach(e=>{this.markers.push({device:e,marker:{position:{lat:e.address.latitude,lng:e.address.longitude},options:{icon:this.pinSymbol((0,f.hf)(e.deviceGasLevel.status))}}})}),this._firstLoading&&e.length&&(this.mapCenter={lat:e[0].address.latitude,lng:e[0].address.longitude},this._firstLoading=!1)})}openInfoWindow(e,t){const n=Array.from(this.infoWindowsView)[t];try{n.open({getAnchor:()=>e.getAnchor()})}catch(i){}}pinSymbol(e){return{path:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z",fillColor:e,fillOpacity:1,strokeColor:"#444",strokeWeight:1,scale:1}}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](c.D),o["\u0275\u0275directiveInject"](a.k),o["\u0275\u0275directiveInject"](d),o["\u0275\u0275directiveInject"](v.y))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-devices-map"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](M,5),o["\u0275\u0275viewQuery"](E.ch,5)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.map=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.infoWindowsView=e)}},decls:3,vars:4,consts:[["width","100%","height","100%",3,"zoom","center","options"],["map",""],[3,"position","title","label","options","mapClick",4,"ngFor","ngForOf"],[3,"position","title","label","options","mapClick"],["marker","mapMarker"],["infoWindow",""],[3,"device",4,"ngIf"],[3,"device"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"google-map",0,1),o["\u0275\u0275template"](2,P,5,5,"map-marker",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("zoom",t.mapZoom)("center",t.mapCenter)("options",t.mapOptions),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.markers))},directives:[E.b6,i.sg,E.O_,E.ch,i.O5,I],styles:[".btn-list[_ngcontent-%COMP%]{position:absolute;top:85px;left:20px;z-index:1}"]}),e})();const k=[{path:"",component:(()=>{class e{constructor(e,t){this.devicesViewService=e,this._title=t}ngOnInit(){this._title.set("Dispositivos")}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](d),o["\u0275\u0275directiveInject"](v.y))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-devices"]],decls:1,vars:0,template:function(e,t){1&e&&o["\u0275\u0275element"](0,"router-outlet")},directives:[l.lC],styles:[""]}),e})(),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"map",component:D},{path:"list",component:x},{path:":id/details",loadChildren:()=>Promise.all([n.e(239),n.e(592),n.e(789)]).then(n.bind(n,40789)).then(e=>e.DeviceDetailsModule)}]}];let G=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[l.Bz.forChild(k)],l.Bz]}),e})();var b=n(35503);let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[d],imports:[[i.ez,r.h,G,b.D,E.Y4]]}),e})()},18007:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var i=n(37716);let r=(()=>{class e{transform(e,t=0){return Number(e.toFixed(t))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"round",type:e,pure:!0}),e})()}}]);