!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(self.webpackChunkrepy_panel=self.webpackChunkrepy_panel||[]).push([[4],{22490:function(e,t,n){"use strict";var r,o;n.d(t,{hf:function(){return l},I9:function(){return s}});var a=(function(e){e.SAFE="SAFE",e.WARNING="WARNING",e.DANGER="DANGER"}(a||(a={})),a),c=(i(r={},a.SAFE,"green"),i(r,a.WARNING,"orange"),i(r,a.DANGER,"red"),r);function l(e){return c[e]}var d=(i(o={},a.SAFE,"SEGURO"),i(o,a.WARNING,"ATEN\xc7\xc3O"),i(o,a.DANGER,"RISCO"),o);function s(e){return d[e]}},3310:function(e,t,n){"use strict";n.d(t,{Yi:function(){return r},Sh:function(){return a}});var r=(function(e){e.GAS_LEVEL="GAS_LEVEL"}(r||(r={})),r),o=i({},r.GAS_LEVEL,"T-Level | Medidor de g\xe1s");function a(e){return o[e]}},18004:function(t,i,r){"use strict";r.r(i),r.d(i,{DevicesModule:function(){return F}});var o=r(38583),a=r(15495),c=r(37716),l=r(38555),d=r(84465),s=r(34811),v=function(){var t=function(){function t(n,i,r){e(this,t),this._loader=n,this._toast=i,this._deviceService=r,this.devices=[]}return n(t,[{key:"refreshDevices",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.showLoader&&this._loader.show(),new Promise(function(n,i){e._deviceService.getDefault().subscribe(function(i){t.showLoader&&e._loader.dismiss(),e.devices=i,e.devices.sort(function(e,t){var n,i;return(null===(n=e.deviceGasLevel)||void 0===n?void 0:n.percentage)-(null===(i=t.deviceGasLevel)||void 0===i?void 0:i.percentage)}),n(i)},function(n){t.showLoader&&e._loader.dismiss(),e._toast.showHttpError(n),i(n)})})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275inject"](l.D),c["\u0275\u0275inject"](d.k),c["\u0275\u0275inject"](s.U))},t.\u0275prov=c["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),u=r(54655),p=r(3310),f=r(26026),m=r(51095),g=r(93738),h=r(22490),y=r(18007),C=r(26835),w=r(16738),_=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"transform",value:function(e){return e?w(e).fromNow():"-"}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c["\u0275\u0275definePipe"]({name:"momentFromNow",type:t,pure:!0}),t}();function O(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275elementStart"](1,"div",4),c["\u0275\u0275text"](2," Data da pr\xf3xima troca "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",5),c["\u0275\u0275text"](4),c["\u0275\u0275pipe"](5,"momentDate"),c["\u0275\u0275pipe"](6,"momentFromNow"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate2"](" ",c["\u0275\u0275pipeBind1"](5,2,n.device.deviceGasLevel.dangerDate)," - ",c["\u0275\u0275pipeBind1"](6,4,n.device.deviceGasLevel.dangerDate)," ")}}var S=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"getStatusColor",value:function(){return(0,h.hf)(this.device.deviceGasLevel.status)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["app-list-device-gas-level"]],inputs:{device:"device"},decls:5,vars:7,consts:[[1,"content"],[1,"percentage"],["class","danger-date",4,"ngIf"],[1,"danger-date"],[1,"danger-date-title"],[1,"danger-date-value"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275text"](2),c["\u0275\u0275pipe"](3,"round"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](4,O,7,6,"div",2),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275styleProp"]("color",t.getStatusColor()),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](3,4,t.device.deviceGasLevel.percentage,2),"% "),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.device.deviceGasLevel.dangerDate))},directives:[o.O5],pipes:[y.L,C.v,_],styles:[".content[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{line-height:normal;font-weight:700;font-size:26px}.content[_ngcontent-%COMP%]   .danger-date[_ngcontent-%COMP%]   .danger-date-title[_ngcontent-%COMP%]{font-size:14px;color:#666}.content[_ngcontent-%COMP%]   .danger-date[_ngcontent-%COMP%]   .danger-date-value[_ngcontent-%COMP%]{font-size:14px;font-weight:700}"]}),t}();function x(e,t){if(1&e&&c["\u0275\u0275element"](0,"app-list-device-gas-level",12),2&e){var n=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275property"]("device",n)}}function k(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",5),c["\u0275\u0275elementStart"](1,"a",6),c["\u0275\u0275elementStart"](2,"mat-card"),c["\u0275\u0275elementStart"](3,"mat-card-content",7),c["\u0275\u0275elementStart"](4,"div",8),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",9),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",10),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](10,x,1,1,"app-list-device-gas-level",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275propertyInterpolate1"]("routerLink","/devices/",n.id,"/details"),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](n.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](i.getDeviceTypeLabel(n)),c["\u0275\u0275advance"](1),c["\u0275\u0275styleProp"]("color",n.isOnline?"var(--color-nephritis)":"var(--color-pomegranate)"),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",n.isOnline?"Online":"Offline"," "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","GAS_LEVEL"==n.type)}}var E=function(){var t=function(){function t(n,i){e(this,t),this.devicesViewService=n,this._title=i}return n(t,[{key:"ngOnInit",value:function(){this._title.set("Dispositivos - Lista"),this.devicesViewService.refreshDevices({showLoader:!0})}},{key:"getDeviceTypeLabel",value:function(e){return(0,p.Sh)(e.type)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](v),c["\u0275\u0275directiveInject"](f.y))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["app-devices-list"]],decls:10,vars:1,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","color","primary","routerLink","/devices/map"],[1,"row",2,"margin-top","10px !important"],["class","col-md-3 device",4,"ngFor","ngForOf"],[1,"col-md-3","device"],[2,"text-decoration","none",3,"routerLink"],[1,"card-content"],[1,"device-title"],[1,"device-type"],[1,"is-online"],[3,"device",4,"ngIf"],[3,"device"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"h1"),c["\u0275\u0275text"](3,"Dispositivos"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",0),c["\u0275\u0275elementStart"](5,"div",1),c["\u0275\u0275elementStart"](6,"button",2),c["\u0275\u0275text"](7,"Ver mapa"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",3),c["\u0275\u0275template"](9,k,11,7,"div",4),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("ngForOf",t.devicesViewService.devices))},directives:[m.lW,u.rH,o.sg,u.yS,g.a8,g.dn,o.O5,S],styles:[".device[_ngcontent-%COMP%]{margin-bottom:16px}.device[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%}.device[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1px;gap:1px}.device[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .device-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.device[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .device-type[_ngcontent-%COMP%]{font-size:14px;color:#666}.device[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .is-online[_ngcontent-%COMP%]{font-weight:700}"]}),t}(),I=r(99010),M=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["app-device-gas-level-map-info"]],inputs:{device:"device"},decls:4,vars:2,template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"strong"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](2,"br"),c["\u0275\u0275text"](3)),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](t.device.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("\n",t.device.deviceGasLevel.percentage.toFixed(0),"%"))},styles:[""]}),t}(),L=["map"];function P(e,t){if(1&e&&c["\u0275\u0275element"](0,"app-device-gas-level-map-info",7),2&e){var n=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275property"]("device",n.device)}}function b(e,t){if(1&e){var n=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"map-marker",3,4),c["\u0275\u0275listener"]("mapClick",function(){var e=c["\u0275\u0275restoreView"](n).index,t=c["\u0275\u0275reference"](1);return c["\u0275\u0275nextContext"]().openInfoWindow(t,e)}),c["\u0275\u0275elementStart"](2,"map-info-window",null,5),c["\u0275\u0275template"](4,P,1,1,"app-device-gas-level-map-info",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;c["\u0275\u0275property"]("position",i.marker.position)("title",i.marker.title)("label",i.marker.label)("options",i.marker.options),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",i.device.deviceGasLevel)}}var D,G,A=function(){var t=function(){function t(n,i,r,o){e(this,t),this._loader=n,this._toast=i,this._devicesViewService=r,this._title=o,this.markers=[],this.mapZoom=12,this.mapOptions={},this._firstLoading=!0,this.refreshInterval={interval:null,time:3e3}}return n(t,[{key:"ngOnInit",value:function(){this._title.set("Dispositivos - Mapa")}},{key:"ngAfterViewInit",value:function(){this.initDevicesData()}},{key:"ngOnDestroy",value:function(){clearInterval(this.refreshInterval.interval)}},{key:"initDevicesData",value:function(){var e=this;this._devicesViewService.refreshDevices({showLoader:!0}).then(function(t){t.forEach(function(t){e.markers.push({device:t,marker:{position:{lat:t.address.latitude,lng:t.address.longitude},options:{icon:e.pinSymbol((0,h.hf)(t.deviceGasLevel.status))}}})}),e._firstLoading&&t.length&&(e.mapCenter={lat:t[0].address.latitude,lng:t[0].address.longitude},e._firstLoading=!1)})}},{key:"openInfoWindow",value:function(e,t){var n=Array.from(this.infoWindowsView)[t];try{n.open({getAnchor:function(){return e.getAnchor()}})}catch(i){}}},{key:"pinSymbol",value:function(e){return{path:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z",fillColor:e,fillOpacity:1,strokeColor:"#444",strokeWeight:1,scale:1}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](l.D),c["\u0275\u0275directiveInject"](d.k),c["\u0275\u0275directiveInject"](v),c["\u0275\u0275directiveInject"](f.y))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["app-devices-map"]],viewQuery:function(e,t){var n;(1&e&&(c["\u0275\u0275viewQuery"](L,5),c["\u0275\u0275viewQuery"](I.ch,5)),2&e)&&(c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.map=n.first),c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.infoWindowsView=n))},decls:3,vars:4,consts:[["width","100%","height","100%",3,"zoom","center","options"],["map",""],[3,"position","title","label","options","mapClick",4,"ngFor","ngForOf"],[3,"position","title","label","options","mapClick"],["marker","mapMarker"],["infoWindow",""],[3,"device",4,"ngIf"],[3,"device"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"google-map",0,1),c["\u0275\u0275template"](2,b,5,5,"map-marker",2),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275property"]("zoom",t.mapZoom)("center",t.mapCenter)("options",t.mapOptions),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",t.markers))},directives:[I.b6,o.sg,I.O_,I.ch,o.O5,M],styles:[".btn-list[_ngcontent-%COMP%]{position:absolute;top:85px;left:20px;z-index:1}"]}),t}(),N=[{path:"",component:(D=function(){function t(n,i){e(this,t),this.devicesViewService=n,this._title=i}return n(t,[{key:"ngOnInit",value:function(){this._title.set("Dispositivos")}},{key:"ngOnDestroy",value:function(){}}]),t}(),D.\u0275fac=function(e){return new(e||D)(c["\u0275\u0275directiveInject"](v),c["\u0275\u0275directiveInject"](f.y))},D.\u0275cmp=c["\u0275\u0275defineComponent"]({type:D,selectors:[["app-devices"]],decls:1,vars:0,template:function(e,t){1&e&&c["\u0275\u0275element"](0,"router-outlet")},directives:[u.lC],styles:[""]}),D),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"map",component:A},{path:"list",component:E},{path:":id/details",loadChildren:function(){return Promise.all([r.e(239),r.e(592),r.e(789)]).then(r.bind(r,40789)).then(function(e){return e.DeviceDetailsModule})}}]}],j=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[u.Bz.forChild(N)],u.Bz]}),t}(),V=r(35503),F=((G=function t(){e(this,t)}).\u0275fac=function(e){return new(e||G)},G.\u0275mod=c["\u0275\u0275defineNgModule"]({type:G}),G.\u0275inj=c["\u0275\u0275defineInjector"]({providers:[v],imports:[[o.ez,a.h,j,V.D,I.Y4]]}),G)},18007:function(t,i,r){"use strict";r.d(i,{L:function(){return a}});var o=r(37716),a=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"transform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e.toFixed(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"round",type:t,pure:!0}),t}()}}])}();