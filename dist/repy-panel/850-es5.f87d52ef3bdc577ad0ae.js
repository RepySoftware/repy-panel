!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(self.webpackChunkrepy_panel=self.webpackChunkrepy_panel||[]).push([[850],{3310:function(e,t,n){"use strict";n.d(t,{Yi:function(){return r},Sh:function(){return a}});var r=(function(e){e.GAS_LEVEL="GAS_LEVEL"}(r||(r={})),r),o=i({},r.GAS_LEVEL,"Medidor do n\xedvel do g\xe1s");function a(e){return o[e]}},7850:function(t,r,o){"use strict";var a;o.r(r),o.d(r,{DevicesModule:function(){return W}});var c=o(38583),s=o(6591),l=o(37716),d=o(38555),u=o(84465),v=o(34811),p=function(){var t=function(){function t(n,i,r){e(this,t),this._loader=n,this._toast=i,this._deviceService=r,this.devices=[]}return n(t,[{key:"refreshDevices",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.showLoader&&this._loader.show(),new Promise(function(n,i){e._deviceService.getDefault().subscribe(function(i){t.showLoader&&e._loader.dismiss(),e.devices=i,e.devices.sort(function(e,t){var n,i;return(null===(n=e.deviceGasLevel)||void 0===n?void 0:n.percentage)-(null===(i=t.deviceGasLevel)||void 0===i?void 0:i.percentage)}),n(i)},function(n){t.showLoader&&e._loader.dismiss(),e._toast.showHttpError(n),i(n)})})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275inject"](d.D),l["\u0275\u0275inject"](u.k),l["\u0275\u0275inject"](v.U))},t.\u0275prov=l["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),f=o(54655),m=o(3310),h=o(26026),y=o(51095),g=o(93738),w=(function(e){e.SAFE="SAFE",e.WARNING="WARNING",e.DANGER="DANGER"}(w||(w={})),w),k=(i(a={},w.SAFE,"green"),i(a,w.WARNING,"orange"),i(a,w.DANGER,"red"),a);function S(e){return k[e]}var E=o(18007),I=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"getStatusColor",value:function(){return S(this.device.deviceGasLevel.status)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["app-list-device-gas-level"]],inputs:{device:"device"},decls:3,vars:6,template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"h3"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"round"),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275styleProp"]("color",t.getStatusColor()),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](2,3,t.device.deviceGasLevel.percentage,2),"%\n"))},pipes:[E.L],styles:[""]}),t}();function b(e,t){if(1&e&&l["\u0275\u0275element"](0,"app-list-device-gas-level",8),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275property"]("device",n)}}function L(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",5),l["\u0275\u0275elementStart"](1,"a",6),l["\u0275\u0275elementStart"](2,"mat-card"),l["\u0275\u0275elementStart"](3,"mat-card-content"),l["\u0275\u0275elementStart"](4,"mat-card-title"),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"mat-card-subtitle"),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](8,b,1,1,"app-list-device-gas-level",7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275propertyInterpolate1"]("routerLink","/devices/",n.id,"/details"),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](n.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](i.getDeviceTypeLabel(n)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","GAS_LEVEL"==n.type)}}var _=function(){var t=function(){function t(n,i){e(this,t),this.devicesViewService=n,this._title=i}return n(t,[{key:"ngOnInit",value:function(){this._title.set("Dispositivos - Lista"),this.devicesViewService.refreshDevices({showLoader:!0})}},{key:"getDeviceTypeLabel",value:function(e){return(0,m.Sh)(e.type)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](p),l["\u0275\u0275directiveInject"](h.y))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["app-devices-list"]],decls:10,vars:1,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","color","primary","routerLink","/devices/map"],[1,"row",2,"margin-top","10px !important"],["class","col-md-3 device",4,"ngFor","ngForOf"],[1,"col-md-3","device"],[2,"text-decoration","none",3,"routerLink"],[3,"device",4,"ngIf"],[3,"device"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"h1"),l["\u0275\u0275text"](3,"Dispositivos"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",0),l["\u0275\u0275elementStart"](5,"div",1),l["\u0275\u0275elementStart"](6,"button",2),l["\u0275\u0275text"](7,"Ver mapa"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",3),l["\u0275\u0275template"](9,L,9,4,"div",4),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngForOf",t.devicesViewService.devices))},directives:[y.lW,f.rH,c.sg,f.yS,g.a8,g.dn,g.n5,g.$j,c.O5,I],styles:[".device[_ngcontent-%COMP%]{margin-bottom:16px}"]}),t}(),x=o(99010),C=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["app-device-gas-level-map-info"]],inputs:{device:"device"},decls:4,vars:2,template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"strong"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](2,"br"),l["\u0275\u0275text"](3)),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](t.device.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("\n",t.device.deviceGasLevel.percentage.toFixed(0),"%"))},styles:[""]}),t}(),D=["map"];function O(e,t){if(1&e&&l["\u0275\u0275element"](0,"app-device-gas-level-map-info",7),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275property"]("device",n.device)}}function j(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"map-marker",3,4),l["\u0275\u0275listener"]("mapClick",function(){var e=l["\u0275\u0275restoreView"](n).index,t=l["\u0275\u0275reference"](1);return l["\u0275\u0275nextContext"]().openInfoWindow(t,e)}),l["\u0275\u0275elementStart"](2,"map-info-window",null,5),l["\u0275\u0275template"](4,O,1,1,"app-device-gas-level-map-info",6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;l["\u0275\u0275property"]("position",i.marker.position)("title",i.marker.title)("label",i.marker.label)("options",i.marker.options),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",i.device.deviceGasLevel)}}var A,G,V=function(){var t=function(){function t(n,i,r,o){e(this,t),this._loader=n,this._toast=i,this._devicesViewService=r,this._title=o,this.markers=[],this.mapZoom=12,this.mapOptions={},this._firstLoading=!0,this.refreshInterval={interval:null,time:3e3}}return n(t,[{key:"ngOnInit",value:function(){this._title.set("Dispositivos - Mapa")}},{key:"ngAfterViewInit",value:function(){this.initDevicesData()}},{key:"ngOnDestroy",value:function(){clearInterval(this.refreshInterval.interval)}},{key:"initDevicesData",value:function(){var e=this;this._devicesViewService.refreshDevices({showLoader:!0}).then(function(t){t.forEach(function(t){e.markers.push({device:t,marker:{position:{lat:t.address.latitude,lng:t.address.longitude},options:{icon:e.pinSymbol(S(t.deviceGasLevel.status))}}})}),e._firstLoading&&t.length&&(e.mapCenter={lat:t[0].address.latitude,lng:t[0].address.longitude},e._firstLoading=!1)})}},{key:"openInfoWindow",value:function(e,t){var n=Array.from(this.infoWindowsView)[t];try{n.open({getAnchor:function(){return e.getAnchor()}})}catch(i){}}},{key:"pinSymbol",value:function(e){return{path:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z",fillColor:e,fillOpacity:1,strokeColor:"#444",strokeWeight:1,scale:1}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](d.D),l["\u0275\u0275directiveInject"](u.k),l["\u0275\u0275directiveInject"](p),l["\u0275\u0275directiveInject"](h.y))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["app-devices-map"]],viewQuery:function(e,t){var n;(1&e&&(l["\u0275\u0275viewQuery"](D,5),l["\u0275\u0275viewQuery"](x.ch,5)),2&e)&&(l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.map=n.first),l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.infoWindowsView=n))},decls:3,vars:4,consts:[["width","100%","height","100%",3,"zoom","center","options"],["map",""],[3,"position","title","label","options","mapClick",4,"ngFor","ngForOf"],[3,"position","title","label","options","mapClick"],["marker","mapMarker"],["infoWindow",""],[3,"device",4,"ngIf"],[3,"device"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"google-map",0,1),l["\u0275\u0275template"](2,j,5,5,"map-marker",2),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("zoom",t.mapZoom)("center",t.mapCenter)("options",t.mapOptions),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",t.markers))},directives:[x.b6,c.sg,x.O_,x.ch,c.O5,C],styles:[".btn-list[_ngcontent-%COMP%]{position:absolute;top:85px;left:20px;z-index:1}"]}),t}(),N=[{path:"",component:(A=function(){function t(n,i){e(this,t),this.devicesViewService=n,this._title=i}return n(t,[{key:"ngOnInit",value:function(){this._title.set("Dispositivos"),this.devicesViewService.refreshDevices()}},{key:"ngOnDestroy",value:function(){}}]),t}(),A.\u0275fac=function(e){return new(e||A)(l["\u0275\u0275directiveInject"](p),l["\u0275\u0275directiveInject"](h.y))},A.\u0275cmp=l["\u0275\u0275defineComponent"]({type:A,selectors:[["app-devices"]],decls:1,vars:0,template:function(e,t){1&e&&l["\u0275\u0275element"](0,"router-outlet")},directives:[f.lC],styles:[""]}),A),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"map",component:V},{path:"list",component:_},{path:":id/details",loadChildren:function(){return Promise.all([o.e(511),o.e(592),o.e(789)]).then(o.bind(o,40789)).then(function(e){return e.DeviceDetailsModule})}}]}],F=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[f.Bz.forChild(N)],f.Bz]}),t}(),M=o(35503),W=((G=function t(){e(this,t)}).\u0275fac=function(e){return new(e||G)},G.\u0275mod=l["\u0275\u0275defineNgModule"]({type:G}),G.\u0275inj=l["\u0275\u0275defineInjector"]({providers:[p],imports:[[c.ez,s.h,F,M.D,x.Y4]]}),G)},18007:function(t,i,r){"use strict";r.d(i,{L:function(){return a}});var o=r(37716),a=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"transform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e.toFixed(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"round",type:t,pure:!0}),t}()}}])}();