(self.webpackChunkrepy_panel=self.webpackChunkrepy_panel||[]).push([[938],{44836:function(e,t,n){!function(e,t,n){"use strict";var r=function(e){e&&Object.assign(this,e)},o=function(){function t(e,t){this.el=e,this.ngZone=t,this.onAddressChange=new n.EventEmitter}return t.prototype.ngAfterViewInit=function(){this.options||(this.options=new r),this.initialize()},t.prototype.isGoogleLibExists=function(){return!(!google||!google.maps||!google.maps.places)},t.prototype.initialize=function(){var e=this;if(!this.isGoogleLibExists())throw new Error("Google maps library can not be found");if(this.autocomplete=new google.maps.places.Autocomplete(this.el.nativeElement,this.options),!this.autocomplete)throw new Error("Autocomplete is not initialized");null!=!this.autocomplete.addListener&&(this.eventListener=this.autocomplete.addListener("place_changed",function(){e.handleChangeEvent()})),this.el.nativeElement.addEventListener("keydown",function(t){t.key&&"enter"==t.key.toLowerCase()&&t.target===e.el.nativeElement&&(t.preventDefault(),t.stopPropagation())}),window&&window.navigator&&window.navigator.userAgent&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&setTimeout(function(){var e=document.getElementsByClassName("pac-container");if(e){var t=Array.from(e);if(t)for(var n=0,r=t;n<r.length;n++){var o=r[n];o&&o.addEventListener("touchend",function(e){e.stopImmediatePropagation()})}}},500)},t.prototype.reset=function(){this.autocomplete.setComponentRestrictions(this.options.componentRestrictions),this.autocomplete.setTypes(this.options.types)},t.prototype.handleChangeEvent=function(){var e=this;this.ngZone.run(function(){e.place=e.autocomplete.getPlace(),e.place&&e.onAddressChange.emit(e.place)})},t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.NgZone}]},t.propDecorators={options:[{type:n.Input,args:["options"]}],onAddressChange:[{type:n.Output}]},t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.NgZone))},t.\u0275dir=e.\u0275\u0275defineDirective({type:t,selectors:[["","ngx-google-places-autocomplete",""]],inputs:{options:"options"},outputs:{onAddressChange:"onAddressChange"},exportAs:["ngx-places"]}),t}(),i=function(){function t(){}return t.ctorParameters=function(){return[]},t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({}),t}();t.GooglePlaceModule=i,t.GooglePlaceDirective=o,Object.defineProperty(t,"__esModule",{value:!0})}(n(37716),t,n(37716))},3769:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});class r{static toCpfCnpj(e){return e?11==e.length?e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/g,"$1.$2.$3-$4"):14==e.length?e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/g,"$1.$2.$3/$4-$5"):e:null}static getOnlyNumbers(e){return e.replace(/[^0-9\\.]+/g,"")}static toMoney(e){return`R$ ${e.toFixed(2).replace(".",",")}`}}},17668:function(e,t,n){"use strict";n.r(t),n.d(t,{ProductsModule:function(){return se}});var r=n(38583),o=n(54655),i=n(3679),a=n(22238),l=(()=>(function(e){e.UN="UN",e.M="M",e.KG="KG"}(l||(l={})),l))(),s=n(37716),c=n(66082),m=n(75355),d=n(38555),p=n(84465),u=n(98295),h=n(49983),f=n(67441),g=n(45396),v=n(51095),E=n(71419),S=n(72458);function I(e,t){1&e&&s["\u0275\u0275element"](0,"button-dialog-close")}function x(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"h3",22),s["\u0275\u0275text"](1,"Novo produto"),s["\u0275\u0275elementEnd"]())}function w(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h3",22),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("Edi\xe7\xe3o ",e.product.name,"")}}function y(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),s["\u0275\u0275elementEnd"]())}function C(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),s["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",23),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("",e.name," ")}}function b(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),s["\u0275\u0275elementEnd"]())}function P(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",23),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("",e," ")}}function F(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),s["\u0275\u0275elementEnd"]())}let D=(()=>{class e{constructor(e,t,n,r,o,i,a){this._productService=e,this._activatedRoute=t,this._alert=n,this._loader=r,this._toast=o,this._dialogRef=i,this.inputData=a,this.categories=[],this.measurementUnits=Object.values(l),this.initForm()}ngOnInit(){this.productId=this._activatedRoute.snapshot.params.productId||this.inputData.productId,this.isModal=!!this.inputData.productId,this.productId&&this.getProduct().then(()=>{this.setFormValues()}),this.getCategories()}initForm(){this.productForm=new i.cw({category:new i.NI(null,i.kI.required),code:new i.NI(null,i.kI.required),name:new i.NI(null,i.kI.required),description:new i.NI(null),measurementUnit:new i.NI(null,i.kI.required),isGas:new i.NI(null)})}setFormValues(){this.productForm.get("category").setValue(this.product.category.id),this.productForm.get("code").setValue(this.product.code),this.productForm.get("name").setValue(this.product.name),this.productForm.get("description").setValue(this.product.description),this.productForm.get("measurementUnit").setValue(this.product.measurementUnit),this.productForm.get("isGas").setValue(this.product.isGas)}getCategories(){this._productService.getCategories().subscribe(e=>{this.categories=e},e=>{this._toast.showHttpError(e)})}getProduct(e=this.productId){return new Promise((t,n)=>{this._loader.show(),this._productService.getById(e).subscribe(e=>{this._loader.dismiss(),this.product=e,t(e)},e=>{this._loader.dismiss(),this._toast.showHttpError(e)})})}save(){if(!this.productForm.valid)throw this._toast.open("Preencha todos os campos obrigat\xf3rios","error"),this.productForm.markAllAsTouched(),new Error("Invalid form");const e={categoryId:this.productForm.get("category").value,code:this.productForm.get("code").value,name:this.productForm.get("name").value,description:this.productForm.get("description").value,measurementUnit:this.productForm.get("measurementUnit").value,isGas:this.productForm.get("isGas").value};let t;this.product?(e.id=this.product.id,t=this._productService.update(e)):t=this._productService.create(e),this._loader.show(),t.subscribe(e=>{this._loader.dismiss(),this._toast.open("Salvo com sucesso!","success"),this.product=e,this.initForm(),this.setFormValues(),this._dialogRef.close({hasUpdate:!0})},e=>{this._loader.dismiss(),this._toast.showHttpError(e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](c.M),s["\u0275\u0275directiveInject"](o.gz),s["\u0275\u0275directiveInject"](m.O),s["\u0275\u0275directiveInject"](d.D),s["\u0275\u0275directiveInject"](p.k),s["\u0275\u0275directiveInject"](a.so),s["\u0275\u0275directiveInject"](a.WI))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-product-form"]],decls:45,vars:10,consts:[[4,"ngIf"],[1,"row"],[1,"col-sm-12"],["class","title",4,"ngIf"],[3,"formGroup"],[1,"col-7"],["matInput","","placeholder","Nome","autocomplete","off","formControlName","name"],["name",""],[1,"col-5"],["matInput","","placeholder","C\xf3digo","autocomplete","off","formControlName","code"],["code",""],[1,"col-12"],["matInput","","placeholder","Descri\xe7\xe3o (opcional)","autocomplete","off","formControlName","description"],["description",""],["formControlName","category"],["category",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","measurementUnit"],["measurementUnit",""],[1,"col-2"],["formControlName","isGas",2,"margin-top","24px"],["mat-flat-button","","color","primary",2,"margin","24px 0",3,"click"],[1,"title"],[3,"value"]],template:function(e,t){if(1&e&&(s["\u0275\u0275template"](0,I,1,0,"button-dialog-close",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275template"](3,x,2,0,"h3",3),s["\u0275\u0275template"](4,w,2,1,"h3",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"form",4),s["\u0275\u0275elementStart"](6,"div",1),s["\u0275\u0275elementStart"](7,"div",5),s["\u0275\u0275elementStart"](8,"mat-form-field"),s["\u0275\u0275element"](9,"input",6,7),s["\u0275\u0275template"](11,y,2,0,"mat-error",0),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",8),s["\u0275\u0275elementStart"](13,"mat-form-field"),s["\u0275\u0275element"](14,"input",9,10),s["\u0275\u0275template"](16,C,2,0,"mat-error",0),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"div",11),s["\u0275\u0275elementStart"](18,"mat-form-field"),s["\u0275\u0275element"](19,"input",12,13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",8),s["\u0275\u0275elementStart"](22,"mat-form-field"),s["\u0275\u0275elementStart"](23,"mat-label"),s["\u0275\u0275text"](24,"Categoria"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"mat-select",14,15),s["\u0275\u0275template"](27,_,2,2,"mat-option",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](28,b,2,0,"mat-error",0),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"div",8),s["\u0275\u0275elementStart"](30,"mat-form-field"),s["\u0275\u0275elementStart"](31,"mat-label"),s["\u0275\u0275text"](32,"Unidade de medida"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"mat-select",17,18),s["\u0275\u0275template"](35,P,2,2,"mat-option",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](36,F,2,0,"mat-error",0),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"div",19),s["\u0275\u0275elementStart"](38,"mat-slide-toggle",20),s["\u0275\u0275text"](39,"G\xe1s"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](40,"hr"),s["\u0275\u0275elementStart"](41,"div",1),s["\u0275\u0275elementStart"](42,"div",2),s["\u0275\u0275elementStart"](43,"button",21),s["\u0275\u0275listener"]("click",function(){return t.save()}),s["\u0275\u0275text"](44,"Salvar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275reference"](10),n=s["\u0275\u0275reference"](15);s["\u0275\u0275property"]("ngIf",t.isModal),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",!t.product),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.product),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("formGroup",t.productForm),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",!e.valid),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",!n.valid),s["\u0275\u0275advance"](11),s["\u0275\u0275property"]("ngForOf",t.categories),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.productForm.get("category").valid),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngForOf",t.measurementUnits),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.productForm.get("measurementUnit").valid)}},directives:[r.O5,i._Y,i.JL,i.sg,u.KE,h.Nt,i.Fj,i.JJ,i.u,u.hX,f.gD,r.sg,g.Rr,v.lW,E.P,u.TO,S.ey],styles:[""]}),e})();function j(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"h3",14),s["\u0275\u0275text"](1,"Novo pre\xe7o"),s["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h3",14),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("Edi\xe7\xe3o ",e.price.name,"")}}function N(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),s["\u0275\u0275elementEnd"]())}function M(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),s["\u0275\u0275elementEnd"]())}let O=(()=>{class e{constructor(e,t,n,r,o){this._productService=e,this._loader=t,this._toast=n,this._dialogRef=r,this.inputData=o,this.initForm()}ngOnInit(){this.companyBranchProductPriceId=this.inputData.companyBranchProductPriceId,this.companyBranchProductPriceId&&this.getPrice().then(()=>{this.setFormValues()})}initForm(){this.priceForm=new i.cw({name:new i.NI(null,i.kI.required),salePrice:new i.NI(null,i.kI.required),isDefault:new i.NI(null),isActive:new i.NI(null)})}setFormValues(){this.priceForm.get("name").setValue(this.price.name),this.priceForm.get("salePrice").setValue(this.price.salePrice),this.priceForm.get("isDefault").setValue(this.price.isDefault),this.priceForm.get("isActive").setValue(this.price.isActive)}getPrice(e=this.companyBranchProductPriceId){return new Promise((t,n)=>{this._loader.show(),this._productService.getPriceById(this.inputData.productId,e).subscribe(e=>{this._loader.dismiss(),this.price=e,t(e)},e=>{this._loader.dismiss(),this._toast.showHttpError(e)})})}save(){if(!this.priceForm.valid)throw this._toast.open("Preencha todos os campos obrigat\xf3rios","error"),this.priceForm.markAllAsTouched(),new Error("Invalid form");const e={productId:this.inputData.productId,name:this.priceForm.get("name").value,salePrice:this.priceForm.get("salePrice").value,isDefault:this.priceForm.get("isDefault").value,isActive:this.priceForm.get("isActive").value};let t;this.price?(e.id=this.price.id,t=this._productService.priceUpdate(e)):t=this._productService.priceCreate(e),this._loader.show(),t.subscribe(e=>{this._loader.dismiss(),this._toast.open("Salvo com sucesso!","success"),this.price=e,this.initForm(),this.setFormValues(),this._dialogRef.close({hasUpdate:!0})},e=>{this._loader.dismiss(),this._toast.showHttpError(e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](c.M),s["\u0275\u0275directiveInject"](d.D),s["\u0275\u0275directiveInject"](p.k),s["\u0275\u0275directiveInject"](a.so),s["\u0275\u0275directiveInject"](a.WI))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-product-price-form"]],decls:28,vars:5,consts:[[1,"row"],[1,"col-sm-12"],["class","title",4,"ngIf"],[3,"formGroup"],[1,"col-12"],["matInput","","placeholder","Nome","autocomplete","off","formControlName","name"],["name",""],[4,"ngIf"],["matInput","","placeholder","Pre\xe7o","autocomplete","off","formControlName","salePrice"],["salePrice",""],[2,"display","flex","flex-direction","row","gap","10px"],["formControlName","isDefault"],["formControlName","isActive"],["mat-flat-button","","color","primary",2,"margin","24px 0",3,"click"],[1,"title"]],template:function(e,t){if(1&e&&(s["\u0275\u0275element"](0,"button-dialog-close"),s["\u0275\u0275elementStart"](1,"div",0),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275template"](3,j,2,0,"h3",2),s["\u0275\u0275template"](4,k,2,1,"h3",2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"form",3),s["\u0275\u0275elementStart"](6,"div",0),s["\u0275\u0275elementStart"](7,"div",4),s["\u0275\u0275elementStart"](8,"mat-form-field"),s["\u0275\u0275element"](9,"input",5,6),s["\u0275\u0275template"](11,N,2,0,"mat-error",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",4),s["\u0275\u0275elementStart"](13,"mat-form-field"),s["\u0275\u0275element"](14,"input",8,9),s["\u0275\u0275template"](16,M,2,0,"mat-error",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"div",4),s["\u0275\u0275elementStart"](18,"div",10),s["\u0275\u0275elementStart"](19,"mat-slide-toggle",11),s["\u0275\u0275text"](20,"Pre\xe7o padr\xe3o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"mat-slide-toggle",12),s["\u0275\u0275text"](22,"Ativo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](23,"hr"),s["\u0275\u0275elementStart"](24,"div",0),s["\u0275\u0275elementStart"](25,"div",1),s["\u0275\u0275elementStart"](26,"button",13),s["\u0275\u0275listener"]("click",function(){return t.save()}),s["\u0275\u0275text"](27,"Salvar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275reference"](10),n=s["\u0275\u0275reference"](15);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",!t.price),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.price),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("formGroup",t.priceForm),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",!e.valid),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",!n.valid)}},directives:[E.P,r.O5,i._Y,i.JL,i.sg,u.KE,h.Nt,i.Fj,i.JJ,i.u,g.Rr,v.lW,u.TO],styles:[""]}),e})();var A=n(76627),V=n(15169);function U(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" - ",e.inputData.product.name,"")}}function $(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td",8),s["\u0275\u0275text"](4),s["\u0275\u0275pipe"](5,"money"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"td"),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"td"),s["\u0275\u0275text"](9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"td"),s["\u0275\u0275elementStart"](11,"a",9),s["\u0275\u0275listener"]("click",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().openPriceForm(t)}),s["\u0275\u0275elementStart"](12,"mat-icon"),s["\u0275\u0275text"](13,"edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](5,4,e.salePrice)," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",e.isDefault?"\u2705":"\u274c"," "),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",e.isActive?"\u2705":"\u274c"," ")}}let G=(()=>{class e{constructor(e,t,n,r,o){this._productService=e,this._dialog=t,this._loader=n,this._toast=r,this.inputData=o}ngOnInit(){this.getPrices()}getPrices(){this._loader.show(),this._productService.getPrices(this.inputData.product.id).subscribe(e=>{this._loader.dismiss(),this.prices=e},e=>{this._loader.dismiss(),this._toast.showHttpError(e)})}openPriceForm(e){this._dialog.open(O,{width:"40%",data:{productId:this.inputData.product.id,companyBranchProductPriceId:null==e?void 0:e.id}}).afterClosed().subscribe(e=>{e&&e.hasUpdate&&this.getPrices()})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](c.M),s["\u0275\u0275directiveInject"](a.uw),s["\u0275\u0275directiveInject"](d.D),s["\u0275\u0275directiveInject"](p.k),s["\u0275\u0275directiveInject"](a.WI))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-product-prices"]],decls:25,vars:2,consts:[[1,"row"],[1,"col-sm-12"],[1,"title"],[4,"ngIf"],[1,"col-12"],[1,"prices-table"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",2,"margin-top","12px",3,"click"],[2,"font-weight","bold","color","var(--color-alizarin)"],["href","javascript:;",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275element"](0,"button-dialog-close"),s["\u0275\u0275elementStart"](1,"div",0),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"h3",2),s["\u0275\u0275text"](4," Lista de pre\xe7os "),s["\u0275\u0275template"](5,U,2,1,"span",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",0),s["\u0275\u0275elementStart"](7,"div",4),s["\u0275\u0275elementStart"](8,"table",5),s["\u0275\u0275elementStart"](9,"thead"),s["\u0275\u0275elementStart"](10,"tr"),s["\u0275\u0275elementStart"](11,"th"),s["\u0275\u0275text"](12,"Nome"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"th"),s["\u0275\u0275text"](14,"Pre\xe7o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"th"),s["\u0275\u0275text"](16,"Padr\xe3o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"th"),s["\u0275\u0275text"](18,"Ativo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](19,"th"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"tbody"),s["\u0275\u0275template"](21,$,14,6,"tr",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",4),s["\u0275\u0275elementStart"](23,"button",7),s["\u0275\u0275listener"]("click",function(){return t.openPriceForm()}),s["\u0275\u0275text"](24,"Novo pre\xe7o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",t.inputData.product),s["\u0275\u0275advance"](16),s["\u0275\u0275property"]("ngForOf",t.prices))},directives:[E.P,r.O5,r.sg,v.lW,A.Hw],pipes:[V.L],styles:[".prices-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px}.prices-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .prices-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd}"]}),e})();var R=n(26026),z=n(32789);function B(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",21),s["\u0275\u0275text"](1,"#"),s["\u0275\u0275elementEnd"]())}function H(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",22),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.id)}}function L(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",21),s["\u0275\u0275text"](1,"C\xf3d."),s["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",22),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.code," ")}}function W(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",21),s["\u0275\u0275text"](1,"Nome"),s["\u0275\u0275elementEnd"]())}function J(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",23),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function T(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",21),s["\u0275\u0275text"](1,"UM"),s["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",22),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.measurementUnit," ")}}function Z(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",21),s["\u0275\u0275text"](1,"Categoria"),s["\u0275\u0275elementEnd"]())}function X(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",22),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.category.name," ")}}function Y(e,t){1&e&&s["\u0275\u0275element"](0,"th",21)}function Q(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"td",22),s["\u0275\u0275elementStart"](1,"div",24),s["\u0275\u0275elementStart"](2,"div"),s["\u0275\u0275elementStart"](3,"button",25),s["\u0275\u0275listener"]("click",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().openPrices(t)}),s["\u0275\u0275text"](4,"Pre\xe7os"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div"),s["\u0275\u0275elementStart"](6,"a",26),s["\u0275\u0275listener"]("click",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().openForm(t.id)}),s["\u0275\u0275elementStart"](7,"mat-icon"),s["\u0275\u0275text"](8,"edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function ee(e,t){1&e&&s["\u0275\u0275element"](0,"tr",27)}function te(e,t){1&e&&s["\u0275\u0275element"](0,"tr",28)}function ne(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",29),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().loadMore()}),s["\u0275\u0275text"](1,"Mais..."),s["\u0275\u0275elementEnd"]()}}const re=[{path:"",component:(()=>{class e{constructor(e,t,n,r,o){this._productService=e,this._loader=t,this._toast=n,this._dialog=r,this._title=o,this.products=[],this.productFilter={limit:20,index:0},this.tableColumns=["id","code","name","measurementUnit","category","options"]}ngOnInit(){this._title.set("Produtos"),this.getProducts()}getProducts(e={}){return new Promise((t,n)=>{this._loader.show(),this._productService.getAll(this.productFilter).subscribe(n=>{this._loader.dismiss(),e.reset&&(this.products=[]),this.products=this.products.concat(n),t()},e=>{this._loader.dismiss(),this._toast.showHttpError(e),n()})})}loadMore(){this.productFilter.index++,this.getProducts()}search(e){this.productFilter.q=e,this.productFilter.index=0,this.getProducts({reset:!0})}openForm(e){this._dialog.open(D,{width:"60%",height:"90%",data:{productId:e}}).afterClosed().subscribe(e=>{e&&e.hasUpdate&&this.getProducts({reset:!0})})}openPrices(e){this._dialog.open(G,{width:"50%",height:"90%",data:{product:e}})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](c.M),s["\u0275\u0275directiveInject"](d.D),s["\u0275\u0275directiveInject"](p.k),s["\u0275\u0275directiveInject"](a.uw),s["\u0275\u0275directiveInject"](R.y))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-products"]],decls:33,vars:4,consts:[[2,"font-size","32px","margin","16px"],[1,"row"],[1,"col-sm-12"],[2,"width","100%"],["matInput","","autocomplete","off","placeholder","Fa\xe7a sua busca",3,"keyup.enter"],["searchInput",""],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","name"],["mat-cell","","style","font-weight: bold;",4,"matCellDef"],["matColumnDef","measurementUnit"],["matColumnDef","category"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"text-align","center","padding","10px"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["href","javascript:;","mat-fab","","color","primary",1,"btn-add",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",2,"font-weight","bold"],[1,"options-actions"],["mat-stroked-button","","color","primary",3,"click"],["href","javascript:;",3,"click"],["mat-header-row",""],["mat-row",""],["mat-flat-button","","color","primary",3,"click"]],template:function(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"h1",0),s["\u0275\u0275text"](1,"Produtos"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"mat-form-field",3),s["\u0275\u0275elementStart"](5,"input",4,5),s["\u0275\u0275listener"]("keyup.enter",function(){s["\u0275\u0275restoreView"](e);const n=s["\u0275\u0275reference"](6);return t.search(n.value)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"table",6),s["\u0275\u0275elementContainerStart"](8,7),s["\u0275\u0275template"](9,B,2,0,"th",8),s["\u0275\u0275template"](10,H,2,1,"td",9),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](11,10),s["\u0275\u0275template"](12,L,2,0,"th",8),s["\u0275\u0275template"](13,q,2,1,"td",9),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](14,11),s["\u0275\u0275template"](15,W,2,0,"th",8),s["\u0275\u0275template"](16,J,2,1,"td",12),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](17,13),s["\u0275\u0275template"](18,T,2,0,"th",8),s["\u0275\u0275template"](19,K,2,1,"td",9),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](20,14),s["\u0275\u0275template"](21,Z,2,0,"th",8),s["\u0275\u0275template"](22,X,2,1,"td",9),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](23,15),s["\u0275\u0275template"](24,Y,1,0,"th",8),s["\u0275\u0275template"](25,Q,9,0,"td",9),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](26,ee,1,0,"tr",16),s["\u0275\u0275template"](27,te,1,0,"tr",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](28,"div",18),s["\u0275\u0275template"](29,ne,2,0,"button",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](30,"button",20),s["\u0275\u0275listener"]("click",function(){return t.openForm()}),s["\u0275\u0275elementStart"](31,"mat-icon"),s["\u0275\u0275text"](32,"add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("dataSource",t.products),s["\u0275\u0275advance"](19),s["\u0275\u0275property"]("matHeaderRowDef",t.tableColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.tableColumns),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.products.length>=t.productFilter.limit))},directives:[u.KE,h.Nt,z.BZ,z.w1,z.fO,z.Dz,z.as,z.nj,r.O5,v.lW,A.Hw,z.ge,z.ev,z.XQ,z.Gk],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:64px;background:#eee;z-index:10}table[_ngcontent-%COMP%]   .options-actions[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:5px;gap:5px}.btn-add[_ngcontent-%COMP%]{position:fixed;bottom:26px;right:30px}"]}),e})()}];let oe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[o.Bz.forChild(re)],o.Bz]}),e})();var ie=n(15495),ae=n(44466),le=n(35503);let se=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[ie.h,r.ez,oe,ae.m,i.UX,le.D,i.u5]]}),e})()},35503:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(37716);let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({}),e})()},44466:function(e,t,n){"use strict";n.d(t,{m:function(){return m}});var r=n(15495),o=n(35503),i=n(38583),a=n(69129),l=n(3679),s=n(44836),c=n(37716);let m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[r.h,o.D,i.ez,a.yI,l.UX,l.u5,s.GooglePlaceModule],a.yI]}),e})()}}]);