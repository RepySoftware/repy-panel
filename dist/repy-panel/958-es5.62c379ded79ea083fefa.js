!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(self.webpackChunkrepy_panel=self.webpackChunkrepy_panel||[]).push([[958],{44836:function(e,t,n){!function(e,t,n){"use strict";var i=function(e){e&&Object.assign(this,e)},o=function(){function t(e,t){this.el=e,this.ngZone=t,this.onAddressChange=new n.EventEmitter}return t.prototype.ngAfterViewInit=function(){this.options||(this.options=new i),this.initialize()},t.prototype.isGoogleLibExists=function(){return!(!google||!google.maps||!google.maps.places)},t.prototype.initialize=function(){var e=this;if(!this.isGoogleLibExists())throw new Error("Google maps library can not be found");if(this.autocomplete=new google.maps.places.Autocomplete(this.el.nativeElement,this.options),!this.autocomplete)throw new Error("Autocomplete is not initialized");null!=!this.autocomplete.addListener&&(this.eventListener=this.autocomplete.addListener("place_changed",function(){e.handleChangeEvent()})),this.el.nativeElement.addEventListener("keydown",function(t){t.key&&"enter"==t.key.toLowerCase()&&t.target===e.el.nativeElement&&(t.preventDefault(),t.stopPropagation())}),window&&window.navigator&&window.navigator.userAgent&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&setTimeout(function(){var e=document.getElementsByClassName("pac-container");if(e){var t=Array.from(e);if(t)for(var n=0,i=t;n<i.length;n++){var o=i[n];o&&o.addEventListener("touchend",function(e){e.stopImmediatePropagation()})}}},500)},t.prototype.reset=function(){this.autocomplete.setComponentRestrictions(this.options.componentRestrictions),this.autocomplete.setTypes(this.options.types)},t.prototype.handleChangeEvent=function(){var e=this;this.ngZone.run(function(){e.place=e.autocomplete.getPlace(),e.place&&e.onAddressChange.emit(e.place)})},t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.NgZone}]},t.propDecorators={options:[{type:n.Input,args:["options"]}],onAddressChange:[{type:n.Output}]},t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.NgZone))},t.\u0275dir=e.\u0275\u0275defineDirective({type:t,selectors:[["","ngx-google-places-autocomplete",""]],inputs:{options:"options"},outputs:{onAddressChange:"onAddressChange"},exportAs:["ngx-places"]}),t}(),r=function(){function t(){}return t.ctorParameters=function(){return[]},t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({}),t}();t.GooglePlaceModule=r,t.GooglePlaceDirective=o,Object.defineProperty(t,"__esModule",{value:!0})}(n(37716),t,n(37716))},11958:function(t,i,o){"use strict";o.r(i),o.d(i,{VehiclesModule:function(){return Q}});var r=o(38583),a=o(15495),l=o(44466),c=o(3679),s=o(54655),m=o(22238),d=o(37716),u=o(38555),p=o(84465),f=o(71942),h=o(37499),v=o(98295),g=o(49983),E=o(67441),y=o(51095),w=o(71419),S=o(72458);function I(e,t){1&e&&d["\u0275\u0275element"](0,"button-dialog-close")}function C(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"h3",16),d["\u0275\u0275text"](1,"Novo ve\xedculo"),d["\u0275\u0275elementEnd"]())}function x(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"h3",16),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"]("Edi\xe7\xe3o ",n.vehicle.nickname||n.vehicle.description,"")}}function b(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"mat-error"),d["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),d["\u0275\u0275elementEnd"]())}function k(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"mat-error"),d["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),d["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"mat-option",17),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275property"]("value",n.id),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"](" ",n.name," - ",n.companyBranch.name," ")}}function D(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"mat-error"),d["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),d["\u0275\u0275elementEnd"]())}var P=function(){var t=function(){function t(n,i,o,r,a,l){e(this,t),this._loader=n,this._toast=i,this._vehicleService=o,this._depositService=r,this._dialogRef=a,this.inputData=l,this.deposits=[],this.initForm()}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.getDeposits(),this.inputData.vehicleId&&this.getVehicle().then(function(){return e.setFormValues()})}},{key:"initForm",value:function(){this.vehicleForm=new c.cw({description:new c.NI(null,c.kI.required),nickname:new c.NI(null),licensePlate:new c.NI(null,c.kI.required),deposit:new c.NI(null)})}},{key:"setFormValues",value:function(){var e;this.vehicleForm.get("description").setValue(this.vehicle.description),this.vehicleForm.get("nickname").setValue(this.vehicle.nickname),this.vehicleForm.get("licensePlate").setValue(this.vehicle.licensePlate),this.vehicleForm.get("deposit").setValue(null===(e=this.vehicle.deposit)||void 0===e?void 0:e.id)}},{key:"getVehicle",value:function(){var e=this;return new Promise(function(t,n){e._loader.show(),e._vehicleService.getById(e.inputData.vehicleId).subscribe(function(n){e._loader.dismiss(),e.vehicle=n,t(n)},function(t){e._loader.dismiss(),e._toast.showHttpError(t),n(t)})})}},{key:"getDeposits",value:function(){var e=this;this._depositService.getAll().subscribe(function(t){e.deposits=t},function(t){e._toast.showHttpError(t)})}},{key:"save",value:function(){var e=this;if(!this.vehicleForm.valid)throw this.vehicleForm.markAllAsTouched(),this._toast.open("Preencha todos os campos obrigat\xf3rios"),new Error("Invalid form");var t,n={description:this.vehicleForm.get("description").value,nickname:this.vehicleForm.get("nickname").value,licensePlate:this.vehicleForm.get("licensePlate").value,depositId:this.vehicleForm.get("deposit").value};this.vehicle?(n.id=this.vehicle.id,t=this._vehicleService.update(n)):t=this._vehicleService.create(n),this._loader.show(),t.subscribe(function(t){e._loader.dismiss(),e._toast.open("Salvo com sucesso!","success"),e.vehicle=t,e.initForm(),e.setFormValues(),e._dialogRef.close({hasUpdate:!0})},function(t){e._loader.dismiss(),e._toast.showHttpError(t)})}},{key:"isModal",get:function(){return!!this.inputData}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](u.D),d["\u0275\u0275directiveInject"](p.k),d["\u0275\u0275directiveInject"](f.f),d["\u0275\u0275directiveInject"](h.s),d["\u0275\u0275directiveInject"](m.so),d["\u0275\u0275directiveInject"](m.WI))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["app-vehicle-form"]],decls:34,vars:8,consts:[[4,"ngIf"],[1,"row"],[1,"col-sm-12"],["class","title",4,"ngIf"],[3,"formGroup"],[1,"col-6"],["matInput","","placeholder","Descri\xe7\xe3o","autocomplete","off","formControlName","description"],["description",""],["matInput","","placeholder","Nome (opcional)","autocomplete","off","formControlName","nickname"],["nickname",""],["matInput","","placeholder","Placa","autocomplete","off","formControlName","licensePlate"],["licensePlate",""],["formControlName","deposit"],["type",""],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",2,"margin","24px 0",3,"click"],[1,"title"],[3,"value"]],template:function(e,t){if(1&e&&(d["\u0275\u0275template"](0,I,1,0,"button-dialog-close",0),d["\u0275\u0275elementStart"](1,"div",1),d["\u0275\u0275elementStart"](2,"div",2),d["\u0275\u0275template"](3,C,2,0,"h3",3),d["\u0275\u0275template"](4,x,2,1,"h3",3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"form",4),d["\u0275\u0275elementStart"](6,"div",1),d["\u0275\u0275elementStart"](7,"div",5),d["\u0275\u0275elementStart"](8,"mat-form-field"),d["\u0275\u0275element"](9,"input",6,7),d["\u0275\u0275template"](11,b,2,0,"mat-error",0),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"div",5),d["\u0275\u0275elementStart"](13,"mat-form-field"),d["\u0275\u0275element"](14,"input",8,9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](16,"div",5),d["\u0275\u0275elementStart"](17,"mat-form-field"),d["\u0275\u0275element"](18,"input",10,11),d["\u0275\u0275template"](20,k,2,0,"mat-error",0),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"div",5),d["\u0275\u0275elementStart"](22,"mat-form-field"),d["\u0275\u0275elementStart"](23,"mat-label"),d["\u0275\u0275text"](24,"Dep\xf3sito (opcional)"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](25,"mat-select",12,13),d["\u0275\u0275template"](27,_,2,3,"mat-option",14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](28,D,2,0,"mat-error",0),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](29,"hr"),d["\u0275\u0275elementStart"](30,"div",1),d["\u0275\u0275elementStart"](31,"div",2),d["\u0275\u0275elementStart"](32,"button",15),d["\u0275\u0275listener"]("click",function(){return t.save()}),d["\u0275\u0275text"](33,"Salvar"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275reference"](10),i=d["\u0275\u0275reference"](19);d["\u0275\u0275property"]("ngIf",t.isModal),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",!t.vehicle),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.vehicle),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("formGroup",t.vehicleForm),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("ngIf",!n.valid),d["\u0275\u0275advance"](9),d["\u0275\u0275property"]("ngIf",!i.valid),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("ngForOf",t.deposits),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!t.vehicleForm.get("deposit").valid)}},directives:[r.O5,c._Y,c.JL,c.sg,v.KE,g.Nt,c.Fj,c.JJ,c.u,v.hX,E.gD,r.sg,y.lW,w.P,v.TO,S.ey],styles:[""]}),t}(),j=o(26026),F=o(32789),N=o(76627);function V(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"th",13),d["\u0275\u0275text"](1,"#"),d["\u0275\u0275elementEnd"]())}function A(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"td",14),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](n.id)}}function O(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"th",13),d["\u0275\u0275text"](1,"Nome"),d["\u0275\u0275elementEnd"]())}function M(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"td",14),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",n.nickname," ")}}function R(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"th",13),d["\u0275\u0275text"](1,"Descri\xe7\xe3o"),d["\u0275\u0275elementEnd"]())}function z(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"td",14),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",n.description," ")}}function G(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"th",13),d["\u0275\u0275text"](1,"Placa"),d["\u0275\u0275elementEnd"]())}function L(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"td",14),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",n.licensePlate," ")}}function B(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"th",13),d["\u0275\u0275text"](1,"Dep\xf3sito/Unidade"),d["\u0275\u0275elementEnd"]())}function H(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]().$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"](" ",null==n.deposit?null:n.deposit.name," - ",null==n.deposit||null==n.deposit.companyBranch?null:n.deposit.companyBranch.name," ")}}function $(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"td",14),d["\u0275\u0275template"](1,H,2,2,"div",15),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.deposit)}}function T(e,t){1&e&&d["\u0275\u0275element"](0,"th",13)}function U(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"td",14),d["\u0275\u0275elementStart"](1,"a",16),d["\u0275\u0275listener"]("click",function(){var e=d["\u0275\u0275restoreView"](n).$implicit;return d["\u0275\u0275nextContext"]().openForm(e.id)}),d["\u0275\u0275elementStart"](2,"mat-icon"),d["\u0275\u0275text"](3,"edit"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}function Z(e,t){1&e&&d["\u0275\u0275element"](0,"tr",17)}function X(e,t){1&e&&d["\u0275\u0275element"](0,"tr",18)}var J,W,q=[{path:"",component:(J=function(){function t(n,i,o,r,a){e(this,t),this._loader=n,this._toast=i,this._vehicleService=o,this._dialog=r,this._title=a,this.vehicles=[],this.tableColumns=["id","nickname","description","licensePlate","deposit","options"]}return n(t,[{key:"ngOnInit",value:function(){this._title.set("Ve\xedculos"),this.getVehicles()}},{key:"getVehicles",value:function(){var e=this;return new Promise(function(t,n){e._loader.show(),e._vehicleService.getAll().subscribe(function(n){e._loader.dismiss(),e.vehicles=n,t()},function(t){e._loader.dismiss(),e._toast.showHttpError(t),n()})})}},{key:"openForm",value:function(e){var t=this;this._dialog.open(P,{width:"90%",height:"90%",data:{vehicleId:e}}).afterClosed().subscribe(function(e){e&&e.hasUpdate&&t.getVehicles()})}}]),t}(),J.\u0275fac=function(e){return new(e||J)(d["\u0275\u0275directiveInject"](u.D),d["\u0275\u0275directiveInject"](p.k),d["\u0275\u0275directiveInject"](f.f),d["\u0275\u0275directiveInject"](m.uw),d["\u0275\u0275directiveInject"](j.y))},J.\u0275cmp=d["\u0275\u0275defineComponent"]({type:J,selectors:[["app-vehicles"]],decls:26,vars:3,consts:[[2,"font-size","32px","margin","16px"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nickname"],["matColumnDef","description"],["matColumnDef","licensePlate"],["matColumnDef","deposit"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["href","javascript:;","mat-fab","","color","primary",1,"btn-add",3,"click"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["href","javascript:;",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"h1",0),d["\u0275\u0275text"](1,"Ve\xedculos"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](2,"table",1),d["\u0275\u0275elementContainerStart"](3,2),d["\u0275\u0275template"](4,V,2,0,"th",3),d["\u0275\u0275template"](5,A,2,1,"td",4),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementContainerStart"](6,5),d["\u0275\u0275template"](7,O,2,0,"th",3),d["\u0275\u0275template"](8,M,2,1,"td",4),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementContainerStart"](9,6),d["\u0275\u0275template"](10,R,2,0,"th",3),d["\u0275\u0275template"](11,z,2,1,"td",4),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementContainerStart"](12,7),d["\u0275\u0275template"](13,G,2,0,"th",3),d["\u0275\u0275template"](14,L,2,1,"td",4),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementContainerStart"](15,8),d["\u0275\u0275template"](16,B,2,0,"th",3),d["\u0275\u0275template"](17,$,2,1,"td",4),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementContainerStart"](18,9),d["\u0275\u0275template"](19,T,1,0,"th",3),d["\u0275\u0275template"](20,U,4,0,"td",4),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275template"](21,Z,1,0,"tr",10),d["\u0275\u0275template"](22,X,1,0,"tr",11),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](23,"button",12),d["\u0275\u0275listener"]("click",function(){return t.openForm()}),d["\u0275\u0275elementStart"](24,"mat-icon"),d["\u0275\u0275text"](25,"add"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("dataSource",t.vehicles),d["\u0275\u0275advance"](19),d["\u0275\u0275property"]("matHeaderRowDef",t.tableColumns),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("matRowDefColumns",t.tableColumns))},directives:[F.BZ,F.w1,F.fO,F.Dz,F.as,F.nj,y.lW,N.Hw,F.ge,F.ev,r.O5,F.XQ,F.Gk],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:64px;background:#eee;z-index:10}.btn-add[_ngcontent-%COMP%]{position:fixed;bottom:26px;right:30px}"]}),J)}],K=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=d["\u0275\u0275defineInjector"]({imports:[[s.Bz.forChild(q)],s.Bz]}),t}(),Q=((W=function t(){e(this,t)}).\u0275fac=function(e){return new(e||W)},W.\u0275mod=d["\u0275\u0275defineNgModule"]({type:W}),W.\u0275inj=d["\u0275\u0275defineInjector"]({imports:[[r.ez,a.h,K,l.m,c.UX]]}),W)},35503:function(t,n,i){"use strict";i.d(n,{D:function(){return r}});var o=i(37716),r=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({}),t}()},44466:function(t,n,i){"use strict";i.d(n,{m:function(){return d}});var o=i(15495),r=i(35503),a=i(38583),l=i(69129),c=i(3679),s=i(44836),m=i(37716),d=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[o.h,r.D,a.ez,l.yI,c.UX,c.u5,s.GooglePlaceModule],l.yI]}),t}()}}])}();