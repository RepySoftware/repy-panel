(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{PdK0:function(e,t,n){"use strict";n.r(t),n.d(t,"PersonsModule",function(){return Fe});var r=n("ofXK"),o=n("PCNd"),i=n("ssao"),s=n("tyNb"),a=n("3Pt+"),l=n("0IaG"),d=function(e){return e.CONTRIBUTOR="CONTRIBUTOR",e.EXEMPT="EXEMPT",e.NON_CONTRIBUTOR="NON_CONTRIBUTOR",e}({});const m={[d.CONTRIBUTOR]:"Contribuinte ICMS",[d.EXEMPT]:"Contribuinte isento de Inscri\xe7\xe3o no Cadastro de Contribuintes",[d.NON_CONTRIBUTOR]:"N\xe3o contribuinte"};var c=function(e){return e.UNDEFINED="UNDEFINED",e.NATIONAL_SIMPLE="NATIONAL_SIMPLE",e.NATIONAL_SIMPLE_EXCESS_GROSS_REVENUE_SUB_LIMIT="NATIONAL_SIMPLE_EXCESS_GROSS_REVENUE_SUB_LIMIT",e.NORMAL="NORMAL",e}({});const p={[c.UNDEFINED]:"N\xe3o definido",[c.NATIONAL_SIMPLE]:"Simples nacional",[c.NATIONAL_SIMPLE_EXCESS_GROSS_REVENUE_SUB_LIMIT]:"Simples nacional - Excesso de sublimite de receita bruta",[c.NORMAL]:"Regime normal"};var u=function(e){return e.NORMAL="NORMAL",e.LEGAL="LEGAL",e}({});const f={[u.LEGAL]:"Jur\xeddica",[u.NORMAL]:"F\xedsica"};class h{static toCpfCnpj(e){return 11==e.length?e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/g,"$1.$2.$3-$4"):14==e.length?e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/g,"$1.$2.$3/$4-$5"):e}static getOnlyNumbers(e){return e.replace(/[^0-9\\.]+/g,"")}}var g=n("fXoL"),v=n("TmGi"),S=n("5dVO"),E=n("2g2N"),C=n("DgsJ"),_=n("kmnG"),b=n("d3UM"),y=n("qFsG"),I=n("tmjD"),x=n("bSwM"),N=n("1jcm"),F=n("7itd");const w=["addressSearch"],R=function(){return{country:"BR"}},O=function(e){return{componentRestrictions:e}};let P=(()=>{class e{constructor(e,t,n){this._addressConfigService=e,this._toast=t,this._cdRef=n,this.insertedAddress=!1,this.addressTouched=!1,this.clearAddress(),this.initForm(),this._addressConfigService.setFormValuesEmitter.subscribe(()=>this.setFormValues())}ngAfterViewInit(){this.setFormValues()}initForm(){this.addressForm=new a.f({addressSearch:new a.d(null),referencePoint:new a.d(null),complement:new a.d(null)})}clearAddress(){this._addressConfigService.address={description:null,zipCode:null,city:null,region:null,country:null,referencePoint:null,complement:null,latitude:null,longitude:null}}setFormValues(){this._addressConfigService.address?(this._addressConfigService.address={description:this._addressConfigService.address.description,zipCode:this._addressConfigService.address.zipCode,city:this._addressConfigService.address.city,region:this._addressConfigService.address.region,country:this._addressConfigService.address.country,referencePoint:this._addressConfigService.address.referencePoint,complement:this._addressConfigService.address.complement,latitude:this._addressConfigService.address.latitude,longitude:this._addressConfigService.address.longitude},this.addressSearchInput.nativeElement.value=this._addressConfigService.address.description,this.addressForm.get("referencePoint").setValue(this._addressConfigService.address.referencePoint),this.addressForm.get("complement").setValue(this._addressConfigService.address.complement),this.insertedAddress=!0,this._cdRef.detectChanges()):this.clearAddress()}addressChanged(e){this._addressConfigService.address.description=e.formatted_address,this._addressConfigService.address.city=e.address_components.find(e=>e.types.includes("administrative_area_level_2")).long_name,this._addressConfigService.address.region=e.address_components.find(e=>e.types.includes("administrative_area_level_1")).long_name,this._addressConfigService.address.country=e.address_components.find(e=>e.types.includes("country")).long_name;const t=e.address_components.find(e=>e.types.includes("postal_code"));this._addressConfigService.address.zipCode=t?t.long_name:null,this._addressConfigService.address.latitude=e.geometry.location.lat(),this._addressConfigService.address.longitude=e.geometry.location.lng(),this.insertedAddress=!0}addressFocus(){this.addressSearchInput.nativeElement.value=null,this.insertedAddress=!1,this.clearAddress()}addressBlur(){this.addressTouched=!0}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](C.a),g["\u0275\u0275directiveInject"](E.a),g["\u0275\u0275directiveInject"](g.ChangeDetectorRef))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["app-address-config"]],viewQuery:function(e,t){if(1&e&&g["\u0275\u0275viewQuery"](w,!0),2&e){let e;g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.addressSearchInput=e.first)}},decls:15,vars:5,consts:[["autocomplete","off",3,"formGroup"],[1,"row",2,"margin-bottom","100px"],[1,"col-12"],["matInput","","formControlName","addressSearch","placeholder","Digite o endere\xe7o","autocomplete","off","ngx-google-places-autocomplete","",3,"options","onAddressChange","focus","blur"],["addressSearch","","placesRef","ngx-places"],[1,"col-md-6"],["matInput","","placeholder","Complemento (opcional)","autocomplete","off","formControlName","complement"],["name",""],["matInput","","placeholder","Ponto de refer\xeancia (opcional)","autocomplete","off","formControlName","referencePoint"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"form",0),g["\u0275\u0275elementStart"](1,"div",1),g["\u0275\u0275elementStart"](2,"div",2),g["\u0275\u0275elementStart"](3,"mat-form-field"),g["\u0275\u0275elementStart"](4,"input",3,4),g["\u0275\u0275listener"]("onAddressChange",function(e){return t.addressChanged(e)})("focus",function(){return t.addressFocus()})("blur",function(){return t.addressBlur()}),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"div",5),g["\u0275\u0275elementStart"](8,"mat-form-field"),g["\u0275\u0275element"](9,"input",6,7),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"div",5),g["\u0275\u0275elementStart"](12,"mat-form-field"),g["\u0275\u0275element"](13,"input",8,7),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275property"]("formGroup",t.addressForm),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("options",g["\u0275\u0275pureFunction1"](3,O,g["\u0275\u0275pureFunction0"](2,R))))},directives:[a.q,a.m,a.g,_.c,y.b,a.c,a.l,a.e,F.GooglePlaceDirective],styles:[".address-input[_ngcontent-%COMP%]{width:100%;padding:13px 0 8px;border:none;outline:none;margin-left:15px;background:transparent}.input-error[_ngcontent-%COMP%]{display:block}"]}),e})();var T=n("MutI"),A=n("f0Cb"),M=n("bTqV"),V=n("NFeN");let k=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["button-dialog-close"]],decls:3,vars:0,consts:[["mat-icon-button","","mat-dialog-close","",2,"float","right"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"button",0),g["\u0275\u0275elementStart"](1,"mat-icon"),g["\u0275\u0275text"](2,"close"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]())},directives:[M.a,l.c,V.a],styles:[""]}),e})();var j=n("FKr1");let L=(()=>{class e{transform(e){return h.toCpfCnpj(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=g["\u0275\u0275definePipe"]({name:"cpfCnpj",type:e,pure:!0}),e})(),D=(()=>{class e{transform(e){return function(e){return f[e]}(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=g["\u0275\u0275definePipe"]({name:"personType",type:e,pure:!0}),e})(),$=(()=>{class e{transform(e){return function(e){return p[e]}(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=g["\u0275\u0275definePipe"]({name:"personTaxRegime",type:e,pure:!0}),e})(),B=(()=>{class e{transform(e){return function(e){return m[e]}(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=g["\u0275\u0275definePipe"]({name:"personIcmsContributorType",type:e,pure:!0}),e})();function U(e,t){1&e&&g["\u0275\u0275element"](0,"button-dialog-close")}function G(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"h3",34),g["\u0275\u0275text"](1,"Nova pessoa"),g["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"h3",34),g["\u0275\u0275text"](1),g["\u0275\u0275pipe"](2,"cpfCnpj"),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate2"]("Edi\xe7\xe3o ",e.person.name," - ",g["\u0275\u0275pipeBind1"](2,2,e.person.documentNumber),"")}}function X(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"mat-option",35),g["\u0275\u0275text"](1),g["\u0275\u0275pipe"](2,"personType"),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;g["\u0275\u0275property"]("value",e),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind1"](2,2,e)," ")}}function z(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"mat-error"),g["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),g["\u0275\u0275elementEnd"]())}function J(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"mat-error"),g["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),g["\u0275\u0275elementEnd"]())}function H(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"mat-error"),g["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),g["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"mat-option",35),g["\u0275\u0275text"](1),g["\u0275\u0275pipe"](2,"personTaxRegime"),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;g["\u0275\u0275property"]("value",e),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind1"](2,2,e)," ")}}function Q(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"mat-error"),g["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),g["\u0275\u0275elementEnd"]())}function W(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"mat-option",35),g["\u0275\u0275text"](1),g["\u0275\u0275pipe"](2,"personIcmsContributorType"),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;g["\u0275\u0275property"]("value",e),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind1"](2,2,e)," ")}}function Y(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"mat-error"),g["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),g["\u0275\u0275elementEnd"]())}function Z(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"mat-error"),g["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),g["\u0275\u0275elementEnd"]())}function ee(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"mat-error"),g["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),g["\u0275\u0275elementEnd"]())}function te(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"mat-list-item",36),g["\u0275\u0275elementStart"](1,"span"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"mat-icon",37),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const n=t.index;return g["\u0275\u0275nextContext"]().removePhone(n)}),g["\u0275\u0275text"](4,"close"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",e.phone," ")}}let ne=(()=>{class e{constructor(e,t,n,r,o,i){this._personService=e,this._activatedRoute=t,this._loader=n,this._toast=r,this._addressConfigService=o,this.inputData=i,this.phones=[],this.personTypes=Object.values(u),this.personTaxRegimes=Object.values(c),this.personIcmsContributorTypes=Object.values(d),this.documentNumberMasks={[u.NORMAL]:"000.000.000-00",[u.LEGAL]:"00.000.000/0000-00"},this.initForm()}ngOnInit(){this.personId=this._activatedRoute.snapshot.params.personId||this.inputData.personId,this.isModal=!!this.inputData.personId,this.personId&&this.getPerson().then(()=>this.setFormValues())}initForm(){this.personForm=new a.f({type:new a.d(u.NORMAL,a.p.required),documentNumber:new a.d(null),name:new a.d(null,a.p.required),tradeName:new a.d(null),email:new a.d(null,a.p.email),isSupplier:new a.d(null),isCustomer:new a.d(!0),taxRegime:new a.d(c.UNDEFINED,a.p.required),icmsContributorType:new a.d(null),stateRegistration:new a.d(null),municipalRegistration:new a.d(null),isActive:new a.d(!0)})}setFormValues(){this.personForm.get("type").setValue(this.person.type),this.personForm.get("documentNumber").setValue(this.person.documentNumber),this.personForm.get("name").setValue(this.person.name),this.personForm.get("tradeName").setValue(this.person.tradeName),this.personForm.get("email").setValue(this.person.email),this.personForm.get("isSupplier").setValue(this.person.isSupplier),this.personForm.get("isCustomer").setValue(this.person.isCustomer),this.personForm.get("taxRegime").setValue(this.person.taxRegime),this.personForm.get("icmsContributorType").setValue(this.person.icmsContributorType),this.personForm.get("stateRegistration").setValue(this.person.stateRegistration),this.personForm.get("municipalRegistration").setValue(this.person.municipalRegistration),this.personForm.get("isActive").setValue(this.person.isActive),this._addressConfigService.address=this.person.address,this._addressConfigService.setFormValues(),this.phones=this.person.phones}getPerson(e=this.personId){return new Promise((t,n)=>{this._loader.show(),this._personService.getById(e).subscribe(e=>{this._loader.dismiss(),this.person=e,t()},e=>{this._loader.dismiss(),this._toast.showError(e)})})}addPhone(e){const t=e.value?h.getOnlyNumbers(e.value):null;if(!t||t.length<8)throw this._toast.open("Telefone inv\xe1lido"),new Error("Invalid phone");this.phones.push({phone:t}),e.value=null,e.focus()}removePhone(e){this.phones.splice(e,1)}save(){if(!this.personForm.valid)throw this._toast.open("Preencha todos os campos obrigat\xf3rios"),new Error("Invalid form");const e={type:this.personForm.get("type").value,documentNumber:this.personForm.get("documentNumber").value,name:this.personForm.get("name").value,tradeName:this.personForm.get("tradeName").value,email:this.personForm.get("email").value,address:this._addressConfigService.address&&this._addressConfigService.address.description?{description:this._addressConfigService.address.description,zipCode:this._addressConfigService.address.zipCode,city:this._addressConfigService.address.city,region:this._addressConfigService.address.region,country:this._addressConfigService.address.country,complement:this._addressConfigService.address.complement,referencePoint:this._addressConfigService.address.referencePoint,latitude:this._addressConfigService.address.latitude,longitude:this._addressConfigService.address.longitude}:null,isSupplier:this.personForm.get("isSupplier").value,isCustomer:this.personForm.get("isCustomer").value,taxRegime:this.personForm.get("taxRegime").value,icmsContributorType:this.personForm.get("icmsContributorType").value,stateRegistration:this.personForm.get("stateRegistration").value,municipalRegistration:this.personForm.get("municipalRegistration").value,isActive:this.personForm.get("isActive").value,personPhones:this.phones};let t;this.person?(e.id=this.person.id,t=this._personService.update(e)):t=this._personService.create(e),this._loader.show(),t.subscribe(e=>{this._loader.dismiss(),this._toast.open("Salvo com sucesso!"),this.person=e,this.initForm(),this.setFormValues()},e=>{this._loader.dismiss(),this._toast.showError(e)})}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](v.a),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](S.a),g["\u0275\u0275directiveInject"](E.a),g["\u0275\u0275directiveInject"](C.a),g["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["app-person-form"]],decls:91,vars:17,consts:[[4,"ngIf"],[1,"row"],[1,"col-sm-12"],["class","title",4,"ngIf"],[3,"formGroup"],[1,"col-12"],[1,"col-md-3"],["formControlName","type"],["type",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","CPF/CNPJ","autocomplete","off","formControlName","documentNumber",3,"mask"],["documentNumber",""],[1,"col-md-6"],["matInput","","placeholder","Nome","autocomplete","off","formControlName","name"],["name",""],["matInput","","placeholder","Nome Fantasia","autocomplete","off","formControlName","tradeName"],["tradeName",""],[1,"col-md-6",2,"padding-top","30px"],["formControlName","isSupplier",1,"role-checkbox"],["formControlName","isCustomer",1,"role-checkbox"],["formControlName","isActive"],["formControlName","taxRegime"],["taxRegime",""],["formControlName","icmsContributorType"],["icmsContributorType",""],["matInput","","placeholder","Inscri\xe7\xe3o estadual","autocomplete","off","formControlName","stateRegistration"],["stateRegistration",""],["matInput","","placeholder","Inscri\xe7\xe3o municipal","autocomplete","off","formControlName","municipalRegistration"],["municipalRegistration",""],["class","phone-item",4,"ngFor","ngForOf"],["matInput","","placeholder","Novo telefone","mask","(00) 000000000","autocomplete","off"],["phone",""],["type","button","mat-stroked-button","",3,"disabled","click"],["mat-flat-button","","color","primary",2,"margin","24px 0",3,"click"],[1,"title"],[3,"value"],[1,"phone-item"],[1,"close",3,"click"]],template:function(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275template"](0,U,1,0,"button-dialog-close",0),g["\u0275\u0275elementStart"](1,"div",1),g["\u0275\u0275elementStart"](2,"div",2),g["\u0275\u0275template"](3,G,2,0,"h3",3),g["\u0275\u0275template"](4,q,3,4,"h3",3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"form",4),g["\u0275\u0275elementStart"](6,"div",1),g["\u0275\u0275elementStart"](7,"div",5),g["\u0275\u0275elementStart"](8,"h5"),g["\u0275\u0275text"](9,"Geral"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"div",1),g["\u0275\u0275elementStart"](11,"div",6),g["\u0275\u0275elementStart"](12,"mat-form-field"),g["\u0275\u0275elementStart"](13,"mat-label"),g["\u0275\u0275text"](14,"Tipo"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](15,"mat-select",7,8),g["\u0275\u0275template"](17,X,3,4,"mat-option",9),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](18,z,2,0,"mat-error",0),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](19,"div",6),g["\u0275\u0275elementStart"](20,"mat-form-field"),g["\u0275\u0275element"](21,"input",10,11),g["\u0275\u0275template"](23,J,2,0,"mat-error",0),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"div",12),g["\u0275\u0275elementStart"](25,"mat-form-field"),g["\u0275\u0275element"](26,"input",13,14),g["\u0275\u0275template"](28,H,2,0,"mat-error",0),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"div",12),g["\u0275\u0275elementStart"](30,"mat-form-field"),g["\u0275\u0275element"](31,"input",15,16),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](33,"div",17),g["\u0275\u0275elementStart"](34,"mat-checkbox",18),g["\u0275\u0275text"](35,"Fornecedor"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](36,"mat-checkbox",19),g["\u0275\u0275text"](37,"Cliente"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](38,"mat-slide-toggle",20),g["\u0275\u0275text"](39,"Ativo"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](40,"div",12),g["\u0275\u0275elementStart"](41,"mat-form-field"),g["\u0275\u0275elementStart"](42,"mat-label"),g["\u0275\u0275text"](43,"Regime tribut\xe1rio"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](44,"mat-select",21,22),g["\u0275\u0275template"](46,K,3,4,"mat-option",9),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](47,Q,2,0,"mat-error",0),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](48,"div",12),g["\u0275\u0275elementStart"](49,"mat-form-field"),g["\u0275\u0275elementStart"](50,"mat-label"),g["\u0275\u0275text"](51,"Contribuinte"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](52,"mat-select",23,24),g["\u0275\u0275template"](54,W,3,4,"mat-option",9),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](55,Y,2,0,"mat-error",0),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](56,"div",12),g["\u0275\u0275elementStart"](57,"mat-form-field"),g["\u0275\u0275element"](58,"input",25,26),g["\u0275\u0275template"](60,Z,2,0,"mat-error",0),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](61,"div",12),g["\u0275\u0275elementStart"](62,"mat-form-field"),g["\u0275\u0275element"](63,"input",27,28),g["\u0275\u0275template"](65,ee,2,0,"mat-error",0),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](66,"hr"),g["\u0275\u0275elementStart"](67,"div",1),g["\u0275\u0275elementStart"](68,"div",5),g["\u0275\u0275elementStart"](69,"h5"),g["\u0275\u0275text"](70,"Endere\xe7o"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](71,"app-address-config"),g["\u0275\u0275element"](72,"hr"),g["\u0275\u0275elementStart"](73,"div",1),g["\u0275\u0275elementStart"](74,"div",5),g["\u0275\u0275elementStart"](75,"h5"),g["\u0275\u0275text"](76,"Telefones"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](77,"div",12),g["\u0275\u0275elementStart"](78,"mat-list"),g["\u0275\u0275template"](79,te,5,1,"mat-list-item",29),g["\u0275\u0275element"](80,"mat-divider"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](81,"mat-form-field"),g["\u0275\u0275element"](82,"input",30,31),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](84,"button",32),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const n=g["\u0275\u0275reference"](83);return t.addPhone(n)}),g["\u0275\u0275text"](85,"Adicionar"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](86,"hr"),g["\u0275\u0275elementStart"](87,"div",1),g["\u0275\u0275elementStart"](88,"div",2),g["\u0275\u0275elementStart"](89,"button",33),g["\u0275\u0275listener"]("click",function(){return t.save()}),g["\u0275\u0275text"](90,"Salvar"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275reference"](16),n=g["\u0275\u0275reference"](22),r=g["\u0275\u0275reference"](27),o=g["\u0275\u0275reference"](59),i=g["\u0275\u0275reference"](64),s=g["\u0275\u0275reference"](83);g["\u0275\u0275property"]("ngIf",t.isModal),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngIf",!t.person),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.person),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("formGroup",t.personForm),g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngForOf",t.personTypes),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!t.personForm.get("type").valid),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("mask",t.documentNumberMasks[e.value]),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",!n.valid),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngIf",!r.valid),g["\u0275\u0275advance"](18),g["\u0275\u0275property"]("ngForOf",t.personTaxRegimes),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!t.personForm.get("taxRegime").valid),g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngForOf",t.personIcmsContributorTypes),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!t.personForm.get("icmsContributorType").valid),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngIf",!o.valid),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("ngIf",!i.valid),g["\u0275\u0275advance"](14),g["\u0275\u0275property"]("ngForOf",t.phones),g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("disabled",!s.value)}},directives:[r.k,a.q,a.m,a.g,_.c,_.f,b.a,a.l,a.e,r.j,y.b,a.c,I.a,x.a,N.a,P,T.a,A.a,M.a,k,j.k,_.b,T.d,V.a],pipes:[L,D,$,B],styles:["form[_ngcontent-%COMP%]{margin-top:12px}.role-checkbox[_ngcontent-%COMP%]{margin-right:16px}.phone-item[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;right:0;cursor:pointer}"]}),e})();var re=n("+0xr"),oe=n("A5z7");function ie(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"th",19),g["\u0275\u0275text"](1,"#"),g["\u0275\u0275elementEnd"]())}function se(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"td",20),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate"](e.id)}}function ae(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"th",19),g["\u0275\u0275text"](1,"Nome"),g["\u0275\u0275elementEnd"]())}function le(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"td",20),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function de(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"th",19),g["\u0275\u0275text"](1,"Tipo"),g["\u0275\u0275elementEnd"]())}function me(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"mat-chip"),g["\u0275\u0275text"](1,"Cliente"),g["\u0275\u0275elementEnd"]())}function ce(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"mat-chip"),g["\u0275\u0275text"](1,"Fornecedor"),g["\u0275\u0275elementEnd"]())}function pe(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"td",20),g["\u0275\u0275elementStart"](1,"mat-chip-list"),g["\u0275\u0275template"](2,me,2,0,"mat-chip",21),g["\u0275\u0275template"](3,ce,2,0,"mat-chip",21),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",e.isCustomer),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.isSupplier)}}function ue(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"th",19),g["\u0275\u0275text"](1,"Documento"),g["\u0275\u0275elementEnd"]())}function fe(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"td",20),g["\u0275\u0275text"](1),g["\u0275\u0275pipe"](2,"cpfCnpj"),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate"](e.documentNumber?g["\u0275\u0275pipeBind1"](2,1,e.documentNumber):null)}}function he(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"th",19),g["\u0275\u0275text"](1,"Endere\xe7o"),g["\u0275\u0275elementEnd"]())}function ge(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"td",20),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate"](e.address.description)}}function ve(e,t){1&e&&g["\u0275\u0275element"](0,"th",19)}function Se(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"td",20),g["\u0275\u0275elementStart"](1,"a",22),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const n=t.$implicit;return g["\u0275\u0275nextContext"]().openForm(n.id)}),g["\u0275\u0275elementStart"](2,"mat-icon"),g["\u0275\u0275text"](3,"edit"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}}function Ee(e,t){1&e&&g["\u0275\u0275element"](0,"tr",23)}function Ce(e,t){1&e&&g["\u0275\u0275element"](0,"tr",24)}function _e(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"button",25),g["\u0275\u0275listener"]("click",function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().loadMore()}),g["\u0275\u0275text"](1,"Mais..."),g["\u0275\u0275elementEnd"]()}}let be=(()=>{class e{constructor(e,t,n,r){this._personService=e,this._loader=t,this._toast=n,this._dialog=r,this.persons=[],this.personFilter={limit:20,index:0},this.tableColumns=["id","name","type","documentNumber","address","options"]}ngOnInit(){this.getPersons()}getPersons(e={}){return new Promise((t,n)=>{this._loader.show(),this._personService.getAll(this.personFilter).subscribe(n=>{this._loader.dismiss(),e.reset&&(this.persons=[]),this.persons=this.persons.concat(n),t()},e=>{this._loader.dismiss(),this._toast.showError(e),n()})})}loadMore(){this.personFilter.index++,this.getPersons()}search(e){this.personFilter.q=e,this.personFilter.index=0,this.getPersons({reset:!0})}openForm(e){this._dialog.open(ne,{width:"90%",height:"90%",data:{personId:e}}).afterClosed().subscribe(()=>{this.getPersons({reset:!0})})}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](v.a),g["\u0275\u0275directiveInject"](S.a),g["\u0275\u0275directiveInject"](E.a),g["\u0275\u0275directiveInject"](l.b))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["app-persons-list"]],decls:31,vars:4,consts:[[1,"row"],[1,"col-sm-12"],[2,"width","100%"],["matInput","","autocomplete","off","placeholder","Fa\xe7a sua busca",3,"keyup.enter"],["searchInput",""],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","documentNumber"],["matColumnDef","address"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"text-align","center","padding","10px"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["href","javascript:;","mat-fab","","color","primary",1,"btn-add",3,"click"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["href","javascript:;",3,"click"],["mat-header-row",""],["mat-row",""],["mat-flat-button","","color","primary",3,"click"]],template:function(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",0),g["\u0275\u0275elementStart"](1,"div",1),g["\u0275\u0275elementStart"](2,"mat-form-field",2),g["\u0275\u0275elementStart"](3,"input",3,4),g["\u0275\u0275listener"]("keyup.enter",function(){g["\u0275\u0275restoreView"](e);const n=g["\u0275\u0275reference"](4);return t.search(n.value)}),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"table",5),g["\u0275\u0275elementContainerStart"](6,6),g["\u0275\u0275template"](7,ie,2,0,"th",7),g["\u0275\u0275template"](8,se,2,1,"td",8),g["\u0275\u0275elementContainerEnd"](),g["\u0275\u0275elementContainerStart"](9,9),g["\u0275\u0275template"](10,ae,2,0,"th",7),g["\u0275\u0275template"](11,le,2,1,"td",8),g["\u0275\u0275elementContainerEnd"](),g["\u0275\u0275elementContainerStart"](12,10),g["\u0275\u0275template"](13,de,2,0,"th",7),g["\u0275\u0275template"](14,pe,4,2,"td",8),g["\u0275\u0275elementContainerEnd"](),g["\u0275\u0275elementContainerStart"](15,11),g["\u0275\u0275template"](16,ue,2,0,"th",7),g["\u0275\u0275template"](17,fe,3,3,"td",8),g["\u0275\u0275elementContainerEnd"](),g["\u0275\u0275elementContainerStart"](18,12),g["\u0275\u0275template"](19,he,2,0,"th",7),g["\u0275\u0275template"](20,ge,2,1,"td",8),g["\u0275\u0275elementContainerEnd"](),g["\u0275\u0275elementContainerStart"](21,13),g["\u0275\u0275template"](22,ve,1,0,"th",7),g["\u0275\u0275template"](23,Se,4,0,"td",8),g["\u0275\u0275elementContainerEnd"](),g["\u0275\u0275template"](24,Ee,1,0,"tr",14),g["\u0275\u0275template"](25,Ce,1,0,"tr",15),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"div",16),g["\u0275\u0275template"](27,_e,2,0,"button",17),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](28,"button",18),g["\u0275\u0275listener"]("click",function(){return t.openForm()}),g["\u0275\u0275elementStart"](29,"mat-icon"),g["\u0275\u0275text"](30,"add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}2&e&&(g["\u0275\u0275advance"](5),g["\u0275\u0275property"]("dataSource",t.persons),g["\u0275\u0275advance"](19),g["\u0275\u0275property"]("matHeaderRowDef",t.tableColumns),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("matRowDefColumns",t.tableColumns),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",t.persons.length>=t.personFilter.limit))},directives:[_.c,y.b,re.j,re.c,re.e,re.b,re.g,re.i,r.k,M.a,V.a,re.d,re.a,oe.b,oe.a,re.f,re.h],pipes:[L],styles:["table[_ngcontent-%COMP%]{width:100%}.btn-add[_ngcontent-%COMP%]{position:fixed;bottom:26px;right:30px}"]}),e})();const ye=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["app-persons"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-sm-12"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",0),g["\u0275\u0275elementStart"](1,"div",1),g["\u0275\u0275elementStart"](2,"h1"),g["\u0275\u0275text"](3,"Pessoas"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](4,"router-outlet"))},directives:[s.g],styles:[""]}),e})(),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:be},{path:"form",component:ne},{path:":personId/form",component:ne}]}];let Ie=(()=>{class e{}return e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.f.forChild(ye)],s.f]}),e})();var xe=n("iTUp");let Ne=(()=>{class e{}return e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[a.h,a.o]]}),e})(),Fe=(()=>{class e{}return e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.b,Ne,a.o,i.a,o.a,xe.a,Ie]]}),e})()}}]);