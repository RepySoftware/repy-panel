(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{U1Ny:function(e,t,n){"use strict";n.r(t),n.d(t,"SalesModule",function(){return vt});var r=n("ofXK"),a=n("tyNb"),o=n("fXoL"),l=n("5dVO"),s=n("2g2N"),i=n("F6Y+"),c=n("+0xr"),d=n("bTqV"),m=n("wd/R");let p=(()=>{class e{transform(e,t="L"){return m(e).format(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o["\u0275\u0275definePipe"]({name:"momentDate",type:e,pure:!0}),e})();function u(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",14),o["\u0275\u0275text"](1,"#"),o["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.id)}}function v(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",14),o["\u0275\u0275text"](1,"Data"),o["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",15),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"momentDate"),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,e.createdAt)," ")}}function S(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",14),o["\u0275\u0275text"](1,"Cliente"),o["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.personCustomer.name," ")}}function E(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",14),o["\u0275\u0275text"](1,"Entregador"),o["\u0275\u0275elementEnd"]())}function x(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",(null==e.employeeDriver?null:e.employeeDriver.name)||"-"," ")}}function g(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",14),o["\u0275\u0275text"](1,"Endere\xe7o"),o["\u0275\u0275elementEnd"]())}function P(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"](" ",e.deliveryAddress.description," ",e.deliveryAddress.complement?"(compl: "+e.deliveryAddress.complement+")":""," ")}}function C(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",14),o["\u0275\u0275text"](1,"Status"),o["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.status)}}function I(e,t){1&e&&o["\u0275\u0275element"](0,"th",14)}function w(e,t){1&e&&o["\u0275\u0275element"](0,"td",15)}function O(e,t){1&e&&o["\u0275\u0275element"](0,"tr",16)}function _(e,t){1&e&&o["\u0275\u0275element"](0,"tr",17)}function k(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",18),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().loadMore()}),o["\u0275\u0275text"](1,"Mais..."),o["\u0275\u0275elementEnd"]()}}let M=(()=>{class e{constructor(e,t,n){this._loader=e,this._toast=t,this._saleOrderService=n,this.saleOrderFilter={limit:20,index:0},this.saleOrders=[],this.tableColumns=["id","datetime","customer","driver","address","status","options"]}ngOnInit(){this.getSaleOrders()}getSaleOrders(e={}){return new Promise((t,n)=>{this._loader.show(),this._saleOrderService.getAll(this.saleOrderFilter).subscribe(n=>{this._loader.dismiss(),e.reset&&(this.saleOrders=[]),this.saleOrders=this.saleOrders.concat(n),t()},e=>{this._loader.dismiss(),this._toast.showHttpError(e),n()})})}loadMore(){this.saleOrderFilter.index++,this.getSaleOrders()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sale-orders"]],decls:26,vars:4,consts:[["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","datetime"],["matColumnDef","customer"],["matColumnDef","driver"],["matColumnDef","address"],["matColumnDef","status"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"text-align","center","padding","10px"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["mat-flat-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"table",0),o["\u0275\u0275elementContainerStart"](1,1),o["\u0275\u0275template"](2,u,2,0,"th",2),o["\u0275\u0275template"](3,h,2,1,"td",3),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](4,4),o["\u0275\u0275template"](5,v,2,0,"th",2),o["\u0275\u0275template"](6,f,3,3,"td",3),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](7,5),o["\u0275\u0275template"](8,S,2,0,"th",2),o["\u0275\u0275template"](9,y,2,1,"td",3),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](10,6),o["\u0275\u0275template"](11,E,2,0,"th",2),o["\u0275\u0275template"](12,x,2,1,"td",3),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](13,7),o["\u0275\u0275template"](14,g,2,0,"th",2),o["\u0275\u0275template"](15,P,2,2,"td",3),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](16,8),o["\u0275\u0275template"](17,C,2,0,"th",2),o["\u0275\u0275template"](18,b,2,1,"td",3),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](19,9),o["\u0275\u0275template"](20,I,1,0,"th",2),o["\u0275\u0275template"](21,w,1,0,"td",3),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275template"](22,O,1,0,"tr",10),o["\u0275\u0275template"](23,_,1,0,"tr",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"div",12),o["\u0275\u0275template"](25,k,2,0,"button",13),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("dataSource",t.saleOrders),o["\u0275\u0275advance"](22),o["\u0275\u0275property"]("matHeaderRowDef",t.tableColumns),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("matRowDefColumns",t.tableColumns),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.saleOrders.length>=t.saleOrderFilter.limit))},directives:[c.j,c.c,c.e,c.b,c.g,c.i,r.k,c.d,c.a,c.f,c.h,d.a],pipes:[p],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),e})();var D=n("aHvM"),F=n("TmGi"),A=n("0IaG"),j=n("AytR"),B=n("jhN1"),T=n("Jlam"),V=n("q3OW");let q=(()=>{class e{constructor(e,t,n,r){this._sanitizer=e,this._toast=t,this._paymentMethodService=n,this._companyBranchService=r,this.paymentMethods=[],this.companyBranches=[],this.products=[],this.tabsOk={customer:()=>!!this.personCustomer,products:()=>this.products.length>0,delivery:()=>!!this.employeeDriver,payment:()=>!!this.paymentMethod&&!!this.companyBranch},this.getPaymentMethods(),this.getCompanyBranches()}getPaymentMethods(){this._paymentMethodService.getAll().subscribe(e=>{this.paymentMethods=e},e=>{this._toast.showHttpError(e)})}getCompanyBranches(){this._companyBranchService.getAll().subscribe(e=>{this.companyBranches=e},e=>{this._toast.showHttpError(e)})}get personCustomer(){return this._personCustomer}set personCustomer(e){this._personCustomer=e,this.deliveryAddressMapUrl=this.addressToMapUrl(this._personCustomer.address.description)}get productsTotalPrice(){return this.products.map(e=>e.quantity*e.salePriceValue).reduce((e,t)=>e+t,0)}addressToMapUrl(e){let t="https://www.google.com/maps/embed/v1/search";return t+="?key="+j.a.googleMaps.embedApiKey,t+="&q="+e,this._sanitizer.bypassSecurityTrustResourceUrl(t)}copyAddressLink(e){let t,n;if(e.addressDescription){const r=e;t=r.addressDescription,n=`${r.addressDescription}${r.addressComplement?" (compl:"+r.addressComplement+")":""}${r.addressReferencePoint?" - "+r.addressReferencePoint:""}`}else{const r=e;t=r.address.description,n=`${r.address.description}${r.address.complement?" (compl:"+r.address.complement+")":""}${r.address.referencePoint?" - "+r.address.referencePoint:""}`}const r=function(e){const t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.focus(),t.select();try{return document.execCommand("copy")}catch(n){console.error("Oops, unable to copy")}document.body.removeChild(t)}(`https://www.google.com.br/maps?q=${encodeURI(t)}\n${n}`);this._toast.open(r?"Copiado para sua \xe1rea de transfer\xeancia!":"Erro ao copiar :(")}get deliveryScheduleFormatted(){return this.deliverySchedule.format("DD/MM/YYYY HH:mm")}reset(){this.getPaymentMethods(),this.getCompanyBranches(),this._personCustomer=null,this.products=[],this.employeeDriver=null,this.deliverySchedule=null,this.paymentMethod=null,this.paymentInstallments=null,this.deliveryAddressMapUrl=null}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](B.b),o["\u0275\u0275inject"](s.a),o["\u0275\u0275inject"](T.a),o["\u0275\u0275inject"](V.a))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var $=n("kmnG"),Q=n("qFsG"),R=n("NFeN"),z=n("A5z7");let N=(()=>{class e{transform(e,t,n=", "){return e.map(e=>t?e[t]:e).join(n)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o["\u0275\u0275definePipe"]({name:"map",type:e,pure:!0}),e})();const G=["generalSearch"],H=["nameSearch"],U=["phoneSearch"],L=["addressSearch"];function Y(e,t){1&e&&o["\u0275\u0275element"](0,"img",34)}function J(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",29),o["\u0275\u0275elementStart"](1,"div",30),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275elementStart"](3,"strong"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,Y,1,0,"img",31),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div"),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"map"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div"),o["\u0275\u0275elementStart"](10,"a",32),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]();return t.salesPosService.copyAddressLink(t.salesPosService.personCustomer)}),o["\u0275\u0275text"](11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div"),o["\u0275\u0275elementStart"](13,"button",33),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().unselectPersonCustomer()}),o["\u0275\u0275text"](14,"Cancelar sele\xe7\xe3o"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate2"]("",e.salesPosService.personCustomer.name," (",e.salesPosService.personCustomer.id,")"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.salesPosService.personCustomer.isGasCustomer),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](8,6,e.salesPosService.personCustomer.phones,"phone")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate2"](" ",e.salesPosService.personCustomer.address.description," ",e.salesPosService.personCustomer.address.complement?"(compl: "+e.salesPosService.personCustomer.address.complement+")":""," ")}}function K(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",35),o["\u0275\u0275text"](1,"#"),o["\u0275\u0275elementEnd"]())}function X(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",36),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.id)}}function W(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",35),o["\u0275\u0275text"](1,"Nome"),o["\u0275\u0275elementEnd"]())}function Z(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",36),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function ee(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",35),o["\u0275\u0275text"](1,"Telefones"),o["\u0275\u0275elementEnd"]())}function te(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"mat-chip"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e)}}function ne(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",36),o["\u0275\u0275elementStart"](1,"mat-chip-list"),o["\u0275\u0275template"](2,te,2,1,"mat-chip",37),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.phones)}}function re(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",35),o["\u0275\u0275text"](1,"Endere\xe7o"),o["\u0275\u0275elementEnd"]())}function ae(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"td",36),o["\u0275\u0275elementStart"](1,"a",32),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"]().salesPosService.copyAddressLink(n)}),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"](" ",e.addressDescription," ",e.addressComplement?"(compl: "+e.addressComplement+")":""," ")}}function oe(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",35),o["\u0275\u0275text"](1,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),o["\u0275\u0275elementEnd"]())}function le(e,t){1&e&&o["\u0275\u0275element"](0,"img",39)}function se(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",36),o["\u0275\u0275template"](1,le,1,0,"img",38),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isGasCustomer)}}function ie(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"th",35),o["\u0275\u0275text"](1,"Op\xe7\xf5es"),o["\u0275\u0275elementEnd"]())}function ce(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"td",36),o["\u0275\u0275elementStart"](1,"button",33),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"]().selectPersonCustomer(n)}),o["\u0275\u0275text"](2,"Selecionar"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",33),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"]().openPersonForm(n.id)}),o["\u0275\u0275elementStart"](4,"mat-icon"),o["\u0275\u0275text"](5,"edit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}}function de(e,t){1&e&&o["\u0275\u0275element"](0,"tr",40)}function me(e,t){if(1&e&&o["\u0275\u0275element"](0,"tr",41),2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275styleProp"]("background-color",n.salesPosService.personCustomer&&n.salesPosService.personCustomer.id==e.id?"#efefef":null)}}function pe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",14),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().loadMore()}),o["\u0275\u0275text"](1,"Mais..."),o["\u0275\u0275elementEnd"]()}}let ue=(()=>{class e{constructor(e,t,n,r,a){this._personService=e,this._loader=t,this._toast=n,this._dialog=r,this.salesPosService=a,this.persons=[],this.personSearchFilter={limit:30,index:0},this.tableColumns=["id","name","phones","address","moreInfo","options"]}ngOnInit(){}getPersons(e={}){return new Promise((t,n)=>{this._loader.show(),this._personService.search(this.personSearchFilter).subscribe(n=>{this._loader.dismiss(),e.reset&&(this.personSearchFilter.index=0,this.persons=[]),this.persons=this.persons.concat(n),t()},e=>{this._loader.dismiss(),this._toast.showHttpError(e),n()})})}loadMore(){this.personSearchFilter.index++,this.getPersons()}clearFilter(){this.personSearchFilter.q=null,this.personSearchFilter.name=null,this.personSearchFilter.phone=null,this.personSearchFilter.address=null,this.generalSearchElement.nativeElement.value=null,this.nameSearchElement.nativeElement.value=null,this.phoneSearchElement.nativeElement.value=null,this.addressSearchElement.nativeElement.value=null}search(){this.personSearchFilter.q=this.generalSearchElement.nativeElement.value||null,this.personSearchFilter.name=this.nameSearchElement.nativeElement.value||null,this.personSearchFilter.phone=this.phoneSearchElement.nativeElement.value||null,this.personSearchFilter.address=this.addressSearchElement.nativeElement.value||null,this.personSearchFilter.index=0,this.getPersons({reset:!0})}openPersonForm(e){this._dialog.open(D.a,{width:"90%",height:"90%",data:{personId:e}}).afterClosed().subscribe(e=>{e&&e.hasUpdate&&this.getPersons({reset:!0})})}selectPersonCustomer(e){this._loader.show(),this._personService.getById(e.id).subscribe(e=>{this._loader.dismiss(),this.salesPosService.personCustomer=e},e=>{this._loader.dismiss(),this._toast.showHttpError(e)})}unselectPersonCustomer(){this.salesPosService.personCustomer=null}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](F.a),o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](A.b),o["\u0275\u0275directiveInject"](q))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-customer"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](G,!0),o["\u0275\u0275viewQuery"](H,!0),o["\u0275\u0275viewQuery"](U,!0),o["\u0275\u0275viewQuery"](L,!0)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.generalSearchElement=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.nameSearchElement=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.phoneSearchElement=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.addressSearchElement=e.first)}},decls:53,vars:7,consts:[[1,"row"],[1,"col-12"],["matInput","","placeholder","Geral","autocomplete","off",3,"keyup.enter"],["generalSearch",""],[1,"col-md-4"],["matInput","","placeholder","Nome","autocomplete","off",3,"keyup.enter"],["nameSearch",""],["matInput","","placeholder","Telefone","autocomplete","off",3,"keyup.enter"],["phoneSearch",""],["matInput","","placeholder","Endere\xe7o","autocomplete","off",3,"keyup.enter"],["addressSearch",""],["class","col-md-4","style","padding-top: 26px",4,"ngIf"],[1,"row",2,"margin-bottom","15px !important"],["mat-stroked-button","","color","primary",2,"margin-right","15px",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","phones"],["matColumnDef","address"],["matColumnDef","moreInfo"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"backgroundColor",4,"matRowDef","matRowDefColumns"],[2,"text-align","center","padding","10px"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["href","javascript:;","mat-fab","","color","primary",1,"btn-add",3,"click"],[1,"col-md-4",2,"padding-top","26px"],[1,"selected-customer"],["style","width: 8px; width: 9px; margin-left: 4px;","src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",4,"ngIf"],["href","javascript:;",3,"click"],["mat-stroked-button","",3,"click"],["src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",2,"width","8px","width","9px","margin-left","4px"],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],["style","width: 14px;","src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",4,"ngIf"],["src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",2,"width","14px"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div"),o["\u0275\u0275elementStart"](2,"div",0),o["\u0275\u0275elementStart"](3,"div",1),o["\u0275\u0275elementStart"](4,"mat-form-field"),o["\u0275\u0275elementStart"](5,"input",2,3),o["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",4),o["\u0275\u0275elementStart"](8,"mat-form-field"),o["\u0275\u0275elementStart"](9,"input",5,6),o["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",4),o["\u0275\u0275elementStart"](12,"mat-form-field"),o["\u0275\u0275elementStart"](13,"input",7,8),o["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",4),o["\u0275\u0275elementStart"](16,"mat-form-field"),o["\u0275\u0275elementStart"](17,"input",9,10),o["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](19,J,15,9,"div",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"div",12),o["\u0275\u0275elementStart"](21,"div",1),o["\u0275\u0275elementStart"](22,"button",13),o["\u0275\u0275listener"]("click",function(){return t.clearFilter()}),o["\u0275\u0275text"](23,"Limpar filtros"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"button",14),o["\u0275\u0275listener"]("click",function(){return t.search()}),o["\u0275\u0275text"](25,"Buscar"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",0),o["\u0275\u0275elementStart"](27,"table",15),o["\u0275\u0275elementContainerStart"](28,16),o["\u0275\u0275template"](29,K,2,0,"th",17),o["\u0275\u0275template"](30,X,2,1,"td",18),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](31,19),o["\u0275\u0275template"](32,W,2,0,"th",17),o["\u0275\u0275template"](33,Z,2,1,"td",18),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](34,20),o["\u0275\u0275template"](35,ee,2,0,"th",17),o["\u0275\u0275template"](36,ne,3,1,"td",18),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](37,21),o["\u0275\u0275template"](38,re,2,0,"th",17),o["\u0275\u0275template"](39,ae,3,2,"td",18),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](40,22),o["\u0275\u0275template"](41,oe,2,0,"th",17),o["\u0275\u0275template"](42,se,2,1,"td",18),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerStart"](43,23),o["\u0275\u0275template"](44,ie,2,0,"th",17),o["\u0275\u0275template"](45,ce,6,0,"td",18),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275template"](46,de,1,0,"tr",24),o["\u0275\u0275template"](47,me,1,2,"tr",25),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](48,"div",26),o["\u0275\u0275template"](49,pe,2,0,"button",27),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](50,"button",28),o["\u0275\u0275listener"]("click",function(){return t.openPersonForm()}),o["\u0275\u0275elementStart"](51,"mat-icon"),o["\u0275\u0275text"](52,"add"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275classMap"](t.salesPosService.personCustomer?"col-md-8":"col-md-12"),o["\u0275\u0275advance"](18),o["\u0275\u0275property"]("ngIf",t.salesPosService.personCustomer),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("dataSource",t.persons),o["\u0275\u0275advance"](19),o["\u0275\u0275property"]("matHeaderRowDef",t.tableColumns),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("matRowDefColumns",t.tableColumns),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.persons.length>=t.personSearchFilter.limit))},directives:[$.c,Q.b,r.k,d.a,c.j,c.c,c.e,c.b,c.g,c.i,R.a,c.d,c.a,z.b,r.j,z.a,c.f,c.h],pipes:[N],styles:["table[_ngcontent-%COMP%]{width:100%}.selected-customer[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;font-size:13px;border-radius:4px}.selected-customer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}.btn-add[_ngcontent-%COMP%]{position:fixed;bottom:26px;right:30px}"]}),e})();var he=n("lJxs"),ve=n("pjuo"),fe=n("XNiG"),Se=n("Kj3r"),ye=n("/1cH"),Ee=n("FKr1");const xe=["autocompleteInput"];function ge(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"mat-option",6),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e.value),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.label," ")}}let Pe=(()=>{class e{constructor(){this.disabled=!1,this.items=[],this.onInputSubject=new fe.a}ngOnInit(){this.onInputSubject.pipe(Object(Se.a)(300)).subscribe(e=>this.options.onGetItems(e).subscribe(e=>this.items=e))}onSelectItem(e){this.selectedItem=this.items.find(t=>t.value==e.option.value),this.autocompleteInput.nativeElement.value=this.selectedItem.label,this.options.onSelectItem(this.selectedItem)}onBlur(){this.autocompleteInput.nativeElement.value=this.selectedItem?this.selectedItem.label:null}onFocus(){this.autocompleteInput.nativeElement.value=null}clear(){this.items=[],this.autocompleteInput.nativeElement.value=null,this.selectedItem=null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-autocomplete"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](xe,!0),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.autocompleteInput=e.first)}},inputs:{options:"options",disabled:"disabled"},decls:9,vars:4,consts:[["type","text","autocomplete","off","matInput","",3,"placeholder","matAutocomplete","disabled","input","blur","focus"],["autocompleteInput",""],["mat-icon-button","","matSuffix","",3,"click"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"mat-form-field"),o["\u0275\u0275elementStart"](1,"input",0,1),o["\u0275\u0275listener"]("input",function(){o["\u0275\u0275restoreView"](e);const n=o["\u0275\u0275reference"](2);return t.onInputSubject.next(n.value)})("blur",function(){return t.onBlur()})("focus",function(){return t.onFocus()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",2),o["\u0275\u0275listener"]("click",function(){return t.clear()}),o["\u0275\u0275elementStart"](4,"mat-icon"),o["\u0275\u0275text"](5,"close"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"mat-autocomplete",3,4),o["\u0275\u0275listener"]("optionSelected",function(e){return t.onSelectItem(e)}),o["\u0275\u0275template"](8,ge,2,2,"mat-option",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275reference"](7);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("placeholder",null==t.options?null:t.options.placeholder)("matAutocomplete",e)("disabled",t.disabled),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngForOf",t.items)}},directives:[$.c,Q.b,ye.c,d.a,$.g,R.a,ye.a,r.j,Ee.k],styles:[""]}),e})();const Ce=["employeeDriverAutocomplete"],be=["deliverySchedule"];function Ie(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1," Selecione o cliente para ver o mapa "),o["\u0275\u0275elementEnd"]())}function we(e,t){if(1&e&&o["\u0275\u0275element"](0,"iframe",13),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("src",e.salesPosService.deliveryAddressMapUrl,o["\u0275\u0275sanitizeResourceUrl"])}}function Oe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275elementStart"](1,"div",14),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275elementStart"](3,"strong"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div"),o["\u0275\u0275elementStart"](6,"button",15),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().unselectEmployeeDriver()}),o["\u0275\u0275text"](7,"Cancelar sele\xe7\xe3o"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate2"]("",e.salesPosService.employeeDriver.name," (",e.salesPosService.personCustomer.id,")")}}let _e=(()=>{class e{constructor(e,t){this.salesPosService=e,this._employeeService=t,this.employeeDriverSearchAutocompleteOptions={placeholder:"Entregador",onGetItems:e=>this.employeeDriverSearchAutocompleteOnGetItems(e),onSelectItem:e=>this.employeeDriverSearchAutocompleteOnSelectItem(e)}}ngOnInit(){}employeeDriverSearchAutocompleteOnGetItems(e){return this._employeeService.getAll({index:0,limit:8,q:e,isDriver:!0}).pipe(Object(he.a)(e=>e.map(e=>({label:e.name,value:e}))))}employeeDriverSearchAutocompleteOnSelectItem(e){this.salesPosService.employeeDriver=e.value,this.employeeDriverAutocomplete.clear()}unselectEmployeeDriver(){this.salesPosService.employeeDriver=null}onDefineDeliverySchedule(){this.salesPosService.deliverySchedule=m(this.deliveryScheduleElement.nativeElement.value)}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](q),o["\u0275\u0275directiveInject"](ve.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-delivery"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Ce,!0),o["\u0275\u0275viewQuery"](be,!0)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.employeeDriverAutocomplete=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.deliveryScheduleElement=e.first)}},decls:17,vars:8,consts:[[1,"row"],[1,"col-6",2,"height","100vh"],[4,"ngIf"],["class","map","frameborder","0","style","border:0;","allowfullscreen","","aria-hidden","false","tabindex","0",3,"src",4,"ngIf"],[1,"col-6",2,"padding-top","5px"],[3,"disabled","options"],["employeeDriverAutocomplete",""],["class","col-6",4,"ngIf"],[1,"col-6"],["matInput","","type","datetime-local","placeholder","Agendamento de entrega","autocomplete","off",3,"value","input"],["deliverySchedule",""],[1,"col-2"],[2,"cursor","pointer","margin-top","24px",3,"click"],["frameborder","0","allowfullscreen","","aria-hidden","false","tabindex","0",1,"map",2,"border","0",3,"src"],[1,"selected-driver"],["mat-stroked-button","",3,"click"]],template:function(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275template"](2,Ie,2,0,"span",2),o["\u0275\u0275template"](3,we,1,1,"iframe",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"div",0),o["\u0275\u0275elementStart"](6,"div"),o["\u0275\u0275element"](7,"app-autocomplete",5,6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,Oe,8,2,"div",7),o["\u0275\u0275elementStart"](10,"div",8),o["\u0275\u0275elementStart"](11,"mat-form-field"),o["\u0275\u0275elementStart"](12,"input",9,10),o["\u0275\u0275listener"]("input",function(){return t.onDefineDeliverySchedule()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",11),o["\u0275\u0275elementStart"](15,"mat-icon",12),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275reference"](13).value=null,t.onDefineDeliverySchedule()}),o["\u0275\u0275text"](16,"close"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.salesPosService.tabsOk.customer()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.salesPosService.tabsOk.customer()),o["\u0275\u0275advance"](3),o["\u0275\u0275classMap"](t.salesPosService.employeeDriver?"col-6":"col-12"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",!t.salesPosService.tabsOk.customer())("options",t.employeeDriverSearchAutocompleteOptions),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.salesPosService.employeeDriver),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("value",null==t.salesPosService.deliverySchedule?null:t.salesPosService.deliverySchedule.toDate()))},directives:[r.k,Pe,$.c,Q.b,R.a,d.a],styles:[".map[_ngcontent-%COMP%]{width:100%;height:100%}.selected-driver[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;font-size:13px;border-radius:4px}.selected-driver[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}"]}),e})();var ke=n("d3UM");let Me=(()=>{class e{transform(e){return null!=e?"R$ "+e.toFixed(2).replace(".",","):"-"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o["\u0275\u0275definePipe"]({name:"money",type:e,pure:!0}),e})();const De=["paymentMethod"],Fe=["installments"];function Ae(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"mat-option",9),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function je(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"mat-error"),o["\u0275\u0275text"](1," N\xfamero de parcelas deve ser superior ou igual a 1 "),o["\u0275\u0275elementEnd"]())}function Be(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",1),o["\u0275\u0275elementStart"](1,"mat-form-field"),o["\u0275\u0275elementStart"](2,"input",10,11),o["\u0275\u0275listener"]("input",function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().onDefineInstallments()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,je,2,0,"mat-error",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("value",e.salesPosService.paymentInstallments||1),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.salesPosService.paymentInstallments<=0)}}function Te(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",7),o["\u0275\u0275elementStart"](1,"div",13),o["\u0275\u0275elementStart"](2,"span"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"span",14),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"money"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",e.salesPosService.paymentInstallments,"x "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,2,e.salesPosService.productsTotalPrice/e.salesPosService.paymentInstallments)," ")}}function Ve(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2,"Total: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",16),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"money"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,1,e.salesPosService.productsTotalPrice)," ")}}let qe=(()=>{class e{constructor(e){this.salesPosService=e}ngOnInit(){}onSelectPaymentMethod(){this.salesPosService.paymentMethod=this.salesPosService.paymentMethods.find(e=>e.id==this.paymentMethodElement.value)}onDefineInstallments(){this.salesPosService.paymentInstallments=this.installmentsElement.nativeElement.value}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](q))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-payment"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](De,!0),o["\u0275\u0275viewQuery"](Fe,!0)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.paymentMethodElement=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.installmentsElement=e.first)}},decls:12,vars:5,consts:[[1,"row"],[1,"col-4"],[3,"disabled","selectionChange"],["paymentMethod",""],[3,"value",4,"ngFor","ngForOf"],["class","col-4",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12"],["style","font-size: 23px;",4,"ngIf"],[3,"value"],["matInput","","placeholder","N\xfamero de parcelas","autocomplete","off","type","number",3,"value","input"],["installments",""],[4,"ngIf"],[2,"font-size","19px"],[2,"font-weight","bold"],[2,"font-size","23px"],[2,"font-weight","bold","color","var(--color-alizarin)"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"mat-form-field"),o["\u0275\u0275elementStart"](3,"mat-label"),o["\u0275\u0275text"](4,"Tipo de pagamento"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"mat-select",2,3),o["\u0275\u0275listener"]("selectionChange",function(){return t.onSelectPaymentMethod()}),o["\u0275\u0275template"](7,Ae,2,2,"mat-option",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,Be,5,2,"div",5),o["\u0275\u0275template"](9,Te,7,4,"div",6),o["\u0275\u0275elementStart"](10,"div",7),o["\u0275\u0275template"](11,Ve,6,3,"div",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("disabled",!t.salesPosService.tabsOk.products()),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.salesPosService.paymentMethods),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==t.salesPosService.paymentMethod?null:t.salesPosService.paymentMethod.hasInstallments),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.salesPosService.paymentInstallments>1),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.salesPosService.tabsOk.products()))},directives:[$.c,$.f,ke.a,r.j,r.k,Ee.k,Q.b,$.b],pipes:[Me],styles:[""]}),e})();var $e=n("3Pt+"),Qe=n("Gdn9"),Re=n("f0Cb");let ze=(()=>{class e{constructor(e){this.ngControl=e}set disableControl(e){const t=e?"disable":"enable";setTimeout(()=>this.ngControl.control[t]())}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"]($e.k,2))},e.\u0275dir=o["\u0275\u0275defineDirective"]({type:e,selectors:[["","disableControl",""]],inputs:{disableControl:"disableControl"}}),e})();const Ne=["companyBranch"],Ge=["productAutocomplete"];function He(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"mat-option",28),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"](" ",e.name," - ",e.tradeName," ")}}function Ue(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"mat-option",28),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function Le(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"mat-error"),o["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),o["\u0275\u0275elementEnd"]())}function Ye(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"mat-error"),o["\u0275\u0275text"](1," Campo inv\xe1lido "),o["\u0275\u0275elementEnd"]())}function Je(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"mat-error"),o["\u0275\u0275text"](1," Campo inv\xe1lido "),o["\u0275\u0275elementEnd"]())}function Ke(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"td"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"td"),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"td"),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"money"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"td"),o["\u0275\u0275elementStart"](15,"a",29),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const n=t.index;return o["\u0275\u0275nextContext"]().editProduct(n)}),o["\u0275\u0275elementStart"](16,"mat-icon"),o["\u0275\u0275text"](17,"edit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"a",29),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const n=t.index;return o["\u0275\u0275nextContext"]().removeProduct(n)}),o["\u0275\u0275elementStart"](19,"mat-icon"),o["\u0275\u0275text"](20,"close"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.companyBranchProduct.product.code),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.companyBranchProduct.product.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.price.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.salePriceValue),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.quantity),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](13,6,e.quantity*e.price.salePrice))}}let Xe=(()=>{class e{constructor(e,t,n,r){this._loader=e,this._toast=t,this.salesPosService=n,this._productService=r,this.productSearchAutocompleteOptions={placeholder:"Busca",onGetItems:e=>this.productSearchAutocompleteOnGetItems(e),onSelectItem:e=>this.productSearchAutocompleteOnSelectItem(e)},this.initForm()}ngOnInit(){}initForm(){this.addProductForm=new $e.f({price:new $e.d(null,$e.q.required),salePriceValue:new $e.d(0,[$e.q.required,$e.q.min(0)]),quantity:new $e.d(1,$e.q.required)})}productSearchAutocompleteOnGetItems(e){return this._productService.getAllForSales({index:0,limit:8,q:e},this.companyBranchElement.value).pipe(Object(he.a)(e=>e.map(e=>({label:`${e.product.code} - ${e.product.name}`,value:e}))))}productSearchAutocompleteOnSelectItem(e){this.productToAdd=e.value,this.productAutocomplete.clear()}onSelectPrice(){const e=this.productToAdd.prices.find(e=>e.id==this.addProductForm.get("price").value);this.addProductForm.get("salePriceValue").setValue(e.salePrice)}addProduct(){if(!this.productToAdd)throw this._toast.open("Nenhum produto selecionado"),new Error("Not selected product");if(!this.addProductForm.valid)throw this.addProductForm.markAllAsTouched(),this._toast.open("Preencha todos os campos obrigat\xf3rios"),new Error("Not selected product");const e=this.productToAdd.prices.find(e=>e.id==this.addProductForm.get("price").value),t={companyBranchProduct:this.productToAdd,price:e,salePriceValue:this.addProductForm.get("salePriceValue").value,quantity:this.addProductForm.get("quantity").value};this.salesPosService.products.push(t),this.productToAdd=null}editProduct(e){const t=this.salesPosService.products[e];this.productToAdd=t.companyBranchProduct,this.addProductForm.get("price").setValue(t.price.id),this.addProductForm.get("salePriceValue").setValue(t.salePriceValue),this.addProductForm.get("quantity").setValue(t.quantity),this.removeProduct(e)}removeProduct(e){this.salesPosService.products.splice(e,1)}onSelectCompanyBranch(){this.salesPosService.companyBranch=this.salesPosService.companyBranches.find(e=>e.id==this.companyBranchElement.value)}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](q),o["\u0275\u0275directiveInject"](Qe.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-products"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Ne,!0),o["\u0275\u0275viewQuery"](Ge,!0)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.companyBranchElement=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.productAutocomplete=e.first)}},decls:73,vars:18,consts:[[1,"row"],[1,"col-6",2,"border-right","2px solid #ddd","height","100vh"],[1,"col-12"],[3,"value","selectionChange"],["companyBranch",""],[3,"value",4,"ngFor","ngForOf"],[3,"disabled","options"],["productAutocomplete",""],[3,"formGroup"],[1,"row",2,"padding-top","14px",3,"hidden"],[1,"product-category"],[1,"product-code"],[1,"col-8"],["formControlName","price",3,"selectionChange"],["price",""],[4,"ngIf"],[1,"col-4"],["type","number","matInput","","placeholder","Pre\xe7o","formControlName","salePriceValue","autocomplete","off",3,"disableControl"],["salePriceValue",""],["type","number","matInput","","placeholder","Quantidade","formControlName","quantity","autocomplete","off"],["quantity",""],[1,"col-sm-12"],["mat-flat-button","","color","primary",3,"click"],[1,"col-6"],[1,"products-table"],[4,"ngFor","ngForOf"],["colspan","5"],["colspan","2",2,"font-weight","bold","color","var(--color-alizarin)"],[3,"value"],["href","javascript:;",3,"click"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",0),o["\u0275\u0275elementStart"](3,"div",2),o["\u0275\u0275elementStart"](4,"mat-form-field"),o["\u0275\u0275elementStart"](5,"mat-label"),o["\u0275\u0275text"](6,"Unidade"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"mat-select",3,4),o["\u0275\u0275listener"]("selectionChange",function(){return t.onSelectCompanyBranch()}),o["\u0275\u0275template"](9,He,2,3,"mat-option",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",2),o["\u0275\u0275element"](11,"app-autocomplete",6,7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](13,"mat-divider"),o["\u0275\u0275elementStart"](14,"form",8),o["\u0275\u0275elementStart"](15,"div",9),o["\u0275\u0275elementStart"](16,"div",2),o["\u0275\u0275elementStart"](17,"h3"),o["\u0275\u0275text"](18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",2),o["\u0275\u0275elementStart"](20,"h4",10),o["\u0275\u0275text"](21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",2),o["\u0275\u0275elementStart"](23,"h4",11),o["\u0275\u0275text"](24),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"div",12),o["\u0275\u0275elementStart"](26,"mat-form-field"),o["\u0275\u0275elementStart"](27,"mat-label"),o["\u0275\u0275text"](28,"Tipo de pre\xe7o"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"mat-select",13,14),o["\u0275\u0275listener"]("selectionChange",function(){return t.onSelectPrice()}),o["\u0275\u0275template"](31,Ue,2,2,"mat-option",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](32,Le,2,0,"mat-error",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](33,"div",16),o["\u0275\u0275elementStart"](34,"mat-form-field"),o["\u0275\u0275element"](35,"input",17,18),o["\u0275\u0275template"](37,Ye,2,0,"mat-error",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](38,"div",16),o["\u0275\u0275elementStart"](39,"mat-form-field"),o["\u0275\u0275element"](40,"input",19,20),o["\u0275\u0275template"](42,Je,2,0,"mat-error",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](43,"div",21),o["\u0275\u0275elementStart"](44,"button",22),o["\u0275\u0275listener"]("click",function(){return t.addProduct()}),o["\u0275\u0275text"](45,"Incluir produto"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](46,"div",23),o["\u0275\u0275elementStart"](47,"div",0),o["\u0275\u0275elementStart"](48,"div",2),o["\u0275\u0275elementStart"](49,"table",24),o["\u0275\u0275elementStart"](50,"thead"),o["\u0275\u0275elementStart"](51,"tr"),o["\u0275\u0275elementStart"](52,"th"),o["\u0275\u0275text"](53,"C\xf3d"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](54,"th"),o["\u0275\u0275text"](55,"Produto"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](56,"th"),o["\u0275\u0275text"](57,"Tip. pre\xe7o"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](58,"th"),o["\u0275\u0275text"](59,"Pre\xe7o"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](60,"th"),o["\u0275\u0275text"](61,"Qtd"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](62,"th"),o["\u0275\u0275text"](63,"Total"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](64,"th"),o["\u0275\u0275text"](65,"Opt"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](66,"tbody"),o["\u0275\u0275template"](67,Ke,21,8,"tr",25),o["\u0275\u0275elementStart"](68,"tr"),o["\u0275\u0275element"](69,"td",26),o["\u0275\u0275elementStart"](70,"td",27),o["\u0275\u0275text"](71),o["\u0275\u0275pipe"](72,"money"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](8),n=o["\u0275\u0275reference"](30),r=o["\u0275\u0275reference"](36),a=o["\u0275\u0275reference"](41);o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("value",null==t.salesPosService.companyBranch?null:t.salesPosService.companyBranch.id),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.salesPosService.companyBranches),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!e.value)("options",t.productSearchAutocompleteOptions),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("formGroup",t.addProductForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",!t.productToAdd),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](null==t.productToAdd?null:t.productToAdd.product.name),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("Categoria: ",null==t.productToAdd?null:t.productToAdd.product.category.name,""),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("C\xf3d: ",null==t.productToAdd?null:t.productToAdd.product.code,""),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngForOf",null==t.productToAdd?null:t.productToAdd.prices),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.addProductForm.get("price").valid),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disableControl",!n.value),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",r),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",!a.valid),o["\u0275\u0275advance"](25),o["\u0275\u0275property"]("ngForOf",t.salesPosService.products),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](72,16,t.salesPosService.productsTotalPrice)," ")}},directives:[$.c,$.f,ke.a,r.j,Pe,Re.a,$e.r,$e.m,$e.g,$e.l,$e.e,r.k,$e.o,Q.b,$e.c,ze,d.a,Ee.k,$.b,R.a],pipes:[Me],styles:[".price[_ngcontent-%COMP%]{font-size:24px;color:var(--color-alizarin);font-weight:700;margin-top:17px}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd}.product-category[_ngcontent-%COMP%], .product-code[_ngcontent-%COMP%]{font-size:16px;text-transform:uppercase;color:#888;font-weight:700}"]}),e})();function We(e,t){1&e&&o["\u0275\u0275element"](0,"img",17)}function Ze(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div"),o["\u0275\u0275elementStart"](2,"strong"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,We,1,0,"img",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div"),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"map"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div"),o["\u0275\u0275elementStart"](9,"a",16),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]();return t.salesPosService.copyAddressLink(t.salesPosService.personCustomer)}),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate2"]("",e.salesPosService.personCustomer.name," (",e.salesPosService.personCustomer.id,")"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.salesPosService.personCustomer.isGasCustomer),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](7,6,e.salesPosService.personCustomer.phones,"phone")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate2"](" ",e.salesPosService.personCustomer.address.description," ",e.salesPosService.personCustomer.address.complement?"(compl: "+e.salesPosService.personCustomer.address.complement+")":""," ")}}function et(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"tr"),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"td"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"td"),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"td"),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"money"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.companyBranchProduct.product.code),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.companyBranchProduct.product.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.price.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.salePriceValue),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.quantity),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](13,6,e.quantity*e.price.salePrice))}}function tt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" Agendamento: ",e.salesPosService.deliveryScheduleFormatted," ")}}function nt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div"),o["\u0275\u0275elementStart"](2,"strong"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,tt,2,1,"div",3),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate2"]("",e.salesPosService.employeeDriver.name," (",e.salesPosService.personCustomer.id,")"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.salesPosService.deliverySchedule)}}function rt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",20),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",21),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"money"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",e.salesPosService.paymentInstallments,"x "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,2,e.salesPosService.productsTotalPrice/e.salesPosService.paymentInstallments)," ")}}function at(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div"),o["\u0275\u0275elementStart"](2,"strong"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,rt,6,4,"div",18),o["\u0275\u0275elementStart"](5,"div",19),o["\u0275\u0275elementStart"](6,"span"),o["\u0275\u0275text"](7,"Total: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"span",8),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"money"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.salesPosService.paymentMethod.name),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.salesPosService.paymentInstallments>1),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,3,e.salesPosService.productsTotalPrice)," ")}}let ot=(()=>{class e{constructor(e,t,n,r,a){this.salesPosService=e,this._toast=t,this._loader=n,this._saleOrderService=r,this._router=a}ngOnInit(){}generateSaleOrder(){this.verifyErrors(!0);const e={companyBranchId:this.salesPosService.companyBranch.id,employeeDriverId:this.salesPosService.employeeDriver.id,personCustomerId:this.salesPosService.personCustomer.id,paymentMethodId:this.salesPosService.paymentMethod.id,paymentInstallments:this.salesPosService.paymentMethod.hasInstallments?this.salesPosService.paymentInstallments||1:null,scheduledAt:this.salesPosService.deliverySchedule?m(this.salesPosService.deliverySchedule).format("YYYY-MM-DD HH:mm:ss"):null,products:this.salesPosService.products.map(e=>({companyBranchProductId:e.companyBranchProduct.id,companyBranchProductPriceId:e.price.id,quantity:e.quantity,salePrice:e.salePriceValue}))};this._loader.show(),this._saleOrderService.create(e).subscribe(e=>{this._loader.dismiss(),this._toast.open(`Pedido #${e.id} gerado com sucesso`,"success"),this.salesPosService.reset(),this._router.navigate(["/sales/pos"])},e=>{this._loader.dismiss(),this._toast.showHttpError(e)})}verifyErrors(e=!1){const t=[];if(this.salesPosService.companyBranch||t.push("Unidade da empresa n\xe3o definida"),this.salesPosService.employeeDriver||t.push("Entregador n\xe3o definido"),this.salesPosService.personCustomer||t.push("Cliente n\xe3o definido"),this.salesPosService.paymentMethod||t.push("M\xe9todo de pagamento n\xe3o definido"),this.salesPosService.products.length<=0&&t.push("Nenhum produto definido"),t.length>0)throw e&&this._toast.open(t.join(" | "),"error"),new Error(t.join(" | "))}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](q),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](a.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-summary"]],decls:46,vars:7,consts:[[1,"row"],[1,"col-md-4"],[1,"selected-customer"],[4,"ngIf"],[1,"col-8"],[1,"products-table"],[4,"ngFor","ngForOf"],["colspan","5"],[2,"font-weight","bold","color","var(--color-alizarin)"],[1,"row",2,"margin-top","10px !important"],[1,"col-6"],[1,"selected-driver"],[1,"payment"],[1,"col-12"],["mat-flat-button","","color","primary",2,"margin-top","23px",3,"click"],["style","width: 8px; width: 9px; margin-left: 4px;","src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",4,"ngIf"],["href","javascript:;",3,"click"],["src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",2,"width","8px","width","9px","margin-left","4px"],["style","font-size: 19px;",4,"ngIf"],[2,"font-size","23px"],[2,"font-size","19px"],[2,"font-weight","bold"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"h4"),o["\u0275\u0275text"](3,"Cliente"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275template"](5,Ze,11,9,"div",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"h4"),o["\u0275\u0275text"](8,"Produtos"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"table",5),o["\u0275\u0275elementStart"](10,"thead"),o["\u0275\u0275elementStart"](11,"tr"),o["\u0275\u0275elementStart"](12,"th"),o["\u0275\u0275text"](13,"C\xf3d"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"th"),o["\u0275\u0275text"](15,"Produto"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"th"),o["\u0275\u0275text"](17,"Tip. pre\xe7o"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"th"),o["\u0275\u0275text"](19,"Pre\xe7o"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"th"),o["\u0275\u0275text"](21,"Qtd"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"th"),o["\u0275\u0275text"](23,"Total"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"tbody"),o["\u0275\u0275template"](25,et,14,8,"tr",6),o["\u0275\u0275elementStart"](26,"tr"),o["\u0275\u0275element"](27,"td",7),o["\u0275\u0275elementStart"](28,"td",8),o["\u0275\u0275text"](29),o["\u0275\u0275pipe"](30,"money"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"div",9),o["\u0275\u0275elementStart"](32,"div",10),o["\u0275\u0275elementStart"](33,"h4"),o["\u0275\u0275text"](34,"Entrega"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](35,"div",11),o["\u0275\u0275template"](36,nt,5,3,"div",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"div",10),o["\u0275\u0275elementStart"](38,"h4"),o["\u0275\u0275text"](39,"Pagamento"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](40,"div",12),o["\u0275\u0275template"](41,at,11,5,"div",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](42,"div",0),o["\u0275\u0275elementStart"](43,"div",13),o["\u0275\u0275elementStart"](44,"button",14),o["\u0275\u0275listener"]("click",function(){return t.generateSaleOrder()}),o["\u0275\u0275text"](45," Gerar pedido "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",t.salesPosService.tabsOk.customer()),o["\u0275\u0275advance"](20),o["\u0275\u0275property"]("ngForOf",t.salesPosService.products),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](30,5,t.salesPosService.productsTotalPrice)," "),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngIf",t.salesPosService.tabsOk.delivery()),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",t.salesPosService.tabsOk.payment()))},directives:[r.k,r.j,d.a],pipes:[Me,N],styles:[".selected-customer[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;font-size:13px;border-radius:4px}.selected-customer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected-driver[_ngcontent-%COMP%]{border:1px solid #ddd}.selected-driver[_ngcontent-%COMP%]{padding:11px;font-size:13px;border-radius:4px}.selected-driver[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}.payment[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;border-radius:4px}"]}),e})();var lt=n("wZkO");function st(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"a",3),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("routerLink",e.route),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("tab-label-success",e.validator()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.label)}}let it=(()=>{class e{constructor(e){this.salesPosService=e,this.tabs=[{label:"Cliente",route:"/sales/pos/customer",validator:()=>this.salesPosService.tabsOk.customer()},{label:"Produtos",route:"/sales/pos/products",validator:()=>this.salesPosService.tabsOk.products()},{label:"Entrega",route:"/sales/pos/delivery",validator:()=>this.salesPosService.tabsOk.delivery()},{label:"Pagamento",route:"/sales/pos/payment",validator:()=>this.salesPosService.tabsOk.payment()},{label:"Finalizar",route:"/sales/pos/summary",validator:()=>!1}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](q))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sales-pos"]],decls:4,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","","routerLinkActive","tab-active","style","text-decoration: none;",3,"routerLink",4,"ngFor","ngForOf"],[2,"height","64px"],["mat-tab-link","","routerLinkActive","tab-active",2,"text-decoration","none",3,"routerLink"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nav",0),o["\u0275\u0275template"](1,st,3,4,"a",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](2,"div",2),o["\u0275\u0275element"](3,"router-outlet")),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.tabs))},directives:[lt.b,r.j,a.g,a.e,lt.a,a.d],styles:[".tab-label-success[_ngcontent-%COMP%]{color:var(--green)!important;font-weight:700!important}.tab-active[_ngcontent-%COMP%]{font-weight:700;color:#000;opacity:1;background-color:#f5f5f5}nav[_ngcontent-%COMP%]{position:fixed;background:#fff;z-index:999;width:100%}"]}),e})();const ct=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sales"]],decls:1,vars:0,template:function(e,t){1&e&&o["\u0275\u0275element"](0,"router-outlet")},directives:[a.g],styles:[""]}),e})(),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"pos",component:it,children:[{path:"",pathMatch:"full",redirectTo:"customer"},{path:"customer",component:ue},{path:"products",component:Xe},{path:"delivery",component:_e},{path:"payment",component:qe},{path:"summary",component:ot}]},{path:"orders",component:M}]}];let dt=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.f.forChild(ct)],a.f]}),e})();var mt=n("PCNd"),pt=n("ssao"),ut=n("iTUp"),ht=n("FUS3");let vt=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[q],imports:[[r.b,mt.a,pt.a,ut.a,dt,$e.p,ht.a]]}),e})()}}]);