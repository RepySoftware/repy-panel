(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{U1Ny:function(e,t,n){"use strict";n.r(t),n.d(t,"SalesModule",function(){return J});var r=n("ofXK"),o=n("tyNb"),a=n("fXoL"),l=n("wZkO"),s=n("aHvM"),i=n("TmGi"),m=n("5dVO"),c=n("2g2N"),d=n("0IaG");let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var u=n("kmnG"),f=n("qFsG"),h=n("bTqV"),S=n("+0xr"),v=n("NFeN"),E=n("A5z7");const C=["generalSearch"],y=["nameSearch"],x=["phoneSearch"],b=["addressSearch"];function g(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",28),a["\u0275\u0275elementStart"](1,"div",29),a["\u0275\u0275elementStart"](2,"div"),a["\u0275\u0275elementStart"](3,"strong"),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div"),a["\u0275\u0275text"](8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div"),a["\u0275\u0275elementStart"](10,"button",30),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().unselectPersonCustomer()}),a["\u0275\u0275text"](11,"Cancelar sele\xe7\xe3o"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate2"]("",e.salesPosService.personCustomer.name," (",e.salesPosService.personCustomer.id,")"),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",e.salesPosService.personCustomer.phones," "),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate2"](" ",e.salesPosService.personCustomer.addressDescription," ",e.salesPosService.personCustomer.addressComplement?"(compl: "+e.salesPosService.personCustomer.addressComplement+")":""," ")}}function w(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"th",31),a["\u0275\u0275text"](1,"#"),a["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"td",32),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e.id)}}function P(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"th",31),a["\u0275\u0275text"](1,"Nome"),a["\u0275\u0275elementEnd"]())}function I(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"td",32),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function F(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"th",31),a["\u0275\u0275text"](1,"Telefones"),a["\u0275\u0275elementEnd"]())}function O(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-chip"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e)}}function D(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"td",32),a["\u0275\u0275elementStart"](1,"mat-chip-list"),a["\u0275\u0275template"](2,O,2,1,"mat-chip",33),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",e.phones)}}function _(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"th",31),a["\u0275\u0275text"](1,"Endere\xe7o"),a["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"td",32),a["\u0275\u0275elementStart"](1,"a",34),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](e);const n=t.$implicit;return a["\u0275\u0275nextContext"]().copyAddressLink(n)}),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate2"](" ",e.addressDescription," ",e.addressComplement?"(compl: "+e.addressComplement+")":""," ")}}function M(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"th",31),a["\u0275\u0275text"](1,"Op\xe7\xf5es"),a["\u0275\u0275elementEnd"]())}function $(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"td",32),a["\u0275\u0275elementStart"](1,"button",30),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](e);const n=t.$implicit;return a["\u0275\u0275nextContext"]().selectPersonCustomer(n)}),a["\u0275\u0275text"](2,"Selecionar"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"button",30),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](e);const n=t.$implicit;return a["\u0275\u0275nextContext"]().openPersonForm(n.id)}),a["\u0275\u0275elementStart"](4,"mat-icon"),a["\u0275\u0275text"](5,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}function R(e,t){1&e&&a["\u0275\u0275element"](0,"tr",35)}function V(e,t){if(1&e&&a["\u0275\u0275element"](0,"tr",36),2&e){const e=t.$implicit,n=a["\u0275\u0275nextContext"]();a["\u0275\u0275styleProp"]("background-color",n.salesPosService.personCustomer&&n.salesPosService.personCustomer.id==e.id?"#efefef":null)}}function N(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",14),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"]().loadMore()}),a["\u0275\u0275text"](1,"Mais..."),a["\u0275\u0275elementEnd"]()}}let q=(()=>{class e{constructor(e,t,n,r,o){this._personService=e,this._loader=t,this._toast=n,this._dialog=r,this.salesPosService=o,this.persons=[],this.personSearchFilter={limit:30,index:0},this.tableColumns=["id","name","phones","address","options"]}ngOnInit(){}getPersons(e={}){return new Promise((t,n)=>{this._loader.show(),this._personService.search(this.personSearchFilter).subscribe(n=>{this._loader.dismiss(),e.reset&&(this.personSearchFilter.index=0,this.persons=[]),this.persons=this.persons.concat(n),t()},e=>{this._loader.dismiss(),this._toast.showError(e),n()})})}loadMore(){this.personSearchFilter.index++,this.getPersons()}clearFilter(){this.personSearchFilter.q=null,this.personSearchFilter.name=null,this.personSearchFilter.phone=null,this.personSearchFilter.address=null}search(){this.personSearchFilter.q=this.generalSearchElement.nativeElement.value||null,this.personSearchFilter.name=this.nameSearchElement.nativeElement.value||null,this.personSearchFilter.phone=this.phoneSearchElement.nativeElement.value||null,this.personSearchFilter.address=this.addressSearchElement.nativeElement.value||null,this.personSearchFilter.index=0,this.getPersons({reset:!0})}openPersonForm(e){this._dialog.open(s.a,{width:"90%",height:"90%",data:{personId:e}}).afterClosed().subscribe(e=>{e&&e.hasUpdate&&this.getPersons({reset:!0})})}selectPersonCustomer(e){this.salesPosService.personCustomer=e}unselectPersonCustomer(){this.salesPosService.personCustomer=null}copyAddressLink(e){const t=`${e.addressDescription}${e.addressComplement?" (compl:"+e.addressComplement+")":""}${e.addressReferencePoint?" - "+e.addressReferencePoint:""}`,n=function(e){const t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.focus(),t.select();try{return document.execCommand("copy")}catch(n){console.error("Oops, unable to copy")}document.body.removeChild(t)}(`https://www.google.com.br/maps?q=${encodeURI(e.addressDescription)}\n${t}`);this._toast.open(n?"Copiado para sua \xe1rea de transfer\xeancia!":"Erro ao copiar :(")}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](i.a),a["\u0275\u0275directiveInject"](m.a),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](d.b),a["\u0275\u0275directiveInject"](p))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-customer"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](C,!0),a["\u0275\u0275viewQuery"](y,!0),a["\u0275\u0275viewQuery"](x,!0),a["\u0275\u0275viewQuery"](b,!0)),2&e){let e;a["\u0275\u0275queryRefresh"](e=a["\u0275\u0275loadQuery"]())&&(t.generalSearchElement=e.first),a["\u0275\u0275queryRefresh"](e=a["\u0275\u0275loadQuery"]())&&(t.nameSearchElement=e.first),a["\u0275\u0275queryRefresh"](e=a["\u0275\u0275loadQuery"]())&&(t.phoneSearchElement=e.first),a["\u0275\u0275queryRefresh"](e=a["\u0275\u0275loadQuery"]())&&(t.addressSearchElement=e.first)}},decls:50,vars:7,consts:[[1,"row"],[1,"col-12"],["matInput","","placeholder","Geral","autocomplete","off",3,"keyup.enter"],["generalSearch",""],[1,"col-md-4"],["matInput","","placeholder","Nome","autocomplete","off",3,"keyup.enter"],["nameSearch",""],["matInput","","placeholder","Telefone","autocomplete","off",3,"keyup.enter"],["phoneSearch",""],["matInput","","placeholder","Endere\xe7o","autocomplete","off",3,"keyup.enter"],["addressSearch",""],["class","col-md-4","style","padding-top: 26px",4,"ngIf"],[1,"row",2,"margin-bottom","15px !important"],["mat-stroked-button","","color","primary",2,"margin-right","15px",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","phones"],["matColumnDef","address"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"backgroundColor",4,"matRowDef","matRowDefColumns"],[2,"text-align","center","padding","10px"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["href","javascript:;","mat-fab","","color","primary",1,"btn-add",3,"click"],[1,"col-md-4",2,"padding-top","26px"],[1,"selected-customer"],["mat-stroked-button","",3,"click"],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],["href","javascript:;",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div"),a["\u0275\u0275elementStart"](2,"div",0),a["\u0275\u0275elementStart"](3,"div",1),a["\u0275\u0275elementStart"](4,"mat-form-field"),a["\u0275\u0275elementStart"](5,"input",2,3),a["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",4),a["\u0275\u0275elementStart"](8,"mat-form-field"),a["\u0275\u0275elementStart"](9,"input",5,6),a["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"div",4),a["\u0275\u0275elementStart"](12,"mat-form-field"),a["\u0275\u0275elementStart"](13,"input",7,8),a["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",4),a["\u0275\u0275elementStart"](16,"mat-form-field"),a["\u0275\u0275elementStart"](17,"input",9,10),a["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](19,g,12,5,"div",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",12),a["\u0275\u0275elementStart"](21,"div",1),a["\u0275\u0275elementStart"](22,"button",13),a["\u0275\u0275listener"]("click",function(){return t.clearFilter()}),a["\u0275\u0275text"](23,"Limpar filtros"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"button",14),a["\u0275\u0275listener"]("click",function(){return t.search()}),a["\u0275\u0275text"](25,"Buscar"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"div",0),a["\u0275\u0275elementStart"](27,"table",15),a["\u0275\u0275elementContainerStart"](28,16),a["\u0275\u0275template"](29,w,2,0,"th",17),a["\u0275\u0275template"](30,k,2,1,"td",18),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](31,19),a["\u0275\u0275template"](32,P,2,0,"th",17),a["\u0275\u0275template"](33,I,2,1,"td",18),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](34,20),a["\u0275\u0275template"](35,F,2,0,"th",17),a["\u0275\u0275template"](36,D,3,1,"td",18),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](37,21),a["\u0275\u0275template"](38,_,2,0,"th",17),a["\u0275\u0275template"](39,j,3,2,"td",18),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](40,22),a["\u0275\u0275template"](41,M,2,0,"th",17),a["\u0275\u0275template"](42,$,6,0,"td",18),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](43,R,1,0,"tr",23),a["\u0275\u0275template"](44,V,1,2,"tr",24),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"div",25),a["\u0275\u0275template"](46,N,2,0,"button",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](47,"button",27),a["\u0275\u0275listener"]("click",function(){return t.openPersonForm()}),a["\u0275\u0275elementStart"](48,"mat-icon"),a["\u0275\u0275text"](49,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275classMap"](t.salesPosService.personCustomer?"col-md-8":"col-md-12"),a["\u0275\u0275advance"](18),a["\u0275\u0275property"]("ngIf",t.salesPosService.personCustomer),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("dataSource",t.persons),a["\u0275\u0275advance"](16),a["\u0275\u0275property"]("matHeaderRowDef",t.tableColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",t.tableColumns),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.persons.length>=t.personSearchFilter.limit))},directives:[u.c,f.b,r.k,h.a,S.j,S.c,S.e,S.b,S.g,S.i,v.a,S.d,S.a,E.b,r.j,E.a,S.f,S.h],styles:["table[_ngcontent-%COMP%]{width:100%}.selected-customer[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;font-size:13px;border-radius:4px}.selected-customer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}.btn-add[_ngcontent-%COMP%]{position:fixed;bottom:26px;right:30px}"]}),e})(),Q=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-order"]],decls:2,vars:0,template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"p"),a["\u0275\u0275text"](1,"pos-order works!"),a["\u0275\u0275elementEnd"]())},styles:[""]}),e})(),G=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-payment"]],decls:2,vars:0,template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"p"),a["\u0275\u0275text"](1,"pos-payment works!"),a["\u0275\u0275elementEnd"]())},styles:[""]}),e})(),T=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-summary"]],decls:2,vars:0,template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"p"),a["\u0275\u0275text"](1,"pos-summary works!"),a["\u0275\u0275elementEnd"]())},styles:[""]}),e})(),H=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sales-pos"]],decls:9,vars:0,consts:[["label","Cliente"],["label","Pedido"],["label","Pagamento"],["label","Finalizar"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-tab-group"),a["\u0275\u0275elementStart"](1,"mat-tab",0),a["\u0275\u0275element"](2,"app-pos-customer"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-tab",1),a["\u0275\u0275element"](4,"app-pos-order"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-tab",2),a["\u0275\u0275element"](6,"app-pos-payment"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"mat-tab",3),a["\u0275\u0275element"](8,"app-pos-summary"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())},directives:[l.b,l.a,q,Q,G,T],styles:[""]}),e})();const L=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sales"]],decls:1,vars:0,template:function(e,t){1&e&&a["\u0275\u0275element"](0,"router-outlet")},directives:[o.g],styles:[""]}),e})(),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"pos",component:H}]}];let z=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.f.forChild(L)],o.f]}),e})();var A=n("PCNd"),U=n("ssao");let J=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[p],imports:[[r.b,A.a,U.a,z]]}),e})()}}]);