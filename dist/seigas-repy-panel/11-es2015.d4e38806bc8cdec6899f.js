(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{F4UR:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginModule",function(){return I});var r=n("ofXK"),o=n("3Pt+"),i=n("hEVC"),a=n("fXoL"),s=n("lGQG"),m=n("2g2N"),l=n("5dVO"),c=n("mnRn"),d=n("tyNb"),g=n("K6Ak"),u=n("Wp6s"),p=n("kmnG"),h=n("qFsG"),f=n("bTqV");const v=["backgroundImage"];function b(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1," Este campo cont\xe9m erros "),a["\u0275\u0275elementEnd"]())}function w(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),a["\u0275\u0275elementEnd"]())}let S=(()=>{class e{constructor(e,t,n,r,i,a){this._authService=e,this._toastService=t,this._loaderService=n,this._imageService=r,this._router=i,this._title=a,this._title.set("Login"),this.loginForm=new o.g({username:new o.e(null,[o.s.required]),password:new o.e(null,o.s.required)})}ngOnInit(){this.setBackgroundImage()}login(){if(!this.loginForm.valid){const e="Preencha todos os campos";throw this._toastService.open(e),new Error(e)}const e={username:this.loginForm.get("username").value,password:this.loginForm.get("password").value};this._loaderService.show(),this._authService.login(e).subscribe(e=>{this._loaderService.dismiss(),this._router.navigate(["/home"])},e=>{this._loaderService.dismiss(),this._toastService.open(i.a.mapErrorResponse(e).message)})}setBackgroundImage(){this._imageService.getImageOfTheDay().subscribe(e=>{this.backgroundImageElement.nativeElement.style.backgroundImage=`url(${e})`},e=>{this.backgroundImageElement.nativeElement.style.backgroundImage="url(/assets/images/login-bg.jpg)"})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](m.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](d.c),a["\u0275\u0275directiveInject"](g.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-login"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](v,!0),2&e){let e;a["\u0275\u0275queryRefresh"](e=a["\u0275\u0275loadQuery"]())&&(t.backgroundImageElement=e.first)}},decls:20,vars:3,consts:[[1,"bg"],["backgroundImage",""],[1,"row"],[1,"col-md-4","offset-md-4"],[1,"login-card"],["src","/assets/images/logo.png",2,"width","200px","padding","17px"],[2,"font-size","18px","font-weight","bold"],[3,"formGroup","ngSubmit"],["type","text","matInput","","placeholder","Nome de usu\xe1rio","formControlName","username"],["username",""],[4,"ngIf"],["matInput","","placeholder","Senha","formControlName","password","type","password"],["password",""],["mat-flat-button","","color","primary",2,"width","100%"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0,1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"mat-card",4),a["\u0275\u0275elementStart"](5,"div"),a["\u0275\u0275element"](6,"img",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"mat-card-subtitle",6),a["\u0275\u0275text"](8,"Login"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"form",7),a["\u0275\u0275listener"]("ngSubmit",function(){return t.login()}),a["\u0275\u0275elementStart"](10,"mat-form-field"),a["\u0275\u0275element"](11,"input",8,9),a["\u0275\u0275template"](13,b,2,0,"mat-error",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"mat-form-field"),a["\u0275\u0275element"](15,"input",11,12),a["\u0275\u0275template"](17,w,2,0,"mat-error",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"button",13),a["\u0275\u0275text"](19,"Entrar"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275reference"](12),n=a["\u0275\u0275reference"](16);a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("formGroup",t.loginForm),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",!e.valid),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",!n.valid)}},directives:[u.a,u.d,o.t,o.n,o.h,p.c,h.b,o.d,o.m,o.f,r.m,f.a,p.b],styles:[".bg[_ngcontent-%COMP%]{background:url(/assets/images/login-bg.jpg);background-size:cover;position:absolute;width:100%;height:100%}.login-card[_ngcontent-%COMP%]{text-align:center;padding:30px;margin-top:20%!important}"]}),e})();var E=n("ssao");let I=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,E.a,d.g.forChild([{path:"",component:S}]),o.r]]}),e})()}}]);