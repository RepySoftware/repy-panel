(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{U1Ny:function(e,t,n){"use strict";n.r(t),n.d(t,"SalesModule",function(){return ve});var r=n("ofXK"),o=n("tyNb"),l=n("fXoL"),a=n("wZkO"),i=n("aHvM"),s=n("TmGi"),c=n("5dVO"),d=n("2g2N"),m=n("0IaG");let p=(()=>{class e{constructor(){this.products=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var u=n("kmnG"),h=n("qFsG"),f=n("bTqV"),S=n("+0xr"),v=n("NFeN"),E=n("A5z7");let y=(()=>{class e{transform(e,t,n=", "){return e.map(e=>t?e[t]:e).join(n)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=l["\u0275\u0275definePipe"]({name:"map",type:e,pure:!0}),e})();const x=["generalSearch"],b=["nameSearch"],g=["phoneSearch"],C=["addressSearch"];function I(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",28),l["\u0275\u0275elementStart"](1,"div",29),l["\u0275\u0275elementStart"](2,"div"),l["\u0275\u0275elementStart"](3,"strong"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"div"),l["\u0275\u0275text"](6),l["\u0275\u0275pipe"](7,"map"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div"),l["\u0275\u0275elementStart"](9,"a",30),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const t=l["\u0275\u0275nextContext"]();return t.copyAddressLink(t.salesPosService.personCustomer)}),l["\u0275\u0275text"](10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"div"),l["\u0275\u0275elementStart"](12,"button",31),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().unselectPersonCustomer()}),l["\u0275\u0275text"](13,"Cancelar sele\xe7\xe3o"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate2"]("",e.salesPosService.personCustomer.name," (",e.salesPosService.personCustomer.id,")"),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](7,5,e.salesPosService.personCustomer.phones,"phone")," "),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate2"](" ",e.salesPosService.personCustomer.address.description," ",e.salesPosService.personCustomer.address.complement?"(compl: "+e.salesPosService.personCustomer.address.complement+")":""," ")}}function w(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"th",32),l["\u0275\u0275text"](1,"#"),l["\u0275\u0275elementEnd"]())}function P(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"td",33),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](e.id)}}function k(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"th",32),l["\u0275\u0275text"](1,"Nome"),l["\u0275\u0275elementEnd"]())}function O(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"td",33),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function F(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"th",32),l["\u0275\u0275text"](1,"Telefones"),l["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"mat-chip"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](e)}}function A(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"td",33),l["\u0275\u0275elementStart"](1,"mat-chip-list"),l["\u0275\u0275template"](2,_,2,1,"mat-chip",34),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",e.phones)}}function j(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"th",32),l["\u0275\u0275text"](1,"Endere\xe7o"),l["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"td",33),l["\u0275\u0275elementStart"](1,"a",30),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"]().copyAddressLink(n)}),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate2"](" ",e.addressDescription," ",e.addressComplement?"(compl: "+e.addressComplement+")":""," ")}}function T(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"th",32),l["\u0275\u0275text"](1,"Op\xe7\xf5es"),l["\u0275\u0275elementEnd"]())}function B(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"td",33),l["\u0275\u0275elementStart"](1,"button",31),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"]().selectPersonCustomer(n)}),l["\u0275\u0275text"](2,"Selecionar"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"button",31),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"]().openPersonForm(n.id)}),l["\u0275\u0275elementStart"](4,"mat-icon"),l["\u0275\u0275text"](5,"edit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function $(e,t){1&e&&l["\u0275\u0275element"](0,"tr",35)}function Q(e,t){if(1&e&&l["\u0275\u0275element"](0,"tr",36),2&e){const e=t.$implicit,n=l["\u0275\u0275nextContext"]();l["\u0275\u0275styleProp"]("background-color",n.salesPosService.personCustomer&&n.salesPosService.personCustomer.id==e.id?"#efefef":null)}}function M(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",14),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().loadMore()}),l["\u0275\u0275text"](1,"Mais..."),l["\u0275\u0275elementEnd"]()}}let N=(()=>{class e{constructor(e,t,n,r,o){this._personService=e,this._loader=t,this._toast=n,this._dialog=r,this.salesPosService=o,this.persons=[],this.personSearchFilter={limit:30,index:0},this.tableColumns=["id","name","phones","address","options"]}ngOnInit(){}getPersons(e={}){return new Promise((t,n)=>{this._loader.show(),this._personService.search(this.personSearchFilter).subscribe(n=>{this._loader.dismiss(),e.reset&&(this.personSearchFilter.index=0,this.persons=[]),this.persons=this.persons.concat(n),t()},e=>{this._loader.dismiss(),this._toast.showError(e),n()})})}loadMore(){this.personSearchFilter.index++,this.getPersons()}clearFilter(){this.personSearchFilter.q=null,this.personSearchFilter.name=null,this.personSearchFilter.phone=null,this.personSearchFilter.address=null}search(){this.personSearchFilter.q=this.generalSearchElement.nativeElement.value||null,this.personSearchFilter.name=this.nameSearchElement.nativeElement.value||null,this.personSearchFilter.phone=this.phoneSearchElement.nativeElement.value||null,this.personSearchFilter.address=this.addressSearchElement.nativeElement.value||null,this.personSearchFilter.index=0,this.getPersons({reset:!0})}openPersonForm(e){this._dialog.open(i.a,{width:"90%",height:"90%",data:{personId:e}}).afterClosed().subscribe(e=>{e&&e.hasUpdate&&this.getPersons({reset:!0})})}selectPersonCustomer(e){this._loader.show(),this._personService.getById(e.id).subscribe(e=>{this._loader.dismiss(),this.salesPosService.personCustomer=e},e=>{this._loader.dismiss(),this._toast.showError(e)})}unselectPersonCustomer(){this.salesPosService.personCustomer=null}copyAddressLink(e){let t,n;if(e.addressDescription){const r=e;t=r.addressDescription,n=`${r.addressDescription}${r.addressComplement?" (compl:"+r.addressComplement+")":""}${r.addressReferencePoint?" - "+r.addressReferencePoint:""}`}else{const r=e;t=r.address.description,n=`${r.address.description}${r.address.complement?" (compl:"+r.address.complement+")":""}${r.address.referencePoint?" - "+r.address.referencePoint:""}`}const r=function(e){const t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.focus(),t.select();try{return document.execCommand("copy")}catch(n){console.error("Oops, unable to copy")}document.body.removeChild(t)}(`https://www.google.com.br/maps?q=${encodeURI(t)}\n${n}`);this._toast.open(r?"Copiado para sua \xe1rea de transfer\xeancia!":"Erro ao copiar :(")}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](s.a),l["\u0275\u0275directiveInject"](c.a),l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](m.b),l["\u0275\u0275directiveInject"](p))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-customer"]],viewQuery:function(e,t){if(1&e&&(l["\u0275\u0275viewQuery"](x,!0),l["\u0275\u0275viewQuery"](b,!0),l["\u0275\u0275viewQuery"](g,!0),l["\u0275\u0275viewQuery"](C,!0)),2&e){let e;l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.generalSearchElement=e.first),l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.nameSearchElement=e.first),l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.phoneSearchElement=e.first),l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.addressSearchElement=e.first)}},decls:50,vars:7,consts:[[1,"row"],[1,"col-12"],["matInput","","placeholder","Geral","autocomplete","off",3,"keyup.enter"],["generalSearch",""],[1,"col-md-4"],["matInput","","placeholder","Nome","autocomplete","off",3,"keyup.enter"],["nameSearch",""],["matInput","","placeholder","Telefone","autocomplete","off",3,"keyup.enter"],["phoneSearch",""],["matInput","","placeholder","Endere\xe7o","autocomplete","off",3,"keyup.enter"],["addressSearch",""],["class","col-md-4","style","padding-top: 26px",4,"ngIf"],[1,"row",2,"margin-bottom","15px !important"],["mat-stroked-button","","color","primary",2,"margin-right","15px",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","phones"],["matColumnDef","address"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"backgroundColor",4,"matRowDef","matRowDefColumns"],[2,"text-align","center","padding","10px"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["href","javascript:;","mat-fab","","color","primary",1,"btn-add",3,"click"],[1,"col-md-4",2,"padding-top","26px"],[1,"selected-customer"],["href","javascript:;",3,"click"],["mat-stroked-button","",3,"click"],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div"),l["\u0275\u0275elementStart"](2,"div",0),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275elementStart"](4,"mat-form-field"),l["\u0275\u0275elementStart"](5,"input",2,3),l["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",4),l["\u0275\u0275elementStart"](8,"mat-form-field"),l["\u0275\u0275elementStart"](9,"input",5,6),l["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"div",4),l["\u0275\u0275elementStart"](12,"mat-form-field"),l["\u0275\u0275elementStart"](13,"input",7,8),l["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"div",4),l["\u0275\u0275elementStart"](16,"mat-form-field"),l["\u0275\u0275elementStart"](17,"input",9,10),l["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](19,I,14,8,"div",11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"div",12),l["\u0275\u0275elementStart"](21,"div",1),l["\u0275\u0275elementStart"](22,"button",13),l["\u0275\u0275listener"]("click",function(){return t.clearFilter()}),l["\u0275\u0275text"](23,"Limpar filtros"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"button",14),l["\u0275\u0275listener"]("click",function(){return t.search()}),l["\u0275\u0275text"](25,"Buscar"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"div",0),l["\u0275\u0275elementStart"](27,"table",15),l["\u0275\u0275elementContainerStart"](28,16),l["\u0275\u0275template"](29,w,2,0,"th",17),l["\u0275\u0275template"](30,P,2,1,"td",18),l["\u0275\u0275elementContainerEnd"](),l["\u0275\u0275elementContainerStart"](31,19),l["\u0275\u0275template"](32,k,2,0,"th",17),l["\u0275\u0275template"](33,O,2,1,"td",18),l["\u0275\u0275elementContainerEnd"](),l["\u0275\u0275elementContainerStart"](34,20),l["\u0275\u0275template"](35,F,2,0,"th",17),l["\u0275\u0275template"](36,A,3,1,"td",18),l["\u0275\u0275elementContainerEnd"](),l["\u0275\u0275elementContainerStart"](37,21),l["\u0275\u0275template"](38,j,2,0,"th",17),l["\u0275\u0275template"](39,q,3,2,"td",18),l["\u0275\u0275elementContainerEnd"](),l["\u0275\u0275elementContainerStart"](40,22),l["\u0275\u0275template"](41,T,2,0,"th",17),l["\u0275\u0275template"](42,B,6,0,"td",18),l["\u0275\u0275elementContainerEnd"](),l["\u0275\u0275template"](43,$,1,0,"tr",23),l["\u0275\u0275template"](44,Q,1,2,"tr",24),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](45,"div",25),l["\u0275\u0275template"](46,M,2,0,"button",26),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](47,"button",27),l["\u0275\u0275listener"]("click",function(){return t.openPersonForm()}),l["\u0275\u0275elementStart"](48,"mat-icon"),l["\u0275\u0275text"](49,"add"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275classMap"](t.salesPosService.personCustomer?"col-md-8":"col-md-12"),l["\u0275\u0275advance"](18),l["\u0275\u0275property"]("ngIf",t.salesPosService.personCustomer),l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("dataSource",t.persons),l["\u0275\u0275advance"](16),l["\u0275\u0275property"]("matHeaderRowDef",t.tableColumns),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("matRowDefColumns",t.tableColumns),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.persons.length>=t.personSearchFilter.limit))},directives:[u.c,h.b,r.k,f.a,S.j,S.c,S.e,S.b,S.g,S.i,v.a,S.d,S.a,E.b,r.j,E.a,S.f,S.h],pipes:[y],styles:["table[_ngcontent-%COMP%]{width:100%}.selected-customer[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;font-size:13px;border-radius:4px}.selected-customer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}.btn-add[_ngcontent-%COMP%]{position:fixed;bottom:26px;right:30px}"]}),e})();var R=n("lJxs"),V=n("Gdn9"),D=n("q3OW"),G=n("d3UM"),z=n("XNiG"),U=n("Kj3r"),H=n("/1cH"),L=n("FKr1");const J=["autocompleteInput"];function K(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"mat-option",6),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275property"]("value",e.value),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",e.label," ")}}let X=(()=>{class e{constructor(){this.disabled=!1,this.items=[],this.onInputSubject=new z.a}ngOnInit(){this.onInputSubject.pipe(Object(U.a)(300)).subscribe(e=>this.options.onGetItems(e).subscribe(e=>this.items=e))}onSelectItem(e){this.selectedItem=this.items.find(t=>t.value==e.option.value),this.autocompleteInput.nativeElement.value=this.selectedItem.label,this.options.onSelectItem(this.selectedItem)}onBlur(){this.autocompleteInput.nativeElement.value=this.selectedItem?this.selectedItem.label:null}onFocus(){this.autocompleteInput.nativeElement.value=null}clear(){this.items=[],this.autocompleteInput.nativeElement.value=null,this.selectedItem=null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-autocomplete"]],viewQuery:function(e,t){if(1&e&&l["\u0275\u0275viewQuery"](J,!0),2&e){let e;l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.autocompleteInput=e.first)}},inputs:{options:"options",disabled:"disabled"},decls:9,vars:4,consts:[["type","text","autocomplete","off","matInput","",3,"placeholder","matAutocomplete","disabled","input","blur","focus"],["autocompleteInput",""],["mat-icon-button","","matSuffix","",3,"click"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"mat-form-field"),l["\u0275\u0275elementStart"](1,"input",0,1),l["\u0275\u0275listener"]("input",function(){l["\u0275\u0275restoreView"](e);const n=l["\u0275\u0275reference"](2);return t.onInputSubject.next(n.value)})("blur",function(){return t.onBlur()})("focus",function(){return t.onFocus()}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"button",2),l["\u0275\u0275listener"]("click",function(){return t.clear()}),l["\u0275\u0275elementStart"](4,"mat-icon"),l["\u0275\u0275text"](5,"close"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"mat-autocomplete",3,4),l["\u0275\u0275listener"]("optionSelected",function(e){return t.onSelectItem(e)}),l["\u0275\u0275template"](8,K,2,2,"mat-option",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275reference"](7);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("placeholder",null==t.options?null:t.options.placeholder)("matAutocomplete",e)("disabled",t.disabled),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngForOf",t.items)}},directives:[u.c,h.b,H.c,f.a,u.g,v.a,H.a,r.j,L.k],styles:[""]}),e})();var W=n("f0Cb");let Z=(()=>{class e{transform(e){return null!=e?"R$ "+e.toFixed(2).replace(".",","):"-"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=l["\u0275\u0275definePipe"]({name:"money",type:e,pure:!0}),e})();const Y=["companyBranch"],ee=["productAutocomplete"],te=["productPrice"],ne=["quantity"];function re(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"mat-option",24),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275property"]("value",e.id),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate2"](" ",e.name," - ",e.tradeName," ")}}function oe(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"mat-option",24),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275property"]("value",e.id),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function le(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"mat-error"),l["\u0275\u0275text"](1," Valor precisa ser maior de 0 "),l["\u0275\u0275elementEnd"]())}function ae(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"td"),l["\u0275\u0275text"](10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"td"),l["\u0275\u0275text"](12),l["\u0275\u0275pipe"](13,"money"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"td"),l["\u0275\u0275elementStart"](15,"a",25),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.index;return l["\u0275\u0275nextContext"]().editProduct(n)}),l["\u0275\u0275elementStart"](16,"mat-icon"),l["\u0275\u0275text"](17,"edit"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](18,"a",25),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.index;return l["\u0275\u0275nextContext"]().removeProduct(n)}),l["\u0275\u0275elementStart"](19,"mat-icon"),l["\u0275\u0275text"](20,"close"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.companyBranchProduct.product.code),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.companyBranchProduct.product.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.price.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.price.salePrice),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.quantity),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](13,6,e.quantity*e.price.salePrice))}}let ie=(()=>{class e{constructor(e,t,n,r,o){this._loader=e,this._toast=t,this.salesPosService=n,this._productService=r,this._companyBranchService=o,this.productSearchAutocompleteOptions={placeholder:"Busca",onGetItems:e=>this.productSearchAutocompleteOnGetItems(e),onSelectItem:e=>this.productSearchAutocompleteOnSelectItem(e)},this.companyBranches=[]}ngOnInit(){this.getCompanyBranches()}getCompanyBranches(){this._companyBranchService.getAll().subscribe(e=>{this.companyBranches=e},e=>{this._toast.showError(e)})}productSearchAutocompleteOnGetItems(e){return this._productService.getAllForSales({index:0,limit:8,q:e},this.companyBranchElement.value).pipe(Object(R.a)(e=>e.map(e=>({label:`${e.product.code} - ${e.product.name}`,value:e}))))}productSearchAutocompleteOnSelectItem(e){this.productToAdd=e.value,this.productAutocomplete.clear()}addProduct(){if(!this.productToAdd)throw this._toast.open("Nenhum produto selecionado"),new Error("Not selected product");if(!this.productPriceElement.value)throw this._toast.open("Nenhum tipo de pre\xe7o selecionado"),new Error("Not selected price type");if(!this.quantityElement.nativeElement.value)throw this._toast.open("Nenhuma quantidade informada"),new Error("Not defined quantity");const e={companyBranchProduct:this.productToAdd,price:this.productToAdd.prices.find(e=>e.id==this.productPriceElement.value),quantity:this.quantityElement.nativeElement.value};this.salesPosService.products.push(e),this.productToAdd=null}editProduct(e){const t=this.salesPosService.products[e];this.productToAdd=t.companyBranchProduct,this.productPriceElement.value=t.price.id,this.quantityElement.nativeElement.value=t.quantity,this.removeProduct(e)}removeProduct(e){this.salesPosService.products.splice(e,1)}get posProductsTotalPrice(){return this.salesPosService.products.map(e=>e.quantity*e.price.salePrice).reduce((e,t)=>e+t,0)}getPriceById(e){return e&&this.productToAdd?this.productToAdd.prices.find(t=>t.id==e):null}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](c.a),l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](p),l["\u0275\u0275directiveInject"](V.a),l["\u0275\u0275directiveInject"](D.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-products"]],viewQuery:function(e,t){if(1&e&&(l["\u0275\u0275viewQuery"](Y,!0),l["\u0275\u0275viewQuery"](ee,!0),l["\u0275\u0275viewQuery"](te,!0),l["\u0275\u0275viewQuery"](ne,!0)),2&e){let e;l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.companyBranchElement=e.first),l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.productAutocomplete=e.first),l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.productPriceElement=e.first),l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.quantityElement=e.first)}},decls:70,vars:16,consts:[[1,"row"],[1,"col-6",2,"border-right","2px solid #ddd","height","100vh"],[1,"col-12"],["formControlName","type"],["companyBranch",""],[3,"value",4,"ngFor","ngForOf"],[3,"disabled","options"],["productAutocomplete",""],[1,"row",2,"padding-top","14px",3,"hidden"],[1,"col-12",2,"font-size","19px"],[1,"col-8"],["productPrice",""],[1,"col-4"],[1,"price"],["type","number","matInput","","placeholder","Quantidade","autocomplete","off"],["quantity",""],[4,"ngIf"],[1,"col-sm-12"],["mat-flat-button","","color","primary",3,"click"],[1,"col-6"],[1,"products-table"],[4,"ngFor","ngForOf"],["colspan","5"],[2,"font-weight","bold","color","var(--color-alizarin)"],[3,"value"],["href","javascript:;",3,"click"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",0),l["\u0275\u0275elementStart"](3,"div",2),l["\u0275\u0275elementStart"](4,"mat-form-field"),l["\u0275\u0275elementStart"](5,"mat-label"),l["\u0275\u0275text"](6,"Unidade"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"mat-select",3,4),l["\u0275\u0275template"](9,re,2,3,"mat-option",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",2),l["\u0275\u0275element"](11,"app-autocomplete",6,7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](13,"mat-divider"),l["\u0275\u0275elementStart"](14,"div",8),l["\u0275\u0275elementStart"](15,"div",2),l["\u0275\u0275elementStart"](16,"h3"),l["\u0275\u0275text"](17),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](18,"div",9),l["\u0275\u0275elementStart"](19,"h4"),l["\u0275\u0275text"](20),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](21,"div",9),l["\u0275\u0275elementStart"](22,"h4"),l["\u0275\u0275text"](23),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"div",10),l["\u0275\u0275elementStart"](25,"mat-form-field"),l["\u0275\u0275elementStart"](26,"mat-label"),l["\u0275\u0275text"](27,"Tipo de pre\xe7o"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"mat-select",3,11),l["\u0275\u0275template"](30,oe,2,2,"mat-option",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](31,"div",12),l["\u0275\u0275elementStart"](32,"div",13),l["\u0275\u0275text"](33),l["\u0275\u0275pipe"](34,"money"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](35,"div",12),l["\u0275\u0275elementStart"](36,"mat-form-field"),l["\u0275\u0275element"](37,"input",14,15),l["\u0275\u0275template"](39,le,2,0,"mat-error",16),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](40,"div",17),l["\u0275\u0275elementStart"](41,"button",18),l["\u0275\u0275listener"]("click",function(){return t.addProduct()}),l["\u0275\u0275text"](42,"Incluir produto"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](43,"div",19),l["\u0275\u0275elementStart"](44,"div",0),l["\u0275\u0275elementStart"](45,"div",2),l["\u0275\u0275elementStart"](46,"table",20),l["\u0275\u0275elementStart"](47,"thead"),l["\u0275\u0275elementStart"](48,"tr"),l["\u0275\u0275elementStart"](49,"th"),l["\u0275\u0275text"](50,"C\xf3d"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](51,"th"),l["\u0275\u0275text"](52,"Produto"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](53,"th"),l["\u0275\u0275text"](54,"Tip. pre\xe7o"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](55,"th"),l["\u0275\u0275text"](56,"Pre\xe7o"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](57,"th"),l["\u0275\u0275text"](58,"Qtd"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](59,"th"),l["\u0275\u0275text"](60,"Total"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](61,"th"),l["\u0275\u0275text"](62,"Opt"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](63,"tbody"),l["\u0275\u0275template"](64,ae,21,8,"tr",21),l["\u0275\u0275elementStart"](65,"tr"),l["\u0275\u0275element"](66,"td",22),l["\u0275\u0275elementStart"](67,"td",23),l["\u0275\u0275text"](68),l["\u0275\u0275pipe"](69,"money"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275reference"](8),n=l["\u0275\u0275reference"](29),r=l["\u0275\u0275reference"](38);let o=null;l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngForOf",t.companyBranches),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!e.value)("options",t.productSearchAutocompleteOptions),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("hidden",!t.productToAdd),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](null==t.productToAdd?null:t.productToAdd.product.name),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("Categoria: ",null==t.productToAdd?null:t.productToAdd.product.category.name,""),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("C\xf3d: ",null==t.productToAdd?null:t.productToAdd.product.code,""),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngForOf",null==t.productToAdd?null:t.productToAdd.prices),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](34,12,null==(o=t.getPriceById(n.value))?null:o.salePrice)),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngIf",!!r&&r.value<=0),l["\u0275\u0275advance"](25),l["\u0275\u0275property"]("ngForOf",t.salesPosService.products),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](69,14,t.posProductsTotalPrice)," ")}},directives:[u.c,u.f,G.a,r.j,X,W.a,h.b,r.k,f.a,L.k,u.b,v.a],pipes:[Z],styles:[".price[_ngcontent-%COMP%]{font-size:24px;color:var(--color-alizarin);font-weight:700;margin-top:17px}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd}"]}),e})(),se=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-delivery"]],decls:2,vars:0,template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1,"pos-delivery works!"),l["\u0275\u0275elementEnd"]())},styles:[""]}),e})(),ce=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-payment"]],decls:2,vars:0,template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1,"pos-payment works!"),l["\u0275\u0275elementEnd"]())},styles:[""]}),e})(),de=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pos-summary"]],decls:2,vars:0,template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1,"pos-summary works!"),l["\u0275\u0275elementEnd"]())},styles:[""]}),e})(),me=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sales-pos"]],decls:11,vars:0,consts:[["label","Cliente"],["label","Produtos"],["label","Entrega"],["label","Pagamento"],["label","Finalizar"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"mat-tab-group"),l["\u0275\u0275elementStart"](1,"mat-tab",0),l["\u0275\u0275element"](2,"app-pos-customer"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"mat-tab",1),l["\u0275\u0275element"](4,"app-pos-products"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"mat-tab",2),l["\u0275\u0275element"](6,"app-pos-delivery"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"mat-tab",3),l["\u0275\u0275element"](8,"app-pos-payment"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"mat-tab",4),l["\u0275\u0275element"](10,"app-pos-summary"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())},directives:[a.b,a.a,N,ie,se,ce,de],styles:[""]}),e})();const pe=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sales"]],decls:1,vars:0,template:function(e,t){1&e&&l["\u0275\u0275element"](0,"router-outlet")},directives:[o.g],styles:[""]}),e})(),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"pos",component:me}]}];let ue=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.f.forChild(pe)],o.f]}),e})();var he=n("PCNd"),fe=n("ssao"),Se=n("iTUp");let ve=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[p],imports:[[r.b,he.a,fe.a,Se.a,ue]]}),e})()}}]);