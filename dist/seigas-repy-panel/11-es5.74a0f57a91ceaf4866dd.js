!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{U1Ny:function(t,r,a){"use strict";a.r(r),a.d(r,"SalesModule",function(){return At});var o,l=a("ofXK"),i=a("tyNb"),s=a("fXoL"),c=a("5dVO"),d=a("2g2N"),m=a("F6Y+"),p=a("+0xr"),u=a("bTqV"),v=a("wd/R"),f=((o=function(){function t(){e(this,t)}return n(t,[{key:"transform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"L";return v(e).format(t)}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275pipe=s["\u0275\u0275definePipe"]({name:"momentDate",type:o,pure:!0}),o);function h(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",14),s["\u0275\u0275text"](1,"#"),s["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",15),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](n.id)}}function y(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",14),s["\u0275\u0275text"](1,"Data"),s["\u0275\u0275elementEnd"]())}function g(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",15),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"momentDate"),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,n.createdAt)," ")}}function E(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",14),s["\u0275\u0275text"](1,"Cliente"),s["\u0275\u0275elementEnd"]())}function x(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",15),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.personCustomer.name," ")}}function P(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",14),s["\u0275\u0275text"](1,"Entregador"),s["\u0275\u0275elementEnd"]())}function C(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",15),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",(null==n.employeeDriver?null:n.employeeDriver.name)||"-"," ")}}function b(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",14),s["\u0275\u0275text"](1,"Endere\xe7o"),s["\u0275\u0275elementEnd"]())}function I(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",15),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate2"](" ",n.deliveryAddress.description," ",n.deliveryAddress.complement?"(compl: "+n.deliveryAddress.complement+")":""," ")}}function w(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",14),s["\u0275\u0275text"](1,"Status"),s["\u0275\u0275elementEnd"]())}function k(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",15),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](n.status)}}function O(e,t){1&e&&s["\u0275\u0275element"](0,"th",14)}function _(e,t){1&e&&s["\u0275\u0275element"](0,"td",15)}function M(e,t){1&e&&s["\u0275\u0275element"](0,"tr",16)}function D(e,t){1&e&&s["\u0275\u0275element"](0,"tr",17)}function F(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",18),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().loadMore()}),s["\u0275\u0275text"](1,"Mais..."),s["\u0275\u0275elementEnd"]()}}var A,j,B,T=((A=function(){function t(n,r,a){e(this,t),this._loader=n,this._toast=r,this._saleOrderService=a,this.saleOrderFilter={limit:20,index:0},this.saleOrders=[],this.tableColumns=["id","datetime","customer","driver","address","status","options"]}return n(t,[{key:"ngOnInit",value:function(){this.getSaleOrders()}},{key:"getSaleOrders",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,r){e._loader.show(),e._saleOrderService.getAll(e.saleOrderFilter).subscribe(function(r){e._loader.dismiss(),t.reset&&(e.saleOrders=[]),e.saleOrders=e.saleOrders.concat(r),n()},function(t){e._loader.dismiss(),e._toast.showHttpError(t),r()})})}},{key:"loadMore",value:function(){this.saleOrderFilter.index++,this.getSaleOrders()}}]),t}()).\u0275fac=function(e){return new(e||A)(s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](m.a))},A.\u0275cmp=s["\u0275\u0275defineComponent"]({type:A,selectors:[["app-sale-orders"]],decls:26,vars:4,consts:[["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","datetime"],["matColumnDef","customer"],["matColumnDef","driver"],["matColumnDef","address"],["matColumnDef","status"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"text-align","center","padding","10px"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["mat-flat-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"table",0),s["\u0275\u0275elementContainerStart"](1,1),s["\u0275\u0275template"](2,h,2,0,"th",2),s["\u0275\u0275template"](3,S,2,1,"td",3),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](4,4),s["\u0275\u0275template"](5,y,2,0,"th",2),s["\u0275\u0275template"](6,g,3,3,"td",3),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](7,5),s["\u0275\u0275template"](8,E,2,0,"th",2),s["\u0275\u0275template"](9,x,2,1,"td",3),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](10,6),s["\u0275\u0275template"](11,P,2,0,"th",2),s["\u0275\u0275template"](12,C,2,1,"td",3),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](13,7),s["\u0275\u0275template"](14,b,2,0,"th",2),s["\u0275\u0275template"](15,I,2,2,"td",3),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](16,8),s["\u0275\u0275template"](17,w,2,0,"th",2),s["\u0275\u0275template"](18,k,2,1,"td",3),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](19,9),s["\u0275\u0275template"](20,O,1,0,"th",2),s["\u0275\u0275template"](21,_,1,0,"td",3),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](22,M,1,0,"tr",10),s["\u0275\u0275template"](23,D,1,0,"tr",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"div",12),s["\u0275\u0275template"](25,F,2,0,"button",13),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275property"]("dataSource",t.saleOrders),s["\u0275\u0275advance"](22),s["\u0275\u0275property"]("matHeaderRowDef",t.tableColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.tableColumns),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.saleOrders.length>=t.saleOrderFilter.limit))},directives:[p.j,p.c,p.e,p.b,p.g,p.i,l.k,p.d,p.a,p.f,p.h,u.a],pipes:[f],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),A),V=a("aHvM"),q=a("TmGi"),Q=a("0IaG"),R=a("AytR"),$=a("jhN1"),z=a("Jlam"),N=a("q3OW"),G=((j=function(){function t(n,r,a,o){var l=this;e(this,t),this._sanitizer=n,this._toast=r,this._paymentMethodService=a,this._companyBranchService=o,this.paymentMethods=[],this.companyBranches=[],this.products=[],this.tabsOk={customer:function(){return!!l.personCustomer},products:function(){return l.products.length>0},delivery:function(){return!!l.employeeDriver},payment:function(){return!!l.paymentMethod&&!!l.companyBranch}},this.getPaymentMethods(),this.getCompanyBranches()}return n(t,[{key:"getPaymentMethods",value:function(){var e=this;this._paymentMethodService.getAll().subscribe(function(t){e.paymentMethods=t},function(t){e._toast.showHttpError(t)})}},{key:"getCompanyBranches",value:function(){var e=this;this._companyBranchService.getAll().subscribe(function(t){e.companyBranches=t},function(t){e._toast.showHttpError(t)})}},{key:"addressToMapUrl",value:function(e){var t="https://www.google.com/maps/embed/v1/search";return t+="?key="+R.a.googleMaps.embedApiKey,t+="&q="+e,this._sanitizer.bypassSecurityTrustResourceUrl(t)}},{key:"copyAddressLink",value:function(e){var t,n;if(e.addressDescription){var r=e;t=r.addressDescription,n="".concat(r.addressDescription).concat(r.addressComplement?" (compl:"+r.addressComplement+")":"").concat(r.addressReferencePoint?" - "+r.addressReferencePoint:"")}else{var a=e;t=a.address.description,n="".concat(a.address.description).concat(a.address.complement?" (compl:"+a.address.complement+")":"").concat(a.address.referencePoint?" - "+a.address.referencePoint:"")}var o=function(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.focus(),t.select();try{return document.execCommand("copy")}catch(n){console.error("Oops, unable to copy")}document.body.removeChild(t)}("https://www.google.com.br/maps?q=".concat(encodeURI(t),"\n").concat(n));this._toast.open(o?"Copiado para sua \xe1rea de transfer\xeancia!":"Erro ao copiar :(")}},{key:"reset",value:function(){this.getPaymentMethods(),this.getCompanyBranches(),this._personCustomer=null,this.products=[],this.employeeDriver=null,this.deliverySchedule=null,this.paymentMethod=null,this.paymentInstallments=null,this.deliveryAddressMapUrl=null}},{key:"personCustomer",get:function(){return this._personCustomer},set:function(e){this._personCustomer=e,this.deliveryAddressMapUrl=this.addressToMapUrl(this._personCustomer.address.description)}},{key:"productsTotalPrice",get:function(){return this.products.map(function(e){return e.quantity*e.salePriceValue}).reduce(function(e,t){return e+t},0)}},{key:"deliveryScheduleFormatted",get:function(){return this.deliverySchedule.format("DD/MM/YYYY HH:mm")}}]),t}()).\u0275fac=function(e){return new(e||j)(s["\u0275\u0275inject"]($.b),s["\u0275\u0275inject"](d.a),s["\u0275\u0275inject"](z.a),s["\u0275\u0275inject"](N.a))},j.\u0275prov=s["\u0275\u0275defineInjectable"]({token:j,factory:j.\u0275fac}),j),H=a("kmnG"),U=a("qFsG"),L=a("NFeN"),Y=a("A5z7"),J=((B=function(){function t(){e(this,t)}return n(t,[{key:"transform",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:", ";return e.map(function(e){return t?e[t]:e}).join(n)}}]),t}()).\u0275fac=function(e){return new(e||B)},B.\u0275pipe=s["\u0275\u0275definePipe"]({name:"map",type:B,pure:!0}),B),K=["generalSearch"],X=["nameSearch"],W=["phoneSearch"],Z=["addressSearch"];function ee(e,t){1&e&&s["\u0275\u0275element"](0,"img",34)}function te(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",29),s["\u0275\u0275elementStart"](1,"div",30),s["\u0275\u0275elementStart"](2,"div"),s["\u0275\u0275elementStart"](3,"strong"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](5,ee,1,0,"img",31),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div"),s["\u0275\u0275text"](7),s["\u0275\u0275pipe"](8,"map"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div"),s["\u0275\u0275elementStart"](10,"a",32),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]();return e.salesPosService.copyAddressLink(e.salesPosService.personCustomer)}),s["\u0275\u0275text"](11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div"),s["\u0275\u0275elementStart"](13,"button",33),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().unselectPersonCustomer()}),s["\u0275\u0275text"](14,"Cancelar sele\xe7\xe3o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate2"]("",r.salesPosService.personCustomer.name," (",r.salesPosService.personCustomer.id,")"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.salesPosService.personCustomer.isGasCustomer),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](8,6,r.salesPosService.personCustomer.phones,"phone")," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate2"](" ",r.salesPosService.personCustomer.address.description," ",r.salesPosService.personCustomer.address.complement?"(compl: "+r.salesPosService.personCustomer.address.complement+")":""," ")}}function ne(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",35),s["\u0275\u0275text"](1,"#"),s["\u0275\u0275elementEnd"]())}function re(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",36),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](n.id)}}function ae(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",35),s["\u0275\u0275text"](1,"Nome"),s["\u0275\u0275elementEnd"]())}function oe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",36),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function le(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",35),s["\u0275\u0275text"](1,"Telefones"),s["\u0275\u0275elementEnd"]())}function ie(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-chip"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](n)}}function se(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",36),s["\u0275\u0275elementStart"](1,"mat-chip-list"),s["\u0275\u0275template"](2,ie,2,1,"mat-chip",37),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",n.phones)}}function ce(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",35),s["\u0275\u0275text"](1,"Endere\xe7o"),s["\u0275\u0275elementEnd"]())}function de(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"td",36),s["\u0275\u0275elementStart"](1,"a",32),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"]().salesPosService.copyAddressLink(e)}),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate2"](" ",r.addressDescription," ",r.addressComplement?"(compl: "+r.addressComplement+")":""," ")}}function me(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",35),s["\u0275\u0275text"](1,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),s["\u0275\u0275elementEnd"]())}function pe(e,t){1&e&&s["\u0275\u0275element"](0,"img",39)}function ue(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",36),s["\u0275\u0275template"](1,pe,1,0,"img",38),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.isGasCustomer)}}function ve(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",35),s["\u0275\u0275text"](1,"Op\xe7\xf5es"),s["\u0275\u0275elementEnd"]())}function fe(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"td",36),s["\u0275\u0275elementStart"](1,"button",33),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"]().selectPersonCustomer(e)}),s["\u0275\u0275text"](2,"Selecionar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"button",33),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"]().openPersonForm(e.id)}),s["\u0275\u0275elementStart"](4,"mat-icon"),s["\u0275\u0275text"](5,"edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function he(e,t){1&e&&s["\u0275\u0275element"](0,"tr",40)}function Se(e,t){if(1&e&&s["\u0275\u0275element"](0,"tr",41),2&e){var n=t.$implicit,r=s["\u0275\u0275nextContext"]();s["\u0275\u0275styleProp"]("background-color",r.salesPosService.personCustomer&&r.salesPosService.personCustomer.id==n.id?"#efefef":null)}}function ye(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",14),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().loadMore()}),s["\u0275\u0275text"](1,"Mais..."),s["\u0275\u0275elementEnd"]()}}var ge,Ee=((ge=function(){function t(n,r,a,o,l){e(this,t),this._personService=n,this._loader=r,this._toast=a,this._dialog=o,this.salesPosService=l,this.persons=[],this.personSearchFilter={limit:30,index:0},this.tableColumns=["id","name","phones","address","moreInfo","options"]}return n(t,[{key:"ngOnInit",value:function(){}},{key:"getPersons",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,r){e._loader.show(),e._personService.search(e.personSearchFilter).subscribe(function(r){e._loader.dismiss(),t.reset&&(e.personSearchFilter.index=0,e.persons=[]),e.persons=e.persons.concat(r),n()},function(t){e._loader.dismiss(),e._toast.showHttpError(t),r()})})}},{key:"loadMore",value:function(){this.personSearchFilter.index++,this.getPersons()}},{key:"clearFilter",value:function(){this.personSearchFilter.q=null,this.personSearchFilter.name=null,this.personSearchFilter.phone=null,this.personSearchFilter.address=null,this.generalSearchElement.nativeElement.value=null,this.nameSearchElement.nativeElement.value=null,this.phoneSearchElement.nativeElement.value=null,this.addressSearchElement.nativeElement.value=null}},{key:"search",value:function(){this.personSearchFilter.q=this.generalSearchElement.nativeElement.value||null,this.personSearchFilter.name=this.nameSearchElement.nativeElement.value||null,this.personSearchFilter.phone=this.phoneSearchElement.nativeElement.value||null,this.personSearchFilter.address=this.addressSearchElement.nativeElement.value||null,this.personSearchFilter.index=0,this.getPersons({reset:!0})}},{key:"openPersonForm",value:function(e){var t=this;this._dialog.open(V.a,{width:"90%",height:"90%",data:{personId:e}}).afterClosed().subscribe(function(e){e&&e.hasUpdate&&t.getPersons({reset:!0})})}},{key:"selectPersonCustomer",value:function(e){var t=this;this._loader.show(),this._personService.getById(e.id).subscribe(function(e){t._loader.dismiss(),t.salesPosService.personCustomer=e},function(e){t._loader.dismiss(),t._toast.showHttpError(e)})}},{key:"unselectPersonCustomer",value:function(){this.salesPosService.personCustomer=null}}]),t}()).\u0275fac=function(e){return new(e||ge)(s["\u0275\u0275directiveInject"](q.a),s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](Q.b),s["\u0275\u0275directiveInject"](G))},ge.\u0275cmp=s["\u0275\u0275defineComponent"]({type:ge,selectors:[["app-pos-customer"]],viewQuery:function(e,t){var n;1&e&&(s["\u0275\u0275viewQuery"](K,!0),s["\u0275\u0275viewQuery"](X,!0),s["\u0275\u0275viewQuery"](W,!0),s["\u0275\u0275viewQuery"](Z,!0)),2&e&&(s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.generalSearchElement=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.nameSearchElement=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.phoneSearchElement=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.addressSearchElement=n.first))},decls:53,vars:7,consts:[[1,"row"],[1,"col-12"],["matInput","","placeholder","Geral","autocomplete","off",3,"keyup.enter"],["generalSearch",""],[1,"col-md-4"],["matInput","","placeholder","Nome","autocomplete","off",3,"keyup.enter"],["nameSearch",""],["matInput","","placeholder","Telefone","autocomplete","off",3,"keyup.enter"],["phoneSearch",""],["matInput","","placeholder","Endere\xe7o","autocomplete","off",3,"keyup.enter"],["addressSearch",""],["class","col-md-4","style","padding-top: 26px",4,"ngIf"],[1,"row",2,"margin-bottom","15px !important"],["mat-stroked-button","","color","primary",2,"margin-right","15px",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","phones"],["matColumnDef","address"],["matColumnDef","moreInfo"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"backgroundColor",4,"matRowDef","matRowDefColumns"],[2,"text-align","center","padding","10px"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["href","javascript:;","mat-fab","","color","primary",1,"btn-add",3,"click"],[1,"col-md-4",2,"padding-top","26px"],[1,"selected-customer"],["style","width: 8px; width: 9px; margin-left: 4px;","src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",4,"ngIf"],["href","javascript:;",3,"click"],["mat-stroked-button","",3,"click"],["src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",2,"width","8px","width","9px","margin-left","4px"],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],["style","width: 14px;","src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",4,"ngIf"],["src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",2,"width","14px"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"mat-form-field"),s["\u0275\u0275elementStart"](5,"input",2,3),s["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",4),s["\u0275\u0275elementStart"](8,"mat-form-field"),s["\u0275\u0275elementStart"](9,"input",5,6),s["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"div",4),s["\u0275\u0275elementStart"](12,"mat-form-field"),s["\u0275\u0275elementStart"](13,"input",7,8),s["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",4),s["\u0275\u0275elementStart"](16,"mat-form-field"),s["\u0275\u0275elementStart"](17,"input",9,10),s["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](19,te,15,9,"div",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"div",12),s["\u0275\u0275elementStart"](21,"div",1),s["\u0275\u0275elementStart"](22,"button",13),s["\u0275\u0275listener"]("click",function(){return t.clearFilter()}),s["\u0275\u0275text"](23,"Limpar filtros"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"button",14),s["\u0275\u0275listener"]("click",function(){return t.search()}),s["\u0275\u0275text"](25,"Buscar"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"div",0),s["\u0275\u0275elementStart"](27,"table",15),s["\u0275\u0275elementContainerStart"](28,16),s["\u0275\u0275template"](29,ne,2,0,"th",17),s["\u0275\u0275template"](30,re,2,1,"td",18),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](31,19),s["\u0275\u0275template"](32,ae,2,0,"th",17),s["\u0275\u0275template"](33,oe,2,1,"td",18),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](34,20),s["\u0275\u0275template"](35,le,2,0,"th",17),s["\u0275\u0275template"](36,se,3,1,"td",18),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](37,21),s["\u0275\u0275template"](38,ce,2,0,"th",17),s["\u0275\u0275template"](39,de,3,2,"td",18),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](40,22),s["\u0275\u0275template"](41,me,2,0,"th",17),s["\u0275\u0275template"](42,ue,2,1,"td",18),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](43,23),s["\u0275\u0275template"](44,ve,2,0,"th",17),s["\u0275\u0275template"](45,fe,6,0,"td",18),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](46,he,1,0,"tr",24),s["\u0275\u0275template"](47,Se,1,2,"tr",25),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](48,"div",26),s["\u0275\u0275template"](49,ye,2,0,"button",27),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](50,"button",28),s["\u0275\u0275listener"]("click",function(){return t.openPersonForm()}),s["\u0275\u0275elementStart"](51,"mat-icon"),s["\u0275\u0275text"](52,"add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275classMap"](t.salesPosService.personCustomer?"col-md-8":"col-md-12"),s["\u0275\u0275advance"](18),s["\u0275\u0275property"]("ngIf",t.salesPosService.personCustomer),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("dataSource",t.persons),s["\u0275\u0275advance"](19),s["\u0275\u0275property"]("matHeaderRowDef",t.tableColumns),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.tableColumns),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.persons.length>=t.personSearchFilter.limit))},directives:[H.c,U.b,l.k,u.a,p.j,p.c,p.e,p.b,p.g,p.i,L.a,p.d,p.a,Y.b,l.j,Y.a,p.f,p.h],pipes:[J],styles:["table[_ngcontent-%COMP%]{width:100%}.selected-customer[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;font-size:13px;border-radius:4px}.selected-customer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}.btn-add[_ngcontent-%COMP%]{position:fixed;bottom:26px;right:30px}"]}),ge),xe=a("lJxs"),Pe=a("pjuo"),Ce=a("XNiG"),be=a("Kj3r"),Ie=a("/1cH"),we=a("FKr1"),ke=["autocompleteInput"];function Oe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",6),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275property"]("value",n.value),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.label," ")}}var _e,Me=((_e=function(){function t(){e(this,t),this.disabled=!1,this.items=[],this.onInputSubject=new Ce.a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.onInputSubject.pipe(Object(be.a)(300)).subscribe(function(t){return e.options.onGetItems(t).subscribe(function(t){return e.items=t})})}},{key:"onSelectItem",value:function(e){this.selectedItem=this.items.find(function(t){return t.value==e.option.value}),this.autocompleteInput.nativeElement.value=this.selectedItem.label,this.options.onSelectItem(this.selectedItem)}},{key:"onBlur",value:function(){this.autocompleteInput.nativeElement.value=this.selectedItem?this.selectedItem.label:null}},{key:"onFocus",value:function(){this.autocompleteInput.nativeElement.value=null}},{key:"clear",value:function(){this.items=[],this.autocompleteInput.nativeElement.value=null,this.selectedItem=null}}]),t}()).\u0275fac=function(e){return new(e||_e)},_e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:_e,selectors:[["app-autocomplete"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275viewQuery"](ke,!0),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.autocompleteInput=n.first)},inputs:{options:"options",disabled:"disabled"},decls:9,vars:4,consts:[["type","text","autocomplete","off","matInput","",3,"placeholder","matAutocomplete","disabled","input","blur","focus"],["autocompleteInput",""],["mat-icon-button","","matSuffix","",3,"click"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-form-field"),s["\u0275\u0275elementStart"](1,"input",0,1),s["\u0275\u0275listener"]("input",function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275reference"](2);return t.onInputSubject.next(e.value)})("blur",function(){return t.onBlur()})("focus",function(){return t.onFocus()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"button",2),s["\u0275\u0275listener"]("click",function(){return t.clear()}),s["\u0275\u0275elementStart"](4,"mat-icon"),s["\u0275\u0275text"](5,"close"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"mat-autocomplete",3,4),s["\u0275\u0275listener"]("optionSelected",function(e){return t.onSelectItem(e)}),s["\u0275\u0275template"](8,Oe,2,2,"mat-option",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275reference"](7);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("placeholder",null==t.options?null:t.options.placeholder)("matAutocomplete",r)("disabled",t.disabled),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngForOf",t.items)}},directives:[H.c,U.b,Ie.c,u.a,H.g,L.a,Ie.a,l.j,we.k],styles:[""]}),_e),De=["employeeDriverAutocomplete"],Fe=["deliverySchedule"];function Ae(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1," Selecione o cliente para ver o mapa "),s["\u0275\u0275elementEnd"]())}function je(e,t){if(1&e&&s["\u0275\u0275element"](0,"iframe",13),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("src",n.salesPosService.deliveryAddressMapUrl,s["\u0275\u0275sanitizeResourceUrl"])}}function Be(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",8),s["\u0275\u0275elementStart"](1,"div",14),s["\u0275\u0275elementStart"](2,"div"),s["\u0275\u0275elementStart"](3,"strong"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div"),s["\u0275\u0275elementStart"](6,"button",15),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().unselectEmployeeDriver()}),s["\u0275\u0275text"](7,"Cancelar sele\xe7\xe3o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate2"]("",r.salesPosService.employeeDriver.name," (",r.salesPosService.personCustomer.id,")")}}var Te,Ve,qe=((Te=function(){function t(n,r){var a=this;e(this,t),this.salesPosService=n,this._employeeService=r,this.employeeDriverSearchAutocompleteOptions={placeholder:"Entregador",onGetItems:function(e){return a.employeeDriverSearchAutocompleteOnGetItems(e)},onSelectItem:function(e){return a.employeeDriverSearchAutocompleteOnSelectItem(e)}}}return n(t,[{key:"ngOnInit",value:function(){}},{key:"employeeDriverSearchAutocompleteOnGetItems",value:function(e){return this._employeeService.getAll({index:0,limit:8,q:e,isDriver:!0}).pipe(Object(xe.a)(function(e){return e.map(function(e){return{label:e.name,value:e}})}))}},{key:"employeeDriverSearchAutocompleteOnSelectItem",value:function(e){this.salesPosService.employeeDriver=e.value,this.employeeDriverAutocomplete.clear()}},{key:"unselectEmployeeDriver",value:function(){this.salesPosService.employeeDriver=null}},{key:"onDefineDeliverySchedule",value:function(){this.salesPosService.deliverySchedule=v(this.deliveryScheduleElement.nativeElement.value)}}]),t}()).\u0275fac=function(e){return new(e||Te)(s["\u0275\u0275directiveInject"](G),s["\u0275\u0275directiveInject"](Pe.a))},Te.\u0275cmp=s["\u0275\u0275defineComponent"]({type:Te,selectors:[["app-pos-delivery"]],viewQuery:function(e,t){var n;1&e&&(s["\u0275\u0275viewQuery"](De,!0),s["\u0275\u0275viewQuery"](Fe,!0)),2&e&&(s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.employeeDriverAutocomplete=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.deliveryScheduleElement=n.first))},decls:17,vars:8,consts:[[1,"row"],[1,"col-6",2,"height","100vh"],[4,"ngIf"],["class","map","frameborder","0","style","border:0;","allowfullscreen","","aria-hidden","false","tabindex","0",3,"src",4,"ngIf"],[1,"col-6",2,"padding-top","5px"],[3,"disabled","options"],["employeeDriverAutocomplete",""],["class","col-6",4,"ngIf"],[1,"col-6"],["matInput","","type","datetime-local","placeholder","Agendamento de entrega","autocomplete","off",3,"value","input"],["deliverySchedule",""],[1,"col-2"],[2,"cursor","pointer","margin-top","24px",3,"click"],["frameborder","0","allowfullscreen","","aria-hidden","false","tabindex","0",1,"map",2,"border","0",3,"src"],[1,"selected-driver"],["mat-stroked-button","",3,"click"]],template:function(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275template"](2,Ae,2,0,"span",2),s["\u0275\u0275template"](3,je,1,1,"iframe",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275elementStart"](5,"div",0),s["\u0275\u0275elementStart"](6,"div"),s["\u0275\u0275element"](7,"app-autocomplete",5,6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](9,Be,8,2,"div",7),s["\u0275\u0275elementStart"](10,"div",8),s["\u0275\u0275elementStart"](11,"mat-form-field"),s["\u0275\u0275elementStart"](12,"input",9,10),s["\u0275\u0275listener"]("input",function(){return t.onDefineDeliverySchedule()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",11),s["\u0275\u0275elementStart"](15,"mat-icon",12),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275reference"](13).value=null,t.onDefineDeliverySchedule()}),s["\u0275\u0275text"](16,"close"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!t.salesPosService.tabsOk.customer()),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.salesPosService.tabsOk.customer()),s["\u0275\u0275advance"](3),s["\u0275\u0275classMap"](t.salesPosService.employeeDriver?"col-6":"col-12"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",!t.salesPosService.tabsOk.customer())("options",t.employeeDriverSearchAutocompleteOptions),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.salesPosService.employeeDriver),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("value",null==t.salesPosService.deliverySchedule?null:t.salesPosService.deliverySchedule.toDate()))},directives:[l.k,Me,H.c,U.b,L.a,u.a],styles:[".map[_ngcontent-%COMP%]{width:100%;height:100%}.selected-driver[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;font-size:13px;border-radius:4px}.selected-driver[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}"]}),Te),Qe=a("d3UM"),Re=((Ve=function(){function t(){e(this,t)}return n(t,[{key:"transform",value:function(e){return null!=e?"R$ "+e.toFixed(2).replace(".",","):"-"}}]),t}()).\u0275fac=function(e){return new(e||Ve)},Ve.\u0275pipe=s["\u0275\u0275definePipe"]({name:"money",type:Ve,pure:!0}),Ve),$e=["paymentMethod"],ze=["installments"];function Ne(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",9),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275property"]("value",n.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Ge(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," N\xfamero de parcelas deve ser superior ou igual a 1 "),s["\u0275\u0275elementEnd"]())}function He(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",1),s["\u0275\u0275elementStart"](1,"mat-form-field"),s["\u0275\u0275elementStart"](2,"input",10,11),s["\u0275\u0275listener"]("input",function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onDefineInstallments()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](4,Ge,2,0,"mat-error",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("value",r.salesPosService.paymentInstallments||1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",r.salesPosService.paymentInstallments<=0)}}function Ue(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",7),s["\u0275\u0275elementStart"](1,"div",13),s["\u0275\u0275elementStart"](2,"span"),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"span",14),s["\u0275\u0275text"](5),s["\u0275\u0275pipe"](6,"money"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"]("",n.salesPosService.paymentInstallments,"x "),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](6,2,n.salesPosService.productsTotalPrice/n.salesPosService.paymentInstallments)," ")}}function Le(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",15),s["\u0275\u0275elementStart"](1,"span"),s["\u0275\u0275text"](2,"Total: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"span",16),s["\u0275\u0275text"](4),s["\u0275\u0275pipe"](5,"money"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](5,1,n.salesPosService.productsTotalPrice)," ")}}var Ye,Je,Ke=((Ye=function(){function t(n){e(this,t),this.salesPosService=n}return n(t,[{key:"ngOnInit",value:function(){}},{key:"onSelectPaymentMethod",value:function(){var e=this;this.salesPosService.paymentMethod=this.salesPosService.paymentMethods.find(function(t){return t.id==e.paymentMethodElement.value})}},{key:"onDefineInstallments",value:function(){this.salesPosService.paymentInstallments=this.installmentsElement.nativeElement.value}}]),t}()).\u0275fac=function(e){return new(e||Ye)(s["\u0275\u0275directiveInject"](G))},Ye.\u0275cmp=s["\u0275\u0275defineComponent"]({type:Ye,selectors:[["app-pos-payment"]],viewQuery:function(e,t){var n;1&e&&(s["\u0275\u0275viewQuery"]($e,!0),s["\u0275\u0275viewQuery"](ze,!0)),2&e&&(s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.paymentMethodElement=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.installmentsElement=n.first))},decls:12,vars:5,consts:[[1,"row"],[1,"col-4"],[3,"disabled","selectionChange"],["paymentMethod",""],[3,"value",4,"ngFor","ngForOf"],["class","col-4",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12"],["style","font-size: 23px;",4,"ngIf"],[3,"value"],["matInput","","placeholder","N\xfamero de parcelas","autocomplete","off","type","number",3,"value","input"],["installments",""],[4,"ngIf"],[2,"font-size","19px"],[2,"font-weight","bold"],[2,"font-size","23px"],[2,"font-weight","bold","color","var(--color-alizarin)"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"mat-form-field"),s["\u0275\u0275elementStart"](3,"mat-label"),s["\u0275\u0275text"](4,"Tipo de pagamento"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"mat-select",2,3),s["\u0275\u0275listener"]("selectionChange",function(){return t.onSelectPaymentMethod()}),s["\u0275\u0275template"](7,Ne,2,2,"mat-option",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](8,He,5,2,"div",5),s["\u0275\u0275template"](9,Ue,7,4,"div",6),s["\u0275\u0275elementStart"](10,"div",7),s["\u0275\u0275template"](11,Le,6,3,"div",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("disabled",!t.salesPosService.tabsOk.products()),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",t.salesPosService.paymentMethods),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",null==t.salesPosService.paymentMethod?null:t.salesPosService.paymentMethod.hasInstallments),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.salesPosService.paymentInstallments>1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.salesPosService.tabsOk.products()))},directives:[H.c,H.f,Qe.a,l.j,l.k,we.k,U.b,H.b],pipes:[Re],styles:[""]}),Ye),Xe=a("3Pt+"),We=a("Gdn9"),Ze=a("f0Cb"),et=((Je=function(){function t(n){e(this,t),this.ngControl=n}return n(t,[{key:"disableControl",set:function(e){var t=this,n=e?"disable":"enable";setTimeout(function(){return t.ngControl.control[n]()})}}]),t}()).\u0275fac=function(e){return new(e||Je)(s["\u0275\u0275directiveInject"](Xe.k,2))},Je.\u0275dir=s["\u0275\u0275defineDirective"]({type:Je,selectors:[["","disableControl",""]],inputs:{disableControl:"disableControl"}}),Je),tt=["companyBranch"],nt=["productAutocomplete"];function rt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",28),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275property"]("value",n.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate2"](" ",n.name," - ",n.tradeName," ")}}function at(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",28),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275property"]("value",n.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function ot(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),s["\u0275\u0275elementEnd"]())}function lt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Campo inv\xe1lido "),s["\u0275\u0275elementEnd"]())}function it(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Campo inv\xe1lido "),s["\u0275\u0275elementEnd"]())}function st(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td"),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td"),s["\u0275\u0275text"](12),s["\u0275\u0275pipe"](13,"money"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"td"),s["\u0275\u0275elementStart"](15,"a",29),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=t.index;return s["\u0275\u0275nextContext"]().editProduct(e)}),s["\u0275\u0275elementStart"](16,"mat-icon"),s["\u0275\u0275text"](17,"edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"a",29),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=t.index;return s["\u0275\u0275nextContext"]().removeProduct(e)}),s["\u0275\u0275elementStart"](19,"mat-icon"),s["\u0275\u0275text"](20,"close"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](r.companyBranchProduct.product.code),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](r.companyBranchProduct.product.name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](r.price.name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](r.salePriceValue),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](r.quantity),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](13,6,r.quantity*r.price.salePrice))}}var ct,dt=((ct=function(){function t(n,r,a,o){var l=this;e(this,t),this._loader=n,this._toast=r,this.salesPosService=a,this._productService=o,this.productSearchAutocompleteOptions={placeholder:"Busca",onGetItems:function(e){return l.productSearchAutocompleteOnGetItems(e)},onSelectItem:function(e){return l.productSearchAutocompleteOnSelectItem(e)}},this.initForm()}return n(t,[{key:"ngOnInit",value:function(){}},{key:"initForm",value:function(){this.addProductForm=new Xe.f({price:new Xe.d(null,Xe.q.required),salePriceValue:new Xe.d(0,[Xe.q.required,Xe.q.min(0)]),quantity:new Xe.d(1,Xe.q.required)})}},{key:"productSearchAutocompleteOnGetItems",value:function(e){return this._productService.getAllForSales({index:0,limit:8,q:e},this.companyBranchElement.value).pipe(Object(xe.a)(function(e){return e.map(function(e){return{label:"".concat(e.product.code," - ").concat(e.product.name),value:e}})}))}},{key:"productSearchAutocompleteOnSelectItem",value:function(e){this.productToAdd=e.value,this.productAutocomplete.clear()}},{key:"onSelectPrice",value:function(){var e=this,t=this.productToAdd.prices.find(function(t){return t.id==e.addProductForm.get("price").value});this.addProductForm.get("salePriceValue").setValue(t.salePrice)}},{key:"addProduct",value:function(){var e=this;if(!this.productToAdd)throw this._toast.open("Nenhum produto selecionado"),new Error("Not selected product");if(!this.addProductForm.valid)throw this.addProductForm.markAllAsTouched(),this._toast.open("Preencha todos os campos obrigat\xf3rios"),new Error("Not selected product");var t=this.productToAdd.prices.find(function(t){return t.id==e.addProductForm.get("price").value}),n={companyBranchProduct:this.productToAdd,price:t,salePriceValue:this.addProductForm.get("salePriceValue").value,quantity:this.addProductForm.get("quantity").value};this.salesPosService.products.push(n),this.productToAdd=null}},{key:"editProduct",value:function(e){var t=this.salesPosService.products[e];this.productToAdd=t.companyBranchProduct,this.addProductForm.get("price").setValue(t.price.id),this.addProductForm.get("salePriceValue").setValue(t.salePriceValue),this.addProductForm.get("quantity").setValue(t.quantity),this.removeProduct(e)}},{key:"removeProduct",value:function(e){this.salesPosService.products.splice(e,1)}},{key:"onSelectCompanyBranch",value:function(){var e=this;this.salesPosService.companyBranch=this.salesPosService.companyBranches.find(function(t){return t.id==e.companyBranchElement.value})}}]),t}()).\u0275fac=function(e){return new(e||ct)(s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](G),s["\u0275\u0275directiveInject"](We.a))},ct.\u0275cmp=s["\u0275\u0275defineComponent"]({type:ct,selectors:[["app-pos-products"]],viewQuery:function(e,t){var n;1&e&&(s["\u0275\u0275viewQuery"](tt,!0),s["\u0275\u0275viewQuery"](nt,!0)),2&e&&(s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.companyBranchElement=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.productAutocomplete=n.first))},decls:73,vars:18,consts:[[1,"row"],[1,"col-6",2,"border-right","2px solid #ddd","height","100vh"],[1,"col-12"],[3,"value","selectionChange"],["companyBranch",""],[3,"value",4,"ngFor","ngForOf"],[3,"disabled","options"],["productAutocomplete",""],[3,"formGroup"],[1,"row",2,"padding-top","14px",3,"hidden"],[1,"product-category"],[1,"product-code"],[1,"col-8"],["formControlName","price",3,"selectionChange"],["price",""],[4,"ngIf"],[1,"col-4"],["type","number","matInput","","placeholder","Pre\xe7o","formControlName","salePriceValue","autocomplete","off",3,"disableControl"],["salePriceValue",""],["type","number","matInput","","placeholder","Quantidade","formControlName","quantity","autocomplete","off"],["quantity",""],[1,"col-sm-12"],["mat-flat-button","","color","primary",3,"click"],[1,"col-6"],[1,"products-table"],[4,"ngFor","ngForOf"],["colspan","5"],["colspan","2",2,"font-weight","bold","color","var(--color-alizarin)"],[3,"value"],["href","javascript:;",3,"click"]],template:function(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"div",0),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"mat-form-field"),s["\u0275\u0275elementStart"](5,"mat-label"),s["\u0275\u0275text"](6,"Unidade"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"mat-select",3,4),s["\u0275\u0275listener"]("selectionChange",function(){return t.onSelectCompanyBranch()}),s["\u0275\u0275template"](9,rt,2,3,"mat-option",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",2),s["\u0275\u0275element"](11,"app-autocomplete",6,7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](13,"mat-divider"),s["\u0275\u0275elementStart"](14,"form",8),s["\u0275\u0275elementStart"](15,"div",9),s["\u0275\u0275elementStart"](16,"div",2),s["\u0275\u0275elementStart"](17,"h3"),s["\u0275\u0275text"](18),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"div",2),s["\u0275\u0275elementStart"](20,"h4",10),s["\u0275\u0275text"](21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",2),s["\u0275\u0275elementStart"](23,"h4",11),s["\u0275\u0275text"](24),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"div",12),s["\u0275\u0275elementStart"](26,"mat-form-field"),s["\u0275\u0275elementStart"](27,"mat-label"),s["\u0275\u0275text"](28,"Tipo de pre\xe7o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"mat-select",13,14),s["\u0275\u0275listener"]("selectionChange",function(){return t.onSelectPrice()}),s["\u0275\u0275template"](31,at,2,2,"mat-option",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](32,ot,2,0,"mat-error",15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"div",16),s["\u0275\u0275elementStart"](34,"mat-form-field"),s["\u0275\u0275element"](35,"input",17,18),s["\u0275\u0275template"](37,lt,2,0,"mat-error",15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](38,"div",16),s["\u0275\u0275elementStart"](39,"mat-form-field"),s["\u0275\u0275element"](40,"input",19,20),s["\u0275\u0275template"](42,it,2,0,"mat-error",15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"div",21),s["\u0275\u0275elementStart"](44,"button",22),s["\u0275\u0275listener"]("click",function(){return t.addProduct()}),s["\u0275\u0275text"](45,"Incluir produto"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](46,"div",23),s["\u0275\u0275elementStart"](47,"div",0),s["\u0275\u0275elementStart"](48,"div",2),s["\u0275\u0275elementStart"](49,"table",24),s["\u0275\u0275elementStart"](50,"thead"),s["\u0275\u0275elementStart"](51,"tr"),s["\u0275\u0275elementStart"](52,"th"),s["\u0275\u0275text"](53,"C\xf3d"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](54,"th"),s["\u0275\u0275text"](55,"Produto"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](56,"th"),s["\u0275\u0275text"](57,"Tip. pre\xe7o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](58,"th"),s["\u0275\u0275text"](59,"Pre\xe7o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](60,"th"),s["\u0275\u0275text"](61,"Qtd"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](62,"th"),s["\u0275\u0275text"](63,"Total"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](64,"th"),s["\u0275\u0275text"](65,"Opt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](66,"tbody"),s["\u0275\u0275template"](67,st,21,8,"tr",25),s["\u0275\u0275elementStart"](68,"tr"),s["\u0275\u0275element"](69,"td",26),s["\u0275\u0275elementStart"](70,"td",27),s["\u0275\u0275text"](71),s["\u0275\u0275pipe"](72,"money"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275reference"](8),r=s["\u0275\u0275reference"](30),a=s["\u0275\u0275reference"](36),o=s["\u0275\u0275reference"](41);s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("value",null==t.salesPosService.companyBranch?null:t.salesPosService.companyBranch.id),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",t.salesPosService.companyBranches),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("disabled",!n.value)("options",t.productSearchAutocompleteOptions),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("formGroup",t.addProductForm),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("hidden",!t.productToAdd),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](null==t.productToAdd?null:t.productToAdd.product.name),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"]("Categoria: ",null==t.productToAdd?null:t.productToAdd.product.category.name,""),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"]("C\xf3d: ",null==t.productToAdd?null:t.productToAdd.product.code,""),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngForOf",null==t.productToAdd?null:t.productToAdd.prices),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.addProductForm.get("price").valid),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("disableControl",!r.value),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",a),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",!o.valid),s["\u0275\u0275advance"](25),s["\u0275\u0275property"]("ngForOf",t.salesPosService.products),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](72,16,t.salesPosService.productsTotalPrice)," ")}},directives:[H.c,H.f,Qe.a,l.j,Me,Ze.a,Xe.r,Xe.m,Xe.g,Xe.l,Xe.e,l.k,Xe.o,U.b,Xe.c,et,u.a,we.k,H.b,L.a],pipes:[Re],styles:[".price[_ngcontent-%COMP%]{font-size:24px;color:var(--color-alizarin);font-weight:700;margin-top:17px}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd}.product-category[_ngcontent-%COMP%], .product-code[_ngcontent-%COMP%]{font-size:16px;text-transform:uppercase;color:#888;font-weight:700}"]}),ct);function mt(e,t){1&e&&s["\u0275\u0275element"](0,"img",17)}function pt(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275elementStart"](2,"strong"),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](4,mt,1,0,"img",15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div"),s["\u0275\u0275text"](6),s["\u0275\u0275pipe"](7,"map"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div"),s["\u0275\u0275elementStart"](9,"a",16),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]();return e.salesPosService.copyAddressLink(e.salesPosService.personCustomer)}),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate2"]("",r.salesPosService.personCustomer.name," (",r.salesPosService.personCustomer.id,")"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.salesPosService.personCustomer.isGasCustomer),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](7,6,r.salesPosService.personCustomer.phones,"phone")," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate2"](" ",r.salesPosService.personCustomer.address.description," ",r.salesPosService.personCustomer.address.complement?"(compl: "+r.salesPosService.personCustomer.address.complement+")":""," ")}}function ut(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"td"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"td"),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"td"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"td"),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"td"),s["\u0275\u0275text"](12),s["\u0275\u0275pipe"](13,"money"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n.companyBranchProduct.product.code),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n.companyBranchProduct.product.name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n.price.name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n.salePriceValue),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n.quantity),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](13,6,n.quantity*n.price.salePrice))}}function vt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" Agendamento: ",n.salesPosService.deliveryScheduleFormatted," ")}}function ft(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275elementStart"](2,"strong"),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](4,vt,2,1,"div",3),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate2"]("",n.salesPosService.employeeDriver.name," (",n.salesPosService.personCustomer.id,")"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.salesPosService.deliverySchedule)}}function ht(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",20),s["\u0275\u0275elementStart"](1,"span"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"span",21),s["\u0275\u0275text"](4),s["\u0275\u0275pipe"](5,"money"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("",n.salesPosService.paymentInstallments,"x "),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](5,2,n.salesPosService.productsTotalPrice/n.salesPosService.paymentInstallments)," ")}}function St(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275elementStart"](2,"strong"),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](4,ht,6,4,"div",18),s["\u0275\u0275elementStart"](5,"div",19),s["\u0275\u0275elementStart"](6,"span"),s["\u0275\u0275text"](7,"Total: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"span",8),s["\u0275\u0275text"](9),s["\u0275\u0275pipe"](10,"money"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](n.salesPosService.paymentMethod.name),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.salesPosService.paymentInstallments>1),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](10,3,n.salesPosService.productsTotalPrice)," ")}}var yt,gt=((yt=function(){function t(n,r,a,o,l){e(this,t),this.salesPosService=n,this._toast=r,this._loader=a,this._saleOrderService=o,this._router=l}return n(t,[{key:"ngOnInit",value:function(){}},{key:"generateSaleOrder",value:function(){var e=this;this.verifyErrors(!0);var t={companyBranchId:this.salesPosService.companyBranch.id,employeeDriverId:this.salesPosService.employeeDriver.id,personCustomerId:this.salesPosService.personCustomer.id,paymentMethodId:this.salesPosService.paymentMethod.id,paymentInstallments:this.salesPosService.paymentMethod.hasInstallments?this.salesPosService.paymentInstallments||1:null,scheduledAt:this.salesPosService.deliverySchedule?v(this.salesPosService.deliverySchedule).format("YYYY-MM-DD HH:mm:ss"):null,products:this.salesPosService.products.map(function(e){return{companyBranchProductId:e.companyBranchProduct.id,companyBranchProductPriceId:e.price.id,quantity:e.quantity,salePrice:e.salePriceValue}})};this._loader.show(),this._saleOrderService.create(t).subscribe(function(t){e._loader.dismiss(),e._toast.open("Pedido #".concat(t.id," gerado com sucesso"),"success"),e.salesPosService.reset(),e._router.navigate(["/sales/pos"])},function(t){e._loader.dismiss(),e._toast.showHttpError(t)})}},{key:"verifyErrors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];if(this.salesPosService.companyBranch||t.push("Unidade da empresa n\xe3o definida"),this.salesPosService.employeeDriver||t.push("Entregador n\xe3o definido"),this.salesPosService.personCustomer||t.push("Cliente n\xe3o definido"),this.salesPosService.paymentMethod||t.push("M\xe9todo de pagamento n\xe3o definido"),this.salesPosService.products.length<=0&&t.push("Nenhum produto definido"),t.length>0)throw e&&this._toast.open(t.join(" | "),"error"),new Error(t.join(" | "))}}]),t}()).\u0275fac=function(e){return new(e||yt)(s["\u0275\u0275directiveInject"](G),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](m.a),s["\u0275\u0275directiveInject"](i.b))},yt.\u0275cmp=s["\u0275\u0275defineComponent"]({type:yt,selectors:[["app-pos-summary"]],decls:46,vars:7,consts:[[1,"row"],[1,"col-md-4"],[1,"selected-customer"],[4,"ngIf"],[1,"col-8"],[1,"products-table"],[4,"ngFor","ngForOf"],["colspan","5"],[2,"font-weight","bold","color","var(--color-alizarin)"],[1,"row",2,"margin-top","10px !important"],[1,"col-6"],[1,"selected-driver"],[1,"payment"],[1,"col-12"],["mat-flat-button","","color","primary",2,"margin-top","23px",3,"click"],["style","width: 8px; width: 9px; margin-left: 4px;","src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",4,"ngIf"],["href","javascript:;",3,"click"],["src","/assets/images/gas-cylinder-icon.png","title","Cliente de g\xe1s",2,"width","8px","width","9px","margin-left","4px"],["style","font-size: 19px;",4,"ngIf"],[2,"font-size","23px"],[2,"font-size","19px"],[2,"font-weight","bold"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"h4"),s["\u0275\u0275text"](3,"Cliente"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",2),s["\u0275\u0275template"](5,pt,11,9,"div",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",4),s["\u0275\u0275elementStart"](7,"h4"),s["\u0275\u0275text"](8,"Produtos"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"table",5),s["\u0275\u0275elementStart"](10,"thead"),s["\u0275\u0275elementStart"](11,"tr"),s["\u0275\u0275elementStart"](12,"th"),s["\u0275\u0275text"](13,"C\xf3d"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"th"),s["\u0275\u0275text"](15,"Produto"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"th"),s["\u0275\u0275text"](17,"Tip. pre\xe7o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"th"),s["\u0275\u0275text"](19,"Pre\xe7o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"th"),s["\u0275\u0275text"](21,"Qtd"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"th"),s["\u0275\u0275text"](23,"Total"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"tbody"),s["\u0275\u0275template"](25,ut,14,8,"tr",6),s["\u0275\u0275elementStart"](26,"tr"),s["\u0275\u0275element"](27,"td",7),s["\u0275\u0275elementStart"](28,"td",8),s["\u0275\u0275text"](29),s["\u0275\u0275pipe"](30,"money"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](31,"div",9),s["\u0275\u0275elementStart"](32,"div",10),s["\u0275\u0275elementStart"](33,"h4"),s["\u0275\u0275text"](34,"Entrega"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](35,"div",11),s["\u0275\u0275template"](36,ft,5,3,"div",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"div",10),s["\u0275\u0275elementStart"](38,"h4"),s["\u0275\u0275text"](39,"Pagamento"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](40,"div",12),s["\u0275\u0275template"](41,St,11,5,"div",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](42,"div",0),s["\u0275\u0275elementStart"](43,"div",13),s["\u0275\u0275elementStart"](44,"button",14),s["\u0275\u0275listener"]("click",function(){return t.generateSaleOrder()}),s["\u0275\u0275text"](45," Gerar pedido "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",t.salesPosService.tabsOk.customer()),s["\u0275\u0275advance"](20),s["\u0275\u0275property"]("ngForOf",t.salesPosService.products),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](30,5,t.salesPosService.productsTotalPrice)," "),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngIf",t.salesPosService.tabsOk.delivery()),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",t.salesPosService.tabsOk.payment()))},directives:[l.k,l.j,u.a],pipes:[Re,J],styles:[".selected-customer[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;font-size:13px;border-radius:4px}.selected-customer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected-driver[_ngcontent-%COMP%]{border:1px solid #ddd}.selected-driver[_ngcontent-%COMP%]{padding:11px;font-size:13px;border-radius:4px}.selected-driver[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}.payment[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;border-radius:4px}"]}),yt),Et=a("wZkO");function xt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"a",3),s["\u0275\u0275elementStart"](1,"span"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275property"]("routerLink",n.route),s["\u0275\u0275advance"](1),s["\u0275\u0275classProp"]("tab-label-success",n.validator()),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](n.label)}}var Pt,Ct,bt,It,wt=((Pt=function(){function t(n){var r=this;e(this,t),this.salesPosService=n,this.tabs=[{label:"Cliente",route:"/sales/pos/customer",validator:function(){return r.salesPosService.tabsOk.customer()}},{label:"Produtos",route:"/sales/pos/products",validator:function(){return r.salesPosService.tabsOk.products()}},{label:"Entrega",route:"/sales/pos/delivery",validator:function(){return r.salesPosService.tabsOk.delivery()}},{label:"Pagamento",route:"/sales/pos/payment",validator:function(){return r.salesPosService.tabsOk.payment()}},{label:"Finalizar",route:"/sales/pos/summary",validator:function(){return!1}}]}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||Pt)(s["\u0275\u0275directiveInject"](G))},Pt.\u0275cmp=s["\u0275\u0275defineComponent"]({type:Pt,selectors:[["app-sales-pos"]],decls:4,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","","routerLinkActive","tab-active","style","text-decoration: none;",3,"routerLink",4,"ngFor","ngForOf"],[2,"height","64px"],["mat-tab-link","","routerLinkActive","tab-active",2,"text-decoration","none",3,"routerLink"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nav",0),s["\u0275\u0275template"](1,xt,3,4,"a",1),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](2,"div",2),s["\u0275\u0275element"](3,"router-outlet")),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.tabs))},directives:[Et.b,l.j,i.g,i.e,Et.a,i.d],styles:[".tab-label-success[_ngcontent-%COMP%]{color:var(--green)!important;font-weight:700!important}.tab-active[_ngcontent-%COMP%]{font-weight:700;color:#000;opacity:1;background-color:#f5f5f5}nav[_ngcontent-%COMP%]{position:fixed;background:#fff;z-index:999;width:100%}"]}),Pt),kt=[{path:"",component:(Ct=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}(),Ct.\u0275fac=function(e){return new(e||Ct)},Ct.\u0275cmp=s["\u0275\u0275defineComponent"]({type:Ct,selectors:[["app-sales"]],decls:1,vars:0,template:function(e,t){1&e&&s["\u0275\u0275element"](0,"router-outlet")},directives:[i.g],styles:[""]}),Ct),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"pos",component:wt,children:[{path:"",pathMatch:"full",redirectTo:"customer"},{path:"customer",component:Ee},{path:"products",component:dt},{path:"delivery",component:qe},{path:"payment",component:Ke},{path:"summary",component:gt}]},{path:"orders",component:T}]}],Ot=((bt=function t(){e(this,t)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:bt}),bt.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||bt)},imports:[[i.f.forChild(kt)],i.f]}),bt),_t=a("PCNd"),Mt=a("ssao"),Dt=a("iTUp"),Ft=a("FUS3"),At=((It=function t(){e(this,t)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:It}),It.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||It)},providers:[G],imports:[[l.b,_t.a,Mt.a,Dt.a,Ot,Xe.p,Ft.a]]}),It)}}])}();