!function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{U1Ny:function(e,r,o){"use strict";o.r(r),o.d(r,"SalesModule",function(){return je});var a,l,i=o("ofXK"),c=o("tyNb"),d=o("fXoL"),s=o("wZkO"),m=o("aHvM"),u=o("TmGi"),p=o("5dVO"),f=o("2g2N"),v=o("0IaG"),h=((a=function e(){n(this,e),this.products=[]}).\u0275fac=function(e){return new(e||a)},a.\u0275prov=d["\u0275\u0275defineInjectable"]({token:a,factory:a.\u0275fac}),a),S=o("kmnG"),y=o("qFsG"),E=o("bTqV"),x=o("+0xr"),b=o("NFeN"),g=o("A5z7"),C=((l=function(){function e(){n(this,e)}return t(e,[{key:"transform",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:", ";return e.map(function(e){return t?e[t]:e}).join(n)}}]),e}()).\u0275fac=function(e){return new(e||l)},l.\u0275pipe=d["\u0275\u0275definePipe"]({name:"map",type:l,pure:!0}),l),w=["generalSearch"],I=["nameSearch"],P=["phoneSearch"],k=["addressSearch"];function O(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",28),d["\u0275\u0275elementStart"](1,"div",29),d["\u0275\u0275elementStart"](2,"div"),d["\u0275\u0275elementStart"](3,"strong"),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"div"),d["\u0275\u0275text"](6),d["\u0275\u0275pipe"](7,"map"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"div"),d["\u0275\u0275elementStart"](9,"a",30),d["\u0275\u0275listener"]("click",function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"]();return e.copyAddressLink(e.salesPosService.personCustomer)}),d["\u0275\u0275text"](10),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"div"),d["\u0275\u0275elementStart"](12,"button",31),d["\u0275\u0275listener"]("click",function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().unselectPersonCustomer()}),d["\u0275\u0275text"](13,"Cancelar sele\xe7\xe3o"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){var r=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate2"]("",r.salesPosService.personCustomer.name," (",r.salesPosService.personCustomer.id,")"),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind2"](7,5,r.salesPosService.personCustomer.phones,"phone")," "),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate2"](" ",r.salesPosService.personCustomer.address.description," ",r.salesPosService.personCustomer.address.complement?"(compl: "+r.salesPosService.personCustomer.address.complement+")":""," ")}}function F(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"th",32),d["\u0275\u0275text"](1,"#"),d["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"td",33),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](n.id)}}function A(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"th",32),d["\u0275\u0275text"](1,"Nome"),d["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"td",33),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function q(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"th",32),d["\u0275\u0275text"](1,"Telefones"),d["\u0275\u0275elementEnd"]())}function T(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"mat-chip"),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](n)}}function B(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"td",33),d["\u0275\u0275elementStart"](1,"mat-chip-list"),d["\u0275\u0275template"](2,T,2,1,"mat-chip",34),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",n.phones)}}function Q(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"th",32),d["\u0275\u0275text"](1,"Endere\xe7o"),d["\u0275\u0275elementEnd"]())}function M(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"td",33),d["\u0275\u0275elementStart"](1,"a",30),d["\u0275\u0275listener"]("click",function(){d["\u0275\u0275restoreView"](n);var e=t.$implicit;return d["\u0275\u0275nextContext"]().copyAddressLink(e)}),d["\u0275\u0275text"](2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate2"](" ",r.addressDescription," ",r.addressComplement?"(compl: "+r.addressComplement+")":""," ")}}function N(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"th",32),d["\u0275\u0275text"](1,"Op\xe7\xf5es"),d["\u0275\u0275elementEnd"]())}function R(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"td",33),d["\u0275\u0275elementStart"](1,"button",31),d["\u0275\u0275listener"]("click",function(){d["\u0275\u0275restoreView"](n);var e=t.$implicit;return d["\u0275\u0275nextContext"]().selectPersonCustomer(e)}),d["\u0275\u0275text"](2,"Selecionar"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"button",31),d["\u0275\u0275listener"]("click",function(){d["\u0275\u0275restoreView"](n);var e=t.$implicit;return d["\u0275\u0275nextContext"]().openPersonForm(e.id)}),d["\u0275\u0275elementStart"](4,"mat-icon"),d["\u0275\u0275text"](5,"edit"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}function V(e,t){1&e&&d["\u0275\u0275element"](0,"tr",35)}function D(e,t){if(1&e&&d["\u0275\u0275element"](0,"tr",36),2&e){var n=t.$implicit,r=d["\u0275\u0275nextContext"]();d["\u0275\u0275styleProp"]("background-color",r.salesPosService.personCustomer&&r.salesPosService.personCustomer.id==n.id?"#efefef":null)}}function $(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",14),d["\u0275\u0275listener"]("click",function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().loadMore()}),d["\u0275\u0275text"](1,"Mais..."),d["\u0275\u0275elementEnd"]()}}var G,z=((G=function(){function e(t,r,o,a,l){n(this,e),this._personService=t,this._loader=r,this._toast=o,this._dialog=a,this.salesPosService=l,this.persons=[],this.personSearchFilter={limit:30,index:0},this.tableColumns=["id","name","phones","address","options"]}return t(e,[{key:"ngOnInit",value:function(){}},{key:"getPersons",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,r){e._loader.show(),e._personService.search(e.personSearchFilter).subscribe(function(r){e._loader.dismiss(),t.reset&&(e.personSearchFilter.index=0,e.persons=[]),e.persons=e.persons.concat(r),n()},function(t){e._loader.dismiss(),e._toast.showError(t),r()})})}},{key:"loadMore",value:function(){this.personSearchFilter.index++,this.getPersons()}},{key:"clearFilter",value:function(){this.personSearchFilter.q=null,this.personSearchFilter.name=null,this.personSearchFilter.phone=null,this.personSearchFilter.address=null}},{key:"search",value:function(){this.personSearchFilter.q=this.generalSearchElement.nativeElement.value||null,this.personSearchFilter.name=this.nameSearchElement.nativeElement.value||null,this.personSearchFilter.phone=this.phoneSearchElement.nativeElement.value||null,this.personSearchFilter.address=this.addressSearchElement.nativeElement.value||null,this.personSearchFilter.index=0,this.getPersons({reset:!0})}},{key:"openPersonForm",value:function(e){var t=this;this._dialog.open(m.a,{width:"90%",height:"90%",data:{personId:e}}).afterClosed().subscribe(function(e){e&&e.hasUpdate&&t.getPersons({reset:!0})})}},{key:"selectPersonCustomer",value:function(e){var t=this;this._loader.show(),this._personService.getById(e.id).subscribe(function(e){t._loader.dismiss(),t.salesPosService.personCustomer=e},function(e){t._loader.dismiss(),t._toast.showError(e)})}},{key:"unselectPersonCustomer",value:function(){this.salesPosService.personCustomer=null}},{key:"copyAddressLink",value:function(e){var t,n;if(e.addressDescription){var r=e;t=r.addressDescription,n="".concat(r.addressDescription).concat(r.addressComplement?" (compl:"+r.addressComplement+")":"").concat(r.addressReferencePoint?" - "+r.addressReferencePoint:"")}else{var o=e;t=o.address.description,n="".concat(o.address.description).concat(o.address.complement?" (compl:"+o.address.complement+")":"").concat(o.address.referencePoint?" - "+o.address.referencePoint:"")}var a=function(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.focus(),t.select();try{return document.execCommand("copy")}catch(n){console.error("Oops, unable to copy")}document.body.removeChild(t)}("https://www.google.com.br/maps?q=".concat(encodeURI(t),"\n").concat(n));this._toast.open(a?"Copiado para sua \xe1rea de transfer\xeancia!":"Erro ao copiar :(")}}]),e}()).\u0275fac=function(e){return new(e||G)(d["\u0275\u0275directiveInject"](u.a),d["\u0275\u0275directiveInject"](p.a),d["\u0275\u0275directiveInject"](f.a),d["\u0275\u0275directiveInject"](v.b),d["\u0275\u0275directiveInject"](h))},G.\u0275cmp=d["\u0275\u0275defineComponent"]({type:G,selectors:[["app-pos-customer"]],viewQuery:function(e,t){var n;1&e&&(d["\u0275\u0275viewQuery"](w,!0),d["\u0275\u0275viewQuery"](I,!0),d["\u0275\u0275viewQuery"](P,!0),d["\u0275\u0275viewQuery"](k,!0)),2&e&&(d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.generalSearchElement=n.first),d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.nameSearchElement=n.first),d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.phoneSearchElement=n.first),d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.addressSearchElement=n.first))},decls:50,vars:7,consts:[[1,"row"],[1,"col-12"],["matInput","","placeholder","Geral","autocomplete","off",3,"keyup.enter"],["generalSearch",""],[1,"col-md-4"],["matInput","","placeholder","Nome","autocomplete","off",3,"keyup.enter"],["nameSearch",""],["matInput","","placeholder","Telefone","autocomplete","off",3,"keyup.enter"],["phoneSearch",""],["matInput","","placeholder","Endere\xe7o","autocomplete","off",3,"keyup.enter"],["addressSearch",""],["class","col-md-4","style","padding-top: 26px",4,"ngIf"],[1,"row",2,"margin-bottom","15px !important"],["mat-stroked-button","","color","primary",2,"margin-right","15px",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","phones"],["matColumnDef","address"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"backgroundColor",4,"matRowDef","matRowDefColumns"],[2,"text-align","center","padding","10px"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["href","javascript:;","mat-fab","","color","primary",1,"btn-add",3,"click"],[1,"col-md-4",2,"padding-top","26px"],[1,"selected-customer"],["href","javascript:;",3,"click"],["mat-stroked-button","",3,"click"],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275elementStart"](1,"div"),d["\u0275\u0275elementStart"](2,"div",0),d["\u0275\u0275elementStart"](3,"div",1),d["\u0275\u0275elementStart"](4,"mat-form-field"),d["\u0275\u0275elementStart"](5,"input",2,3),d["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"div",4),d["\u0275\u0275elementStart"](8,"mat-form-field"),d["\u0275\u0275elementStart"](9,"input",5,6),d["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"div",4),d["\u0275\u0275elementStart"](12,"mat-form-field"),d["\u0275\u0275elementStart"](13,"input",7,8),d["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"div",4),d["\u0275\u0275elementStart"](16,"mat-form-field"),d["\u0275\u0275elementStart"](17,"input",9,10),d["\u0275\u0275listener"]("keyup.enter",function(){return t.search()}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](19,O,14,8,"div",11),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](20,"div",12),d["\u0275\u0275elementStart"](21,"div",1),d["\u0275\u0275elementStart"](22,"button",13),d["\u0275\u0275listener"]("click",function(){return t.clearFilter()}),d["\u0275\u0275text"](23,"Limpar filtros"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](24,"button",14),d["\u0275\u0275listener"]("click",function(){return t.search()}),d["\u0275\u0275text"](25,"Buscar"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](26,"div",0),d["\u0275\u0275elementStart"](27,"table",15),d["\u0275\u0275elementContainerStart"](28,16),d["\u0275\u0275template"](29,F,2,0,"th",17),d["\u0275\u0275template"](30,_,2,1,"td",18),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementContainerStart"](31,19),d["\u0275\u0275template"](32,A,2,0,"th",17),d["\u0275\u0275template"](33,j,2,1,"td",18),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementContainerStart"](34,20),d["\u0275\u0275template"](35,q,2,0,"th",17),d["\u0275\u0275template"](36,B,3,1,"td",18),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementContainerStart"](37,21),d["\u0275\u0275template"](38,Q,2,0,"th",17),d["\u0275\u0275template"](39,M,3,2,"td",18),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementContainerStart"](40,22),d["\u0275\u0275template"](41,N,2,0,"th",17),d["\u0275\u0275template"](42,R,6,0,"td",18),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275template"](43,V,1,0,"tr",23),d["\u0275\u0275template"](44,D,1,2,"tr",24),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](45,"div",25),d["\u0275\u0275template"](46,$,2,0,"button",26),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](47,"button",27),d["\u0275\u0275listener"]("click",function(){return t.openPersonForm()}),d["\u0275\u0275elementStart"](48,"mat-icon"),d["\u0275\u0275text"](49,"add"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275classMap"](t.salesPosService.personCustomer?"col-md-8":"col-md-12"),d["\u0275\u0275advance"](18),d["\u0275\u0275property"]("ngIf",t.salesPosService.personCustomer),d["\u0275\u0275advance"](8),d["\u0275\u0275property"]("dataSource",t.persons),d["\u0275\u0275advance"](16),d["\u0275\u0275property"]("matHeaderRowDef",t.tableColumns),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("matRowDefColumns",t.tableColumns),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.persons.length>=t.personSearchFilter.limit))},directives:[S.c,y.b,i.k,E.a,x.j,x.c,x.e,x.b,x.g,x.i,b.a,x.d,x.a,g.b,i.j,g.a,x.f,x.h],pipes:[C],styles:["table[_ngcontent-%COMP%]{width:100%}.selected-customer[_ngcontent-%COMP%]{border:1px solid #ddd;padding:11px;font-size:13px;border-radius:4px}.selected-customer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:7px}.btn-add[_ngcontent-%COMP%]{position:fixed;bottom:26px;right:30px}"]}),G),U=o("lJxs"),H=o("Gdn9"),L=o("q3OW"),J=o("d3UM"),K=o("XNiG"),X=o("Kj3r"),W=o("/1cH"),Z=o("FKr1"),Y=["autocompleteInput"];function ee(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"mat-option",6),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275property"]("value",n.value),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",n.label," ")}}var te,ne,re=((te=function(){function e(){n(this,e),this.disabled=!1,this.items=[],this.onInputSubject=new K.a}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.onInputSubject.pipe(Object(X.a)(300)).subscribe(function(t){return e.options.onGetItems(t).subscribe(function(t){return e.items=t})})}},{key:"onSelectItem",value:function(e){this.selectedItem=this.items.find(function(t){return t.value==e.option.value}),this.autocompleteInput.nativeElement.value=this.selectedItem.label,this.options.onSelectItem(this.selectedItem)}},{key:"onBlur",value:function(){this.autocompleteInput.nativeElement.value=this.selectedItem?this.selectedItem.label:null}},{key:"onFocus",value:function(){this.autocompleteInput.nativeElement.value=null}},{key:"clear",value:function(){this.items=[],this.autocompleteInput.nativeElement.value=null,this.selectedItem=null}}]),e}()).\u0275fac=function(e){return new(e||te)},te.\u0275cmp=d["\u0275\u0275defineComponent"]({type:te,selectors:[["app-autocomplete"]],viewQuery:function(e,t){var n;1&e&&d["\u0275\u0275viewQuery"](Y,!0),2&e&&d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.autocompleteInput=n.first)},inputs:{options:"options",disabled:"disabled"},decls:9,vars:4,consts:[["type","text","autocomplete","off","matInput","",3,"placeholder","matAutocomplete","disabled","input","blur","focus"],["autocompleteInput",""],["mat-icon-button","","matSuffix","",3,"click"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"mat-form-field"),d["\u0275\u0275elementStart"](1,"input",0,1),d["\u0275\u0275listener"]("input",function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275reference"](2);return t.onInputSubject.next(e.value)})("blur",function(){return t.onBlur()})("focus",function(){return t.onFocus()}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"button",2),d["\u0275\u0275listener"]("click",function(){return t.clear()}),d["\u0275\u0275elementStart"](4,"mat-icon"),d["\u0275\u0275text"](5,"close"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"mat-autocomplete",3,4),d["\u0275\u0275listener"]("optionSelected",function(e){return t.onSelectItem(e)}),d["\u0275\u0275template"](8,ee,2,2,"mat-option",5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){var r=d["\u0275\u0275reference"](7);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("placeholder",null==t.options?null:t.options.placeholder)("matAutocomplete",r)("disabled",t.disabled),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("ngForOf",t.items)}},directives:[S.c,y.b,W.c,E.a,S.g,b.a,W.a,i.j,Z.k],styles:[""]}),te),oe=o("f0Cb"),ae=((ne=function(){function e(){n(this,e)}return t(e,[{key:"transform",value:function(e){return null!=e?"R$ "+e.toFixed(2).replace(".",","):"-"}}]),e}()).\u0275fac=function(e){return new(e||ne)},ne.\u0275pipe=d["\u0275\u0275definePipe"]({name:"money",type:ne,pure:!0}),ne),le=["companyBranch"],ie=["productAutocomplete"],ce=["productPrice"],de=["quantity"];function se(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"mat-option",24),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275property"]("value",n.id),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"](" ",n.name," - ",n.tradeName," ")}}function me(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"mat-option",24),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;d["\u0275\u0275property"]("value",n.id),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function ue(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"mat-error"),d["\u0275\u0275text"](1," Valor precisa ser maior de 0 "),d["\u0275\u0275elementEnd"]())}function pe(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"tr"),d["\u0275\u0275elementStart"](1,"td"),d["\u0275\u0275text"](2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"td"),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"td"),d["\u0275\u0275text"](6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"td"),d["\u0275\u0275text"](8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"td"),d["\u0275\u0275text"](10),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"td"),d["\u0275\u0275text"](12),d["\u0275\u0275pipe"](13,"money"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](14,"td"),d["\u0275\u0275elementStart"](15,"a",25),d["\u0275\u0275listener"]("click",function(){d["\u0275\u0275restoreView"](n);var e=t.index;return d["\u0275\u0275nextContext"]().editProduct(e)}),d["\u0275\u0275elementStart"](16,"mat-icon"),d["\u0275\u0275text"](17,"edit"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](18,"a",25),d["\u0275\u0275listener"]("click",function(){d["\u0275\u0275restoreView"](n);var e=t.index;return d["\u0275\u0275nextContext"]().removeProduct(e)}),d["\u0275\u0275elementStart"](19,"mat-icon"),d["\u0275\u0275text"](20,"close"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](r.companyBranchProduct.product.code),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](r.companyBranchProduct.product.name),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](r.price.name),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](r.price.salePrice),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](r.quantity),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](13,6,r.quantity*r.price.salePrice))}}var fe,ve,he,Se,ye,Ee,xe,be,ge=((ye=function(){function e(t,r,o,a,l){var i=this;n(this,e),this._loader=t,this._toast=r,this.salesPosService=o,this._productService=a,this._companyBranchService=l,this.productSearchAutocompleteOptions={placeholder:"Busca",onGetItems:function(e){return i.productSearchAutocompleteOnGetItems(e)},onSelectItem:function(e){return i.productSearchAutocompleteOnSelectItem(e)}},this.companyBranches=[]}return t(e,[{key:"ngOnInit",value:function(){this.getCompanyBranches()}},{key:"getCompanyBranches",value:function(){var e=this;this._companyBranchService.getAll().subscribe(function(t){e.companyBranches=t},function(t){e._toast.showError(t)})}},{key:"productSearchAutocompleteOnGetItems",value:function(e){return this._productService.getAllForSales({index:0,limit:8,q:e},this.companyBranchElement.value).pipe(Object(U.a)(function(e){return e.map(function(e){return{label:"".concat(e.product.code," - ").concat(e.product.name),value:e}})}))}},{key:"productSearchAutocompleteOnSelectItem",value:function(e){this.productToAdd=e.value,this.productAutocomplete.clear()}},{key:"addProduct",value:function(){var e=this;if(!this.productToAdd)throw this._toast.open("Nenhum produto selecionado"),new Error("Not selected product");if(!this.productPriceElement.value)throw this._toast.open("Nenhum tipo de pre\xe7o selecionado"),new Error("Not selected price type");if(!this.quantityElement.nativeElement.value)throw this._toast.open("Nenhuma quantidade informada"),new Error("Not defined quantity");var t={companyBranchProduct:this.productToAdd,price:this.productToAdd.prices.find(function(t){return t.id==e.productPriceElement.value}),quantity:this.quantityElement.nativeElement.value};this.salesPosService.products.push(t),this.productToAdd=null}},{key:"editProduct",value:function(e){var t=this.salesPosService.products[e];this.productToAdd=t.companyBranchProduct,this.productPriceElement.value=t.price.id,this.quantityElement.nativeElement.value=t.quantity,this.removeProduct(e)}},{key:"removeProduct",value:function(e){this.salesPosService.products.splice(e,1)}},{key:"getPriceById",value:function(e){return e&&this.productToAdd?this.productToAdd.prices.find(function(t){return t.id==e}):null}},{key:"posProductsTotalPrice",get:function(){return this.salesPosService.products.map(function(e){return e.quantity*e.price.salePrice}).reduce(function(e,t){return e+t},0)}}]),e}()).\u0275fac=function(e){return new(e||ye)(d["\u0275\u0275directiveInject"](p.a),d["\u0275\u0275directiveInject"](f.a),d["\u0275\u0275directiveInject"](h),d["\u0275\u0275directiveInject"](H.a),d["\u0275\u0275directiveInject"](L.a))},ye.\u0275cmp=d["\u0275\u0275defineComponent"]({type:ye,selectors:[["app-pos-products"]],viewQuery:function(e,t){var n;1&e&&(d["\u0275\u0275viewQuery"](le,!0),d["\u0275\u0275viewQuery"](ie,!0),d["\u0275\u0275viewQuery"](ce,!0),d["\u0275\u0275viewQuery"](de,!0)),2&e&&(d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.companyBranchElement=n.first),d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.productAutocomplete=n.first),d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.productPriceElement=n.first),d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.quantityElement=n.first))},decls:70,vars:16,consts:[[1,"row"],[1,"col-6",2,"border-right","2px solid #ddd","height","100vh"],[1,"col-12"],["formControlName","type"],["companyBranch",""],[3,"value",4,"ngFor","ngForOf"],[3,"disabled","options"],["productAutocomplete",""],[1,"row",2,"padding-top","14px",3,"hidden"],[1,"col-12",2,"font-size","19px"],[1,"col-8"],["productPrice",""],[1,"col-4"],[1,"price"],["type","number","matInput","","placeholder","Quantidade","autocomplete","off"],["quantity",""],[4,"ngIf"],[1,"col-sm-12"],["mat-flat-button","","color","primary",3,"click"],[1,"col-6"],[1,"products-table"],[4,"ngFor","ngForOf"],["colspan","5"],[2,"font-weight","bold","color","var(--color-alizarin)"],[3,"value"],["href","javascript:;",3,"click"]],template:function(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275elementStart"](1,"div",1),d["\u0275\u0275elementStart"](2,"div",0),d["\u0275\u0275elementStart"](3,"div",2),d["\u0275\u0275elementStart"](4,"mat-form-field"),d["\u0275\u0275elementStart"](5,"mat-label"),d["\u0275\u0275text"](6,"Unidade"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"mat-select",3,4),d["\u0275\u0275template"](9,se,2,3,"mat-option",5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"div",2),d["\u0275\u0275element"](11,"app-autocomplete",6,7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](13,"mat-divider"),d["\u0275\u0275elementStart"](14,"div",8),d["\u0275\u0275elementStart"](15,"div",2),d["\u0275\u0275elementStart"](16,"h3"),d["\u0275\u0275text"](17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](18,"div",9),d["\u0275\u0275elementStart"](19,"h4"),d["\u0275\u0275text"](20),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"div",9),d["\u0275\u0275elementStart"](22,"h4"),d["\u0275\u0275text"](23),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](24,"div",10),d["\u0275\u0275elementStart"](25,"mat-form-field"),d["\u0275\u0275elementStart"](26,"mat-label"),d["\u0275\u0275text"](27,"Tipo de pre\xe7o"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](28,"mat-select",3,11),d["\u0275\u0275template"](30,me,2,2,"mat-option",5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](31,"div",12),d["\u0275\u0275elementStart"](32,"div",13),d["\u0275\u0275text"](33),d["\u0275\u0275pipe"](34,"money"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](35,"div",12),d["\u0275\u0275elementStart"](36,"mat-form-field"),d["\u0275\u0275element"](37,"input",14,15),d["\u0275\u0275template"](39,ue,2,0,"mat-error",16),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](40,"div",17),d["\u0275\u0275elementStart"](41,"button",18),d["\u0275\u0275listener"]("click",function(){return t.addProduct()}),d["\u0275\u0275text"](42,"Incluir produto"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](43,"div",19),d["\u0275\u0275elementStart"](44,"div",0),d["\u0275\u0275elementStart"](45,"div",2),d["\u0275\u0275elementStart"](46,"table",20),d["\u0275\u0275elementStart"](47,"thead"),d["\u0275\u0275elementStart"](48,"tr"),d["\u0275\u0275elementStart"](49,"th"),d["\u0275\u0275text"](50,"C\xf3d"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](51,"th"),d["\u0275\u0275text"](52,"Produto"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](53,"th"),d["\u0275\u0275text"](54,"Tip. pre\xe7o"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](55,"th"),d["\u0275\u0275text"](56,"Pre\xe7o"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](57,"th"),d["\u0275\u0275text"](58,"Qtd"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](59,"th"),d["\u0275\u0275text"](60,"Total"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](61,"th"),d["\u0275\u0275text"](62,"Opt"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](63,"tbody"),d["\u0275\u0275template"](64,pe,21,8,"tr",21),d["\u0275\u0275elementStart"](65,"tr"),d["\u0275\u0275element"](66,"td",22),d["\u0275\u0275elementStart"](67,"td",23),d["\u0275\u0275text"](68),d["\u0275\u0275pipe"](69,"money"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){var n,r=d["\u0275\u0275reference"](8),o=d["\u0275\u0275reference"](29),a=d["\u0275\u0275reference"](38);d["\u0275\u0275advance"](9),d["\u0275\u0275property"]("ngForOf",t.companyBranches),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("disabled",!r.value)("options",t.productSearchAutocompleteOptions),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("hidden",!t.productToAdd),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](null==t.productToAdd?null:t.productToAdd.product.name),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate1"]("Categoria: ",null==t.productToAdd?null:t.productToAdd.product.category.name,""),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate1"]("C\xf3d: ",null==t.productToAdd?null:t.productToAdd.product.code,""),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("ngForOf",null==t.productToAdd?null:t.productToAdd.prices),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](34,12,null==(n=t.getPriceById(o.value))?null:n.salePrice)),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("ngIf",!!a&&a.value<=0),d["\u0275\u0275advance"](25),d["\u0275\u0275property"]("ngForOf",t.salesPosService.products),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](69,14,t.posProductsTotalPrice)," ")}},directives:[S.c,S.f,J.a,i.j,re,oe.a,y.b,i.k,E.a,Z.k,S.b,b.a],pipes:[ae],styles:[".price[_ngcontent-%COMP%]{font-size:24px;color:var(--color-alizarin);font-weight:700;margin-top:17px}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd}"]}),ye),Ce=((Se=function(){function e(){n(this,e)}return t(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Se)},Se.\u0275cmp=d["\u0275\u0275defineComponent"]({type:Se,selectors:[["app-pos-delivery"]],decls:2,vars:0,template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"p"),d["\u0275\u0275text"](1,"pos-delivery works!"),d["\u0275\u0275elementEnd"]())},styles:[""]}),Se),we=((he=function(){function e(){n(this,e)}return t(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||he)},he.\u0275cmp=d["\u0275\u0275defineComponent"]({type:he,selectors:[["app-pos-payment"]],decls:2,vars:0,template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"p"),d["\u0275\u0275text"](1,"pos-payment works!"),d["\u0275\u0275elementEnd"]())},styles:[""]}),he),Ie=((ve=function(){function e(){n(this,e)}return t(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ve)},ve.\u0275cmp=d["\u0275\u0275defineComponent"]({type:ve,selectors:[["app-pos-summary"]],decls:2,vars:0,template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"p"),d["\u0275\u0275text"](1,"pos-summary works!"),d["\u0275\u0275elementEnd"]())},styles:[""]}),ve),Pe=((fe=function(){function e(){n(this,e)}return t(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||fe)},fe.\u0275cmp=d["\u0275\u0275defineComponent"]({type:fe,selectors:[["app-sales-pos"]],decls:11,vars:0,consts:[["label","Cliente"],["label","Produtos"],["label","Entrega"],["label","Pagamento"],["label","Finalizar"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"mat-tab-group"),d["\u0275\u0275elementStart"](1,"mat-tab",0),d["\u0275\u0275element"](2,"app-pos-customer"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"mat-tab",1),d["\u0275\u0275element"](4,"app-pos-products"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"mat-tab",2),d["\u0275\u0275element"](6,"app-pos-delivery"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"mat-tab",3),d["\u0275\u0275element"](8,"app-pos-payment"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"mat-tab",4),d["\u0275\u0275element"](10,"app-pos-summary"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())},directives:[s.b,s.a,z,ge,Ce,we,Ie],styles:[""]}),fe),ke=[{path:"",component:(Ee=function(){function e(){n(this,e)}return t(e,[{key:"ngOnInit",value:function(){}}]),e}(),Ee.\u0275fac=function(e){return new(e||Ee)},Ee.\u0275cmp=d["\u0275\u0275defineComponent"]({type:Ee,selectors:[["app-sales"]],decls:1,vars:0,template:function(e,t){1&e&&d["\u0275\u0275element"](0,"router-outlet")},directives:[c.g],styles:[""]}),Ee),children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"pos",component:Pe}]}],Oe=((xe=function e(){n(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:xe}),xe.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||xe)},imports:[[c.f.forChild(ke)],c.f]}),xe),Fe=o("PCNd"),_e=o("ssao"),Ae=o("iTUp"),je=((be=function e(){n(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:be}),be.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||be)},providers:[h],imports:[[i.b,Fe.a,_e.a,Ae.a,Oe]]}),be)}}])}();