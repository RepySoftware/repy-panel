(self.webpackChunkseigas_repy_panel=self.webpackChunkseigas_repy_panel||[]).push([[813],{59813:function(e,t,n){"use strict";n.r(t),n.d(t,{LoginModule:function(){return E}});var r=n(38583),i=n(3679),o=n(37716),a=n(37556),s=n(84465),m=n(38555),l=n(54249),c=n(54655),d=n(26026),u=n(25352),g=n(93738),p=n(98295),h=n(49983),f=n(51095);const v=["backgroundImage"];function I(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"mat-error"),o["\u0275\u0275text"](1," Este campo cont\xe9m erros "),o["\u0275\u0275elementEnd"]())}function S(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"mat-error"),o["\u0275\u0275text"](1," Este campo \xe9 obrigat\xf3rio "),o["\u0275\u0275elementEnd"]())}let b=(()=>{class e{constructor(e,t,n,r,o,a,s){this._authService=e,this._toastService=t,this._loaderService=n,this._imageService=r,this._router=o,this._title=a,this._sidenavService=s,this._title.set("Login"),this.loginForm=new i.cw({username:new i.NI(null,[i.kI.required]),password:new i.NI(null,i.kI.required)})}ngOnInit(){this.setBackgroundImage()}login(){if(!this.loginForm.valid){const e="Preencha todos os campos";throw this._toastService.open(e),new Error(e)}const e={username:this.loginForm.get("username").value,password:this.loginForm.get("password").value};this._loaderService.show(),this._authService.login(e).subscribe(e=>{this._loaderService.dismiss(),this._router.navigate(["/home"],{queryParams:{sn:!0}})},e=>{this._loaderService.dismiss(),this._toastService.showHttpError(e)})}setBackgroundImage(){this._imageService.getImageOfTheDay().subscribe(e=>{this.backgroundImageElement.nativeElement.style.backgroundImage=`url(${e})`},e=>{this.backgroundImageElement.nativeElement.style.backgroundImage="url(/assets/images/login-bg.jpg)"})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.e),o["\u0275\u0275directiveInject"](s.k),o["\u0275\u0275directiveInject"](m.D),o["\u0275\u0275directiveInject"](l.A),o["\u0275\u0275directiveInject"](c.F0),o["\u0275\u0275directiveInject"](d.y),o["\u0275\u0275directiveInject"](u.Z))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-login"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](v,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.backgroundImageElement=e.first)}},decls:20,vars:3,consts:[[1,"bg"],["backgroundImage",""],[1,"row"],[1,"col-md-4","offset-md-4"],[1,"login-card"],["src","/assets/images/logo.png",2,"width","200px","padding","17px"],[2,"font-size","18px","font-weight","bold"],[3,"formGroup","ngSubmit"],["type","text","matInput","","placeholder","Nome de usu\xe1rio","formControlName","username"],["username",""],[4,"ngIf"],["matInput","","placeholder","Senha","formControlName","password","type","password"],["password",""],["mat-flat-button","","color","primary",2,"width","100%"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0,1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"mat-card",4),o["\u0275\u0275elementStart"](5,"div"),o["\u0275\u0275element"](6,"img",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"mat-card-subtitle",6),o["\u0275\u0275text"](8,"Login"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"form",7),o["\u0275\u0275listener"]("ngSubmit",function(){return t.login()}),o["\u0275\u0275elementStart"](10,"mat-form-field"),o["\u0275\u0275element"](11,"input",8,9),o["\u0275\u0275template"](13,I,2,0,"mat-error",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"mat-form-field"),o["\u0275\u0275element"](15,"input",11,12),o["\u0275\u0275template"](17,S,2,0,"mat-error",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"button",13),o["\u0275\u0275text"](19,"Entrar"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](12),n=o["\u0275\u0275reference"](16);o["\u0275\u0275advance"](9),o["\u0275\u0275property"]("formGroup",t.loginForm),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",!e.valid),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",!n.valid)}},directives:[g.a8,g.$j,i._Y,i.JL,i.sg,p.KE,h.Nt,i.Fj,i.JJ,i.u,r.O5,f.lW,p.TO],styles:[".bg[_ngcontent-%COMP%]{background-size:cover;position:absolute;width:100%;height:100%}.login-card[_ngcontent-%COMP%]{text-align:center;padding:30px;margin-top:20%!important}"]}),e})();var w=n(6591);let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[r.ez,w.h,c.Bz.forChild([{path:"",component:b}]),i.UX]]}),e})()}}]);